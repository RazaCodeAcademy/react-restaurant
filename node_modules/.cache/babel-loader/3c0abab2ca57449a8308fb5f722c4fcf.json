{"ast":null,"code":"import _objectSpread from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useContext,useState}from\"react\";import{useHistory}from\"react-router-dom\";//axios and base url\nimport axios from\"axios\";import{BASE_URL}from\"../../../../BaseUrl\";//functions\nimport{_t,getCookie,tableLoading,currencySymbolLeft,formatPrice,currencySymbolRight}from\"../../../../functions/Functions\";import{useTranslation}from\"react-i18next\";//3rd party packages\nimport{Helmet}from\"react-helmet\";import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import Chart from\"react-apexcharts\";import Moment from\"react-moment\";import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";//pages & includes\nimport ReportSidebar from\"./ReportSidebar\";//context consumer\nimport{SettingsContext}from\"../../../../contexts/Settings\";var ItemWise=function ItemWise(){var _useTranslation=useTranslation(),t=_useTranslation.t;//getting context values here\nvar _useContext=useContext(SettingsContext),loading=_useContext.loading,setLoading=_useContext.setLoading,dataPaginating=_useContext.dataPaginating;// States hook here\nvar _useState=useState({options:{chart:{id:\"basic-bar\"},xaxis:{categories:[]},labels:{show:false}},series:[{name:_t(t(\"Amount\")),data:[]}]}),_useState2=_slicedToArray(_useState,2),amountChart=_useState2[0],setAmountChart=_useState2[1];//all data\nvar _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),reportData=_useState4[0],setReportData=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),startDate=_useState6[0],setStartDate=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),endDate=_useState8[0],setEndDate=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),generatedReport=_useState10[0],setGeneratedReport=_useState10[1];//useEffect == componentDidMount()\nuseEffect(function(){setLoading(true);setTimeout(function(){setLoading(false);},500);},[]);//get ItemWise reports filter\nvar getItemWiseSelected=function getItemWiseSelected(){if(startDate!==null&&endDate!==null){setLoading(true);var fromDate=startDate.toISOString();var toDate=endDate.toISOString();var url=BASE_URL+\"/settings/get-food-item-report\";var formData={fromDate:fromDate,toDate:toDate};return axios.post(url,formData,{headers:{Authorization:\"Bearer \".concat(getCookie())}}).then(function(res){var formattedAmount=res.data[1].map(function(item){return parseFloat(formatPrice(item));});setAmountChart(_objectSpread(_objectSpread({},amountChart),{},{options:_objectSpread(_objectSpread({},amountChart.options),{},{xaxis:_objectSpread(_objectSpread({},amountChart.options.xaxis),{},{categories:res.data[0],labels:{show:false}})}),series:[{name:amountChart.series[0].name,data:formattedAmount}]}));setReportData(res.data[2]);setGeneratedReport(true);setLoading(false);}).catch(function(error){setLoading(false);});}else{toast.error(\"\".concat(_t(t(\"Please select all the field to generate report\"))),{position:\"bottom-center\",closeButton:false,autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Helmet,null,/*#__PURE__*/React.createElement(\"title\",null,_t(t(\"Food item wise report\")))),/*#__PURE__*/React.createElement(\"main\",{id:\"main\",\"data-simplebar\":true},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row t-mt-10 gx-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-3 col-xxl-2 t-mb-30 mb-lg-0\"},/*#__PURE__*/React.createElement(ReportSidebar,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-9 col-xxl-10 t-mb-30 mb-lg-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"t-bg-white\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fk-scroll--pos-menu table-bottom-info-hide\",\"data-simplebar\":true},/*#__PURE__*/React.createElement(\"div\",{className:\"t-pl-15 t-pr-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(dataPaginating&&\"loading\")}),loading===true?tableLoading():/*#__PURE__*/React.createElement(\"div\",{key:\"smtp-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 align-items-center t-pt-15 t-pb-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 t-mb-15 mb-md-0\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list fk-breadcrumb\"},/*#__PURE__*/React.createElement(\"li\",{className:\"fk-breadcrumb__list\"},/*#__PURE__*/React.createElement(\"span\",{className:\"t-link fk-breadcrumb__link text-capitalize\"},_t(t(\"Food Item Wise report\"))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 mt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-2 d-md-block\"},/*#__PURE__*/React.createElement(DatePicker,{selected:startDate,onChange:function onChange(date){return setStartDate(date);},peekNextMonth:true,showMonthDropdown:true,showYearDropdown:true,dropdownMode:\"select\",className:\"form-control sm-text py-2 t-mb-15 mb-md-0\",placeholderText:_t(t(\"From date\")),shouldCloseOnSelect:false})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-2 t-mb-15 mb-md-0\"},/*#__PURE__*/React.createElement(DatePicker,{selected:endDate,onChange:function onChange(date){return setEndDate(date);},peekNextMonth:true,showMonthDropdown:true,showYearDropdown:true,dropdownMode:\"select\",className:\"form-control sm-text py-2\",placeholderText:_t(t(\"To date\")),shouldCloseOnSelect:false})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5 col-md-4 t-mb-15 mb-md-0 d-none d-md-block text-right\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-block btn-primary text-uppercase sm-text py-2\",onClick:getItemWiseSelected},_t(t(\"Generate Report\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-5 col-md-8 t-mb-15 mb-md-0 d-block d-md-none\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-block btn-primary text-uppercase sm-text\",onClick:getItemWiseSelected},_t(t(\"Generate Report\"))))),generatedReport?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 justify-content-center t-pt-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-md-0\"},/*#__PURE__*/React.createElement(Chart,{options:amountChart.options,series:amountChart.series,type:\"line\",width:\"100%\",height:\"350px\"}))),reportData!==null&&reportData!==undefined&&reportData.length>0&&/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 justify-content-center t-pb-15 t-pt-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 t-mb-15 mb-md-0 table-responsive\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table table-bordered table-hover min-table-height mt-3\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"align-middle\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},_t(t(\"S/L\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},_t(t(\"Name\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},_t(t(\"Group\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},_t(t(\"Variation\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},_t(t(\"Qty\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},_t(t(\"Bill\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},_t(t(\"Date\"))))),/*#__PURE__*/React.createElement(\"tbody\",{className:\"align-middle\"},reportData.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{className:\"align-middle\",key:index},/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",className:\"xsm-text text-capitalize align-middle text-center\"},index+1),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},item.food_item),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},item.food_group),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},item.variation!==null?item.variation:\"-\"),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},item.quantity),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},currencySymbolLeft(),formatPrice(item.price),currencySymbolRight()),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},/*#__PURE__*/React.createElement(Moment,{format:\"LL\"},item.created_at)));})))))):/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 justify-content-center t-pt-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-8 mt-5 py-4 mb-md-0 card text-center text-uppercase sm-text\"},_t(t(\"Generate report following the above field\")))))))))))));};export default ItemWise;","map":{"version":3,"sources":["/Users/raza/Downloads/khadyo_source_code/client/src/resources/restaurant/auth/reports/ItemWise.js"],"names":["React","useEffect","useContext","useState","useHistory","axios","BASE_URL","_t","getCookie","tableLoading","currencySymbolLeft","formatPrice","currencySymbolRight","useTranslation","Helmet","toast","Chart","Moment","DatePicker","ReportSidebar","SettingsContext","ItemWise","t","loading","setLoading","dataPaginating","options","chart","id","xaxis","categories","labels","show","series","name","data","amountChart","setAmountChart","reportData","setReportData","startDate","setStartDate","endDate","setEndDate","generatedReport","setGeneratedReport","setTimeout","getItemWiseSelected","fromDate","toISOString","toDate","url","formData","post","headers","Authorization","then","res","formattedAmount","map","item","parseFloat","catch","error","position","closeButton","autoClose","hideProgressBar","closeOnClick","pauseOnHover","className","date","undefined","length","index","food_item","food_group","variation","quantity","price","created_at"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n//axios and base url\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../../../../BaseUrl\";\r\n\r\n//functions\r\nimport {\r\n  _t,\r\n  getCookie,\r\n  tableLoading,\r\n  currencySymbolLeft,\r\n  formatPrice,\r\n  currencySymbolRight,\r\n} from \"../../../../functions/Functions\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\n//3rd party packages\r\nimport { Helmet } from \"react-helmet\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Chart from \"react-apexcharts\";\r\nimport Moment from \"react-moment\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\n//pages & includes\r\nimport ReportSidebar from \"./ReportSidebar\";\r\n\r\n//context consumer\r\nimport { SettingsContext } from \"../../../../contexts/Settings\";\r\n\r\nconst ItemWise = () => {\r\n  const { t } = useTranslation();\r\n  //getting context values here\r\n  let { loading, setLoading, dataPaginating } = useContext(SettingsContext);\r\n  // States hook here\r\n  const [amountChart, setAmountChart] = useState({\r\n    options: {\r\n      chart: {\r\n        id: \"basic-bar\",\r\n      },\r\n      xaxis: {\r\n        categories: [],\r\n      },\r\n      labels: { show: false },\r\n    },\r\n    series: [\r\n      {\r\n        name: _t(t(\"Amount\")),\r\n        data: [],\r\n      },\r\n    ],\r\n  });\r\n\r\n  //all data\r\n  const [reportData, setReportData] = useState(null);\r\n  const [startDate, setStartDate] = useState(null);\r\n  const [endDate, setEndDate] = useState(null);\r\n  const [generatedReport, setGeneratedReport] = useState(false);\r\n\r\n  //useEffect == componentDidMount()\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    setTimeout(() => {\r\n      setLoading(false);\r\n    }, 500);\r\n  }, []);\r\n\r\n  //get ItemWise reports filter\r\n  const getItemWiseSelected = () => {\r\n    if (startDate !== null && endDate !== null) {\r\n      setLoading(true);\r\n      var fromDate = startDate.toISOString();\r\n      var toDate = endDate.toISOString();\r\n      const url = BASE_URL + \"/settings/get-food-item-report\";\r\n      let formData = {\r\n        fromDate,\r\n        toDate,\r\n      };\r\n      return axios\r\n        .post(url, formData, {\r\n          headers: { Authorization: `Bearer ${getCookie()}` },\r\n        })\r\n        .then((res) => {\r\n          let formattedAmount = res.data[1].map((item) =>\r\n            parseFloat(formatPrice(item))\r\n          );\r\n          setAmountChart({\r\n            ...amountChart,\r\n            options: {\r\n              ...amountChart.options,\r\n              xaxis: {\r\n                ...amountChart.options.xaxis,\r\n                categories: res.data[0],\r\n                labels: { show: false },\r\n              },\r\n            },\r\n            series: [\r\n              { name: amountChart.series[0].name, data: formattedAmount },\r\n            ],\r\n          });\r\n          setReportData(res.data[2]);\r\n          setGeneratedReport(true);\r\n          setLoading(false);\r\n        })\r\n        .catch((error) => {\r\n          setLoading(false);\r\n        });\r\n    } else {\r\n      toast.error(\r\n        `${_t(t(\"Please select all the field to generate report\"))}`,\r\n        {\r\n          position: \"bottom-center\",\r\n          closeButton: false,\r\n          autoClose: 10000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          className: \"text-center toast-notification\",\r\n        }\r\n      );\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{_t(t(\"Food item wise report\"))}</title>\r\n      </Helmet>\r\n\r\n      {/* main body */}\r\n      <main id=\"main\" data-simplebar>\r\n        <div className=\"container\">\r\n          <div className=\"row t-mt-10 gx-2\">\r\n            {/* left Sidebar */}\r\n            <div className=\"col-lg-3 col-xxl-2 t-mb-30 mb-lg-0\">\r\n              <ReportSidebar />\r\n            </div>\r\n            {/* left Sidebar ends */}\r\n\r\n            {/* Rightbar contents */}\r\n            <div className=\"col-lg-9 col-xxl-10 t-mb-30 mb-lg-0\">\r\n              <div className=\"t-bg-white\">\r\n                <div\r\n                  className=\"fk-scroll--pos-menu table-bottom-info-hide\"\r\n                  data-simplebar\r\n                >\r\n                  <div className=\"t-pl-15 t-pr-15\">\r\n                    {/* next page data spin loading */}\r\n                    <div className={`${dataPaginating && \"loading\"}`}></div>\r\n                    {/* spin loading ends */}\r\n\r\n                    {/* Loading effect */}\r\n                    {loading === true ? (\r\n                      tableLoading()\r\n                    ) : (\r\n                      <div key=\"smtp-form\">\r\n                        <div className=\"row gx-2 align-items-center t-pt-15 t-pb-15\">\r\n                          <div className=\"col-12 t-mb-15 mb-md-0\">\r\n                            <ul className=\"t-list fk-breadcrumb\">\r\n                              <li className=\"fk-breadcrumb__list\">\r\n                                <span className=\"t-link fk-breadcrumb__link text-capitalize\">\r\n                                  {_t(t(\"Food Item Wise report\"))}\r\n                                </span>\r\n                              </li>\r\n                            </ul>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"row gx-2 mt-2\">\r\n                          <div className=\"col-12 col-md-2 d-md-block\">\r\n                            <DatePicker\r\n                              selected={startDate}\r\n                              onChange={(date) => setStartDate(date)}\r\n                              peekNextMonth\r\n                              showMonthDropdown\r\n                              showYearDropdown\r\n                              dropdownMode=\"select\"\r\n                              className=\"form-control sm-text py-2 t-mb-15 mb-md-0\"\r\n                              placeholderText={_t(t(\"From date\"))}\r\n                              shouldCloseOnSelect={false}\r\n                            />\r\n                          </div>\r\n                          <div className=\"col-12 col-md-2 t-mb-15 mb-md-0\">\r\n                            <DatePicker\r\n                              selected={endDate}\r\n                              onChange={(date) => setEndDate(date)}\r\n                              peekNextMonth\r\n                              showMonthDropdown\r\n                              showYearDropdown\r\n                              dropdownMode=\"select\"\r\n                              className=\"form-control sm-text py-2\"\r\n                              placeholderText={_t(t(\"To date\"))}\r\n                              shouldCloseOnSelect={false}\r\n                            />\r\n                          </div>\r\n                          <div className=\"col-5 col-md-4 t-mb-15 mb-md-0 d-none d-md-block text-right\">\r\n                            <button\r\n                              className=\"btn btn-block btn-primary text-uppercase sm-text py-2\"\r\n                              onClick={getItemWiseSelected}\r\n                            >\r\n                              {_t(t(\"Generate Report\"))}\r\n                            </button>\r\n                          </div>\r\n\r\n                          <div className=\"col-5 col-md-8 t-mb-15 mb-md-0 d-block d-md-none\">\r\n                            <button\r\n                              className=\"btn btn-block btn-primary text-uppercase sm-text\"\r\n                              onClick={getItemWiseSelected}\r\n                            >\r\n                              {_t(t(\"Generate Report\"))}\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                        {generatedReport ? (\r\n                          <>\r\n                            <div className=\"row gx-2 justify-content-center t-pt-15\">\r\n                              <div className=\"col-12 mb-md-0\">\r\n                                <Chart\r\n                                  options={amountChart.options}\r\n                                  series={amountChart.series}\r\n                                  type=\"line\"\r\n                                  width=\"100%\"\r\n                                  height=\"350px\"\r\n                                />\r\n                              </div>\r\n                            </div>\r\n                            {reportData !== null &&\r\n                              reportData !== undefined &&\r\n                              reportData.length > 0 && (\r\n                                <div className=\"row gx-2 justify-content-center t-pb-15 t-pt-15\">\r\n                                  <div className=\"col-12 t-mb-15 mb-md-0 table-responsive\">\r\n                                    <table className=\"table table-bordered table-hover min-table-height mt-3\">\r\n                                      <thead className=\"align-middle\">\r\n                                        <tr>\r\n                                          <th\r\n                                            scope=\"col\"\r\n                                            className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                          >\r\n                                            {_t(t(\"S/L\"))}\r\n                                          </th>\r\n                                          <th\r\n                                            scope=\"col\"\r\n                                            className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                          >\r\n                                            {_t(t(\"Name\"))}\r\n                                          </th>\r\n                                          <th\r\n                                            scope=\"col\"\r\n                                            className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                          >\r\n                                            {_t(t(\"Group\"))}\r\n                                          </th>\r\n                                          <th\r\n                                            scope=\"col\"\r\n                                            className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                          >\r\n                                            {_t(t(\"Variation\"))}\r\n                                          </th>\r\n                                          <th\r\n                                            scope=\"col\"\r\n                                            className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                          >\r\n                                            {_t(t(\"Qty\"))}\r\n                                          </th>\r\n                                          <th\r\n                                            scope=\"col\"\r\n                                            className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                          >\r\n                                            {_t(t(\"Bill\"))}\r\n                                          </th>\r\n                                          <th\r\n                                            scope=\"col\"\r\n                                            className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                          >\r\n                                            {_t(t(\"Date\"))}\r\n                                          </th>\r\n                                        </tr>\r\n                                      </thead>\r\n                                      <tbody className=\"align-middle\">\r\n                                        {/* loop here*/}\r\n                                        {reportData.map((item, index) => {\r\n                                          return (\r\n                                            <tr\r\n                                              className=\"align-middle\"\r\n                                              key={index}\r\n                                            >\r\n                                              <th\r\n                                                scope=\"row\"\r\n                                                className=\"xsm-text text-capitalize align-middle text-center\"\r\n                                              >\r\n                                                {index + 1}\r\n                                              </th>\r\n\r\n                                              <td className=\"xsm-text align-middle text-center\">\r\n                                                {item.food_item}\r\n                                              </td>\r\n\r\n                                              <td className=\"xsm-text align-middle text-center\">\r\n                                                {item.food_group}\r\n                                              </td>\r\n\r\n                                              <td className=\"xsm-text align-middle text-center\">\r\n                                                {item.variation !== null\r\n                                                  ? item.variation\r\n                                                  : \"-\"}\r\n                                              </td>\r\n\r\n                                              <td className=\"xsm-text align-middle text-center\">\r\n                                                {item.quantity}\r\n                                              </td>\r\n\r\n                                              <td className=\"xsm-text align-middle text-center\">\r\n                                                {currencySymbolLeft()}\r\n                                                {formatPrice(item.price)}\r\n                                                {currencySymbolRight()}\r\n                                              </td>\r\n                                              <td className=\"xsm-text align-middle text-center\">\r\n                                                <Moment format=\"LL\">\r\n                                                  {item.created_at}\r\n                                                </Moment>\r\n                                              </td>\r\n                                            </tr>\r\n                                          );\r\n                                        })}\r\n                                      </tbody>\r\n                                    </table>\r\n                                  </div>\r\n                                </div>\r\n                              )}\r\n                          </>\r\n                        ) : (\r\n                          <div className=\"row gx-2 justify-content-center t-pt-15\">\r\n                            <div className=\"col-8 mt-5 py-4 mb-md-0 card text-center text-uppercase sm-text\">\r\n                              {_t(\r\n                                t(\"Generate report following the above field\")\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* Rightbar contents end*/}\r\n          </div>\r\n        </div>\r\n      </main>\r\n      {/* main body ends */}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ItemWise;\r\n"]},"metadata":{},"sourceType":"module"}