{"ast":null,"code":"import _objectSpread from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useContext,useState}from\"react\";//axios and base url\nimport axios from\"axios\";import{BASE_URL}from\"../../../../BaseUrl\";//functions\nimport{_t,getCookie,pageLoading,paginationLoading,pagination,showingData,searchedShowingData}from\"../../../../functions/Functions\";import{useTranslation}from\"react-i18next\";//3rd party packages\nimport{Helmet}from\"react-helmet\";import Select from\"react-select\";import makeAnimated from\"react-select/animated\";import{confirmAlert}from\"react-confirm-alert\";import\"react-confirm-alert/src/react-confirm-alert.css\";import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import Moment from\"react-moment\";//importing context consumer here\nimport{RestaurantContext}from\"../../../../contexts/Restaurant\";import{FoodContext}from\"../../../../contexts/Food\";import{NavLink,useParams}from\"react-router-dom\";var OpeningClosingStockFoodReport=function OpeningClosingStockFoodReport(){var _useContext=useContext(RestaurantContext),workPeriodList=_useContext.workPeriodList,setPaginatedWorkPeriod=_useContext.setPaginatedWorkPeriod,dataPaginating=_useContext.dataPaginating;var _useContext2=useContext(FoodContext),loading=_useContext2.loading,setLoading=_useContext2.setLoading,getFoodStockReport=_useContext2.getFoodStockReport,itemsFood=_useContext2.itemsFood,setItemsFood=_useContext2.setItemsFood,theGroupsFood=_useContext2.theGroupsFood;var _useTranslation=useTranslation(),t=_useTranslation.t;var _useParams=useParams(),started_at=_useParams.started_at;//new unit\nvar _useState=useState({user_type:null,branch_id:null,uploading:false}),_useState2=_slicedToArray(_useState,2),newWorkPeriod=_useState2[0],setNewWorkPeriod=_useState2[1];//search result\nvar _useState3=useState({list:null,searched:false}),_useState4=_slicedToArray(_useState3,2),searchedWorkPeriod=_useState4[0],setSearchedWorkPeriod=_useState4[1];//useEffect == componentDidMount\nuseEffect(function(){getFoodStockReport(started_at);},[]);//update stock\nvar handleUpdate=function handleUpdate(e){e.preventDefault();};var handleUsage=function handleUsage(item){var usage=0;var opening=0;var closing=0;var additon=0;var subtraction=0;if(item.opening_stock!==null&&item.closing_stock!==null){opening=parseFloat(item.opening_stock);closing=parseFloat(item.closing_stock);}if(item.addition_to_opening!==null){additon=parseFloat(item.addition_to_opening);}if(item.subtraction_from_opening!==null){subtraction=parseFloat(item.subtraction_from_opening);}usage=opening+additon-subtraction-closing;return usage;};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Helmet,null,/*#__PURE__*/React.createElement(\"title\",null,_t(t(\"Food Stock\")))),/*#__PURE__*/React.createElement(\"main\",{id:\"main\",\"data-simplebar\":true},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row t-mt-10 gx-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 t-mb-30 mb-lg-0\"},newWorkPeriod.uploading===true||loading===true?pageLoading():/*#__PURE__*/React.createElement(\"div\",{className:\"t-bg-white \"},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(dataPaginating&&\"loading\")}),/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 align-itemsFood-center t-pt-15 t-pb-15 t-pl-15 t-pr-15 t-shadow\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 t-mb-15\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list fk-breadcrumb\"},/*#__PURE__*/React.createElement(\"li\",{className:\"fk-breadcrumb__list\"},/*#__PURE__*/React.createElement(\"span\",{className:\"t-link fk-breadcrumb__link text-capitalize\"},_t(t(\"Food Stock\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-lg-5\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-lg-7 t-mb-15 mb-md-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 align-itemsFood-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-5 ml-auto mt-2 mt-md-0\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list fk-sort align-itemsFood-center justify-content-center\"},/*#__PURE__*/React.createElement(\"li\",{className:\"fk-sort__list mb-0 flex-grow-1\"},/*#__PURE__*/React.createElement(NavLink,{to:\"/dashboard/food-stock\",className:\"w-100 btn alert-danger sm-text text-uppercase\"},_t(t(\"Go Back\"))))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"fk-scroll--order-history\",\"data-simplebar\":true},/*#__PURE__*/React.createElement(\"div\",{className:\"t-pl-15 t-pr-15\"},/*#__PURE__*/React.createElement(\"form\",{className:\"table-responsive\",onSubmit:handleUpdate},/*#__PURE__*/React.createElement(\"table\",{className:\"table table-bordered table-hover min-table-height mt-4\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"align-middle\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text align-middle text-center border-1 border\"},_t(t(\"S/L\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text align-middle text-center border-1 border\"},_t(t(\"Name\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text align-middle text-center border-1 border\"},_t(t(\"Opening Stock\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text align-middle text-center border-1 border\"},_t(t(\"Addition\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text align-middle text-center border-1 border\"},_t(t(\"Subtraction\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text align-middle text-center border-1 border\"},_t(t(\"Closing Stock\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text align-middle text-center border-1 border\"},_t(t(\"Usage\"))))),/*#__PURE__*/React.createElement(\"tbody\",{className:\"align-middle\"},!searchedWorkPeriod.searched?[itemsFood&&theGroupsFood&&[itemsFood.length===0?/*#__PURE__*/React.createElement(\"tr\",{className:\"align-middle\"},/*#__PURE__*/React.createElement(\"td\",{scope:\"row\",colSpan:\"8\",className:\"xsm-text align-middle text-center\"},_t(t(\"No data available\")))):theGroupsFood.map(function(grpItem,grpItemIndex){return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"tr\",{className:\"align-middle alert-success\"},/*#__PURE__*/React.createElement(\"td\",{scope:\"row\",colSpan:\"8\",className:\"xsm-text align-middle text-left ml-5 text-uppercase\"},grpItem.name)),itemsFood.map(function(item,index){if(parseInt(item.ingredient_group_id)===grpItem.id){return/*#__PURE__*/React.createElement(\"tr\",{className:\"align-middle\",key:index},/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",className:\"xsm-text text-capitalize align-middle text-center\"},index+1),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center text-secondary\"},item.ingredient_name),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},item.opening_stock),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},item.addition_to_opening===null?0:item.addition_to_opening),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},item.subtraction_from_opening===null?0:item.subtraction_from_opening),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},item.closing_stock||\"-\"),item.closing_stock!==null?/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},handleUsage(item)):/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},\"-\"));}else{return false;}}));})]]:\"\")))))),newWorkPeriod.uploading===true||loading===true?paginationLoading():[// logic === !searched\n!searchedWorkPeriod.searched?/*#__PURE__*/React.createElement(\"div\",{key:\"fragment4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"t-bg-white mt-1 t-pt-5 t-pb-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-itemsFood-center t-pl-15 t-pr-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-7 t-mb-15 mb-md-0\"},pagination(workPeriodList,setPaginatedWorkPeriod)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list d-flex justify-content-md-end align-itemsFood-center\"},/*#__PURE__*/React.createElement(\"li\",{className:\"t-list__item\"},/*#__PURE__*/React.createElement(\"span\",{className:\"d-inline-block sm-text\"}))))))):/*#__PURE__*/ // if searched\nReact.createElement(\"div\",{className:\"t-bg-white mt-1 t-pt-5 t-pb-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-itemsFood-center t-pl-15 t-pr-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-7 t-mb-15 mb-md-0\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list d-flex\"},/*#__PURE__*/React.createElement(\"li\",{className:\"t-list__item no-pagination-style\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary btn-sm\",onClick:function onClick(){return setSearchedWorkPeriod(_objectSpread(_objectSpread({},searchedWorkPeriod),{},{searched:false}));}},_t(t(\"Clear Search\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list d-flex justify-content-md-end align-itemsFood-center\"},/*#__PURE__*/React.createElement(\"li\",{className:\"t-list__item\"},/*#__PURE__*/React.createElement(\"span\",{className:\"d-inline-block sm-text\"}))))))])))));};export default OpeningClosingStockFoodReport;","map":{"version":3,"sources":["/Users/raza/Downloads/khadyo_source_code/client/src/resources/restaurant/auth/reports/OpeningClosingStockFoodReport.js"],"names":["React","useEffect","useContext","useState","axios","BASE_URL","_t","getCookie","pageLoading","paginationLoading","pagination","showingData","searchedShowingData","useTranslation","Helmet","Select","makeAnimated","confirmAlert","toast","Moment","RestaurantContext","FoodContext","NavLink","useParams","OpeningClosingStockFoodReport","workPeriodList","setPaginatedWorkPeriod","dataPaginating","loading","setLoading","getFoodStockReport","itemsFood","setItemsFood","theGroupsFood","t","started_at","user_type","branch_id","uploading","newWorkPeriod","setNewWorkPeriod","list","searched","searchedWorkPeriod","setSearchedWorkPeriod","handleUpdate","e","preventDefault","handleUsage","item","usage","opening","closing","additon","subtraction","opening_stock","closing_stock","parseFloat","addition_to_opening","subtraction_from_opening","length","map","grpItem","grpItemIndex","name","index","parseInt","ingredient_group_id","id","ingredient_name"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext, useState } from \"react\";\r\n\r\n//axios and base url\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../../../../BaseUrl\";\r\n\r\n//functions\r\nimport {\r\n  _t,\r\n  getCookie,\r\n  pageLoading,\r\n  paginationLoading,\r\n  pagination,\r\n  showingData,\r\n  searchedShowingData,\r\n} from \"../../../../functions/Functions\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\n//3rd party packages\r\nimport { Helmet } from \"react-helmet\";\r\nimport Select from \"react-select\";\r\nimport makeAnimated from \"react-select/animated\";\r\nimport { confirmAlert } from \"react-confirm-alert\";\r\nimport \"react-confirm-alert/src/react-confirm-alert.css\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Moment from \"react-moment\";\r\n\r\n//importing context consumer here\r\nimport { RestaurantContext } from \"../../../../contexts/Restaurant\";\r\nimport { FoodContext } from \"../../../../contexts/Food\";\r\nimport { NavLink, useParams } from \"react-router-dom\";\r\nconst OpeningClosingStockFoodReport = () => {\r\n  const {\r\n    //work period\r\n    workPeriodList,\r\n    setPaginatedWorkPeriod,\r\n    dataPaginating,\r\n  } = useContext(RestaurantContext);\r\n\r\n  const {\r\n    loading,\r\n    setLoading,\r\n\r\n    //food stock\r\n    getFoodStockReport,\r\n    itemsFood,\r\n    setItemsFood,\r\n    theGroupsFood,\r\n  } = useContext(FoodContext);\r\n\r\n  const { t } = useTranslation();\r\n  const { started_at } = useParams();\r\n\r\n  //new unit\r\n  let [newWorkPeriod, setNewWorkPeriod] = useState({\r\n    user_type: null,\r\n    branch_id: null,\r\n    uploading: false,\r\n  });\r\n\r\n  //search result\r\n  let [searchedWorkPeriod, setSearchedWorkPeriod] = useState({\r\n    list: null,\r\n    searched: false,\r\n  });\r\n\r\n  //useEffect == componentDidMount\r\n  useEffect(() => {\r\n    getFoodStockReport(started_at);\r\n  }, []);\r\n\r\n  //update stock\r\n  const handleUpdate = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const handleUsage = (item) => {\r\n    let usage = 0;\r\n    let opening = 0;\r\n    let closing = 0;\r\n    let additon = 0;\r\n    let subtraction = 0;\r\n    if (item.opening_stock !== null && item.closing_stock !== null) {\r\n      opening = parseFloat(item.opening_stock);\r\n      closing = parseFloat(item.closing_stock);\r\n    }\r\n    if (item.addition_to_opening !== null) {\r\n      additon = parseFloat(item.addition_to_opening);\r\n    }\r\n    if (item.subtraction_from_opening !== null) {\r\n      subtraction = parseFloat(item.subtraction_from_opening);\r\n    }\r\n\r\n    usage = opening + additon - subtraction - closing;\r\n    return usage;\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{_t(t(\"Food Stock\"))}</title>\r\n      </Helmet>\r\n      <main id=\"main\" data-simplebar>\r\n        <div className=\"container\">\r\n          <div className=\"row t-mt-10 gx-2\">\r\n            <div className=\"col-12 t-mb-30 mb-lg-0\">\r\n              {newWorkPeriod.uploading === true || loading === true ? (\r\n                pageLoading()\r\n              ) : (\r\n                <div className=\"t-bg-white \">\r\n                  {/* next page data spin loading */}\r\n                  <div className={`${dataPaginating && \"loading\"}`}></div>\r\n                  {/* spin loading ends */}\r\n                  <div className=\"row gx-2 align-itemsFood-center t-pt-15 t-pb-15 t-pl-15 t-pr-15 t-shadow\">\r\n                    <div className=\"col-12 t-mb-15\">\r\n                      <ul className=\"t-list fk-breadcrumb\">\r\n                        <li className=\"fk-breadcrumb__list\">\r\n                          <span className=\"t-link fk-breadcrumb__link text-capitalize\">\r\n                            {_t(t(\"Food Stock\"))}\r\n                          </span>\r\n                        </li>\r\n                      </ul>\r\n                    </div>\r\n                    <div className=\"col-md-6 col-lg-5\"></div>\r\n                    <div className=\"col-md-6 col-lg-7 t-mb-15 mb-md-0\">\r\n                      <div className=\"row gx-2 align-itemsFood-center\">\r\n                        <div className=\"col-12 col-md-5 ml-auto mt-2 mt-md-0\">\r\n                          <ul className=\"t-list fk-sort align-itemsFood-center justify-content-center\">\r\n                            <li className=\"fk-sort__list mb-0 flex-grow-1\">\r\n                              <NavLink\r\n                                to=\"/dashboard/food-stock\"\r\n                                className=\"w-100 btn alert-danger sm-text text-uppercase\"\r\n                              >\r\n                                {_t(t(\"Go Back\"))}\r\n                              </NavLink>\r\n                            </li>\r\n                          </ul>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"fk-scroll--order-history\" data-simplebar>\r\n                    <div className=\"t-pl-15 t-pr-15\">\r\n                      <form\r\n                        className=\"table-responsive\"\r\n                        onSubmit={handleUpdate}\r\n                      >\r\n                        <table className=\"table table-bordered table-hover min-table-height mt-4\">\r\n                          <thead className=\"align-middle\">\r\n                            <tr>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"S/L\"))}\r\n                              </th>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Name\"))}\r\n                              </th>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Opening Stock\"))}\r\n                              </th>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Addition\"))}\r\n                              </th>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Subtraction\"))}\r\n                              </th>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Closing Stock\"))}\r\n                              </th>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Usage\"))}\r\n                              </th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody className=\"align-middle\">\r\n                            {!searchedWorkPeriod.searched\r\n                              ? [\r\n                                  itemsFood &&\r\n                                    theGroupsFood && [\r\n                                      itemsFood.length === 0 ? (\r\n                                        <tr className=\"align-middle\">\r\n                                          <td\r\n                                            scope=\"row\"\r\n                                            colSpan=\"8\"\r\n                                            className=\"xsm-text align-middle text-center\"\r\n                                          >\r\n                                            {_t(t(\"No data available\"))}\r\n                                          </td>\r\n                                        </tr>\r\n                                      ) : (\r\n                                        theGroupsFood.map(\r\n                                          (grpItem, grpItemIndex) => {\r\n                                            return (\r\n                                              <>\r\n                                                <tr className=\"align-middle alert-success\">\r\n                                                  <td\r\n                                                    scope=\"row\"\r\n                                                    colSpan=\"8\"\r\n                                                    className=\"xsm-text align-middle text-left ml-5 text-uppercase\"\r\n                                                  >\r\n                                                    {grpItem.name}\r\n                                                  </td>\r\n                                                </tr>\r\n                                                {itemsFood.map(\r\n                                                  (item, index) => {\r\n                                                    if (\r\n                                                      parseInt(\r\n                                                        item.ingredient_group_id\r\n                                                      ) === grpItem.id\r\n                                                    ) {\r\n                                                      return (\r\n                                                        <tr\r\n                                                          className=\"align-middle\"\r\n                                                          key={index}\r\n                                                        >\r\n                                                          <th\r\n                                                            scope=\"row\"\r\n                                                            className=\"xsm-text text-capitalize align-middle text-center\"\r\n                                                          >\r\n                                                            {index + 1}\r\n                                                          </th>\r\n\r\n                                                          <td className=\"xsm-text align-middle text-center text-secondary\">\r\n                                                            {\r\n                                                              item.ingredient_name\r\n                                                            }\r\n                                                          </td>\r\n\r\n                                                          <td className=\"xsm-text align-middle text-center\">\r\n                                                            {item.opening_stock}\r\n                                                          </td>\r\n\r\n                                                          <td className=\"xsm-text align-middle text-center\">\r\n                                                            {item.addition_to_opening ===\r\n                                                            null\r\n                                                              ? 0\r\n                                                              : item.addition_to_opening}\r\n                                                          </td>\r\n\r\n                                                          <td className=\"xsm-text align-middle text-center\">\r\n                                                            {item.subtraction_from_opening ===\r\n                                                            null\r\n                                                              ? 0\r\n                                                              : item.subtraction_from_opening}\r\n                                                          </td>\r\n\r\n                                                          <td className=\"xsm-text align-middle text-center\">\r\n                                                            {item.closing_stock ||\r\n                                                              \"-\"}\r\n                                                          </td>\r\n\r\n                                                          {item.closing_stock !==\r\n                                                          null ? (\r\n                                                            <td className=\"xsm-text align-middle text-center\">\r\n                                                              {handleUsage(\r\n                                                                item\r\n                                                              )}\r\n                                                            </td>\r\n                                                          ) : (\r\n                                                            <td className=\"xsm-text align-middle text-center\">\r\n                                                              -\r\n                                                            </td>\r\n                                                          )}\r\n                                                        </tr>\r\n                                                      );\r\n                                                    } else {\r\n                                                      return false;\r\n                                                    }\r\n                                                  }\r\n                                                )}\r\n                                              </>\r\n                                            );\r\n                                          }\r\n                                        )\r\n                                      ),\r\n                                    ],\r\n                                ]\r\n                              : \"\"}\r\n                          </tbody>\r\n                        </table>\r\n                      </form>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              {/* pagination loading effect */}\r\n              {newWorkPeriod.uploading === true || loading === true\r\n                ? paginationLoading()\r\n                : [\r\n                    // logic === !searched\r\n                    !searchedWorkPeriod.searched ? (\r\n                      <div key=\"fragment4\">\r\n                        <div className=\"t-bg-white mt-1 t-pt-5 t-pb-5\">\r\n                          <div className=\"row align-itemsFood-center t-pl-15 t-pr-15\">\r\n                            <div className=\"col-md-7 t-mb-15 mb-md-0\">\r\n                              {/* pagination function */}\r\n                              {pagination(\r\n                                workPeriodList,\r\n                                setPaginatedWorkPeriod\r\n                              )}\r\n                            </div>\r\n                            <div className=\"col-md-5\">\r\n                              <ul className=\"t-list d-flex justify-content-md-end align-itemsFood-center\">\r\n                                <li className=\"t-list__item\">\r\n                                  <span className=\"d-inline-block sm-text\">\r\n                                    {/* {showingData(workPeriodList)} */}\r\n                                  </span>\r\n                                </li>\r\n                              </ul>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ) : (\r\n                      // if searched\r\n                      <div className=\"t-bg-white mt-1 t-pt-5 t-pb-5\">\r\n                        <div className=\"row align-itemsFood-center t-pl-15 t-pr-15\">\r\n                          <div className=\"col-md-7 t-mb-15 mb-md-0\">\r\n                            <ul className=\"t-list d-flex\">\r\n                              <li className=\"t-list__item no-pagination-style\">\r\n                                <button\r\n                                  className=\"btn btn-primary btn-sm\"\r\n                                  onClick={() =>\r\n                                    setSearchedWorkPeriod({\r\n                                      ...searchedWorkPeriod,\r\n                                      searched: false,\r\n                                    })\r\n                                  }\r\n                                >\r\n                                  {_t(t(\"Clear Search\"))}\r\n                                </button>\r\n                              </li>\r\n                            </ul>\r\n                          </div>\r\n                          <div className=\"col-md-5\">\r\n                            <ul className=\"t-list d-flex justify-content-md-end align-itemsFood-center\">\r\n                              <li className=\"t-list__item\">\r\n                                <span className=\"d-inline-block sm-text\">\r\n                                  {/* {searchedShowingData(\r\n                                    searchedWorkPeriod,\r\n                                    workPeriodForSearch\r\n                                  )} */}\r\n                                </span>\r\n                              </li>\r\n                            </ul>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    ),\r\n                  ]}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OpeningClosingStockFoodReport;\r\n"]},"metadata":{},"sourceType":"module"}