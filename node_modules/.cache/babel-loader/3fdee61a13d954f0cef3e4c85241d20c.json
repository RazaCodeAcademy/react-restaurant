{"ast":null,"code":"var _jsxFileName = \"/Users/raza/Downloads/khadyo_source_code/client/src/resources/common/ForgetPw.js\";\nimport React, { useEffect, useState, useContext } from \"react\";\nimport { NavLink, useHistory } from \"react-router-dom\"; //jQuery initialization\n\nimport $ from \"jquery\"; //functions\n\nimport { _t, getCookie, modalLoading, getSystemSettings } from \"../../functions/Functions\";\nimport { useTranslation } from \"react-i18next\"; //axios and base url\n\nimport axios from \"axios\";\nimport { BASE_URL } from \"../../BaseUrl\"; //3rd party packages\n\nimport { Helmet } from \"react-helmet\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\";\nimport Cookies from \"universal-cookie\"; //context consumer\n\nimport { SettingsContext } from \"../../contexts/Settings\";\nimport { UserContext } from \"../../contexts/User\";\nimport { RestaurantContext } from \"../../contexts/Restaurant\";\nconst cookies = new Cookies();\n\nconst ForgetPw = () => {\n  const {\n    t\n  } = useTranslation();\n  const history = useHistory(); //getting context values here\n\n  let {\n    loading,\n    setLoading,\n    generalSettings\n  } = useContext(SettingsContext);\n  let {\n    authUserInfo\n  } = useContext(UserContext); //state hooks here\n\n  const [credentials, setCredentials] = useState({\n    email: null\n  });\n  useEffect(() => {\n    handleJquery();\n    checkAuth();\n  }, []); //jQuery\n\n  const handleJquery = () => {\n    //obj Image Animation\n    var hoverLayer = $(\"body\");\n    var objImgOne = $(\".fk-global-img__obj\"); //Animation Init\n\n    hoverLayer.mousemove(function (e) {\n      var valueX = e.pageX * -1 / 60;\n      var valueY = e.pageY * -1 / 80;\n\n      if (objImgOne.length) {\n        objImgOne.css({\n          transform: \"translate3d(\" + valueX + \"px,\" + valueY + \"px, 0)\"\n        });\n      }\n    });\n  }; //redirect if logged in\n\n\n  const checkAuth = () => {\n    getCookie() !== undefined && history.replace(\"/dashboard\");\n  }; //set credentials here on input change\n\n\n  const handleCredentials = e => {\n    setCredentials({ ...credentials,\n      [e.target.name]: e.target.value\n    });\n  }; //submit credentials to server to send token to email\n\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n    const url = BASE_URL + \"/auth/resetPassword\";\n    return axios.post(url, credentials).then(res => {\n      if (res.data === \"banned\") {\n        toast.error(`${_t(t(\"Sorry, you are banned!\"))}`, {\n          position: \"bottom-center\",\n          autoClose: 10000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          className: \"text-center toast-notification\"\n        });\n      }\n\n      if (res.data === \"noUser\") {\n        toast.error(`${_t(t(\"Sorry, no user with this email!\"))}`, {\n          position: \"bottom-center\",\n          autoClose: 10000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          className: \"text-center toast-notification\"\n        });\n      }\n\n      if (res.data === \"ok\") {\n        toast.success(`${_t(t(\"A link has been sent to your email, Please check your email to reset your password\"))}`, {\n          position: \"bottom-center\",\n          autoClose: 10000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          className: \"text-center toast-notification\"\n        });\n      }\n\n      if (res.data === \"smtp\") {\n        toast.error(`${_t(t(\"Email configuration needs to be setup by admin to reset password\"))}`, {\n          position: \"bottom-center\",\n          autoClose: 10000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          className: \"text-center toast-notification\"\n        });\n      }\n\n      setLoading(false);\n    }).catch(error => {\n      setLoading(false);\n      toast.error(`${_t(t(\"Please try again!\"))}`, {\n        position: \"bottom-center\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        className: \"text-center toast-notification\"\n      });\n    });\n  };\n\n  const style = {\n    logo: {\n      backgroundColor: \"none\",\n      // generalSettings &&\n      // getSystemSettings(generalSettings, \"type_background\"),\n      backgroundImage: generalSettings && `url(${getSystemSettings(generalSettings, \"type_logo\")})`\n    }\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Helmet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  }, _t(t(\"Reset Password\")))), /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fk-global-access\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-none d-lg-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fk-global-img text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/assets/img/verifiy-img.png\",\n    alt: \"khadyo\",\n    className: \"img-fluid mx-auto fk-global-img__is\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/assets/img/obj-1.png\",\n    alt: \"khadyo\",\n    className: \"img-fluid fk-global-img__obj fk-global-img__obj-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/assets/img/obj-8.png\",\n    alt: \"khadyo\",\n    className: \"img-fluid fk-global-img__obj fk-global-img__obj-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/assets/img/obj-7.png\",\n    alt: \"khadyo\",\n    className: \"img-fluid fk-global-img__obj fk-global-img__obj-6\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    src: \"/assets/img/obj-9.png\",\n    alt: \"khadyo\",\n    className: \"img-fluid fk-global-img__obj fk-global-img__obj-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container my-md-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fk-brand fk-brand--sr-lg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 15\n    }\n  }, window.location.pathname === \"/\" ? /*#__PURE__*/React.createElement(NavLink, {\n    to: {\n      pathname: \"/refresh\",\n      state: \"/\"\n    },\n    exact: true,\n    className: \"t-link w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"fk-brand__img fk-brand__img--fk\",\n    style: style.logo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 21\n    }\n  })) : /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/\",\n    className: \"t-link w-100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"fk-brand__img fk-brand__img--fk\",\n    style: style.logo,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 21\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-8 col-lg-6 col-xl-4 t-mt-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fk-global-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 17\n    }\n  }, loading ? /*#__PURE__*/React.createElement(\"div\", {\n    key: \"login-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"mt-0 text-capitalize font-weight-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 23\n    }\n  }, _t(t(\"Generating link\"))), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 25\n    }\n  }, modalLoading(3), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"t-mr-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-primary sm-text text-uppercase\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 33\n    }\n  }, _t(t(\"Please wait\"))))))))) : /*#__PURE__*/React.createElement(\"div\", {\n    key: \"loading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"mt-0 text-capitalize font-weight-bold\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 23\n    }\n  }, _t(t(\"reset password\"))), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 t-mb-15\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    onChange: handleCredentials,\n    type: \"email\",\n    name: \"email\",\n    placeholder: \"Enter your email\",\n    value: credentials.email,\n    required: true,\n    className: \"form-control border-0 rounded-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"d-flex align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"t-mr-8\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-success sm-text text-uppercase\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 33\n    }\n  }, _t(t(\"Reset Password\")))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"t-mr-8 ml-auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/login\",\n    className: \"btn btn-primary sm-text text-uppercase\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 33\n    }\n  }, _t(t(\"Sign in\"))))))))))))))));\n};\n\nexport default ForgetPw;","map":{"version":3,"sources":["/Users/raza/Downloads/khadyo_source_code/client/src/resources/common/ForgetPw.js"],"names":["React","useEffect","useState","useContext","NavLink","useHistory","$","_t","getCookie","modalLoading","getSystemSettings","useTranslation","axios","BASE_URL","Helmet","toast","Cookies","SettingsContext","UserContext","RestaurantContext","cookies","ForgetPw","t","history","loading","setLoading","generalSettings","authUserInfo","credentials","setCredentials","email","handleJquery","checkAuth","hoverLayer","objImgOne","mousemove","e","valueX","pageX","valueY","pageY","length","css","transform","undefined","replace","handleCredentials","target","name","value","handleSubmit","preventDefault","url","post","then","res","data","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","className","success","catch","style","logo","backgroundColor","backgroundImage","window","location","pathname","state"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\n\r\n//jQuery initialization\r\nimport $ from \"jquery\";\r\n\r\n//functions\r\nimport {\r\n  _t,\r\n  getCookie,\r\n  modalLoading,\r\n  getSystemSettings,\r\n} from \"../../functions/Functions\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\n//axios and base url\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../../BaseUrl\";\r\n\r\n//3rd party packages\r\nimport { Helmet } from \"react-helmet\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Cookies from \"universal-cookie\";\r\n\r\n//context consumer\r\nimport { SettingsContext } from \"../../contexts/Settings\";\r\nimport { UserContext } from \"../../contexts/User\";\r\nimport { RestaurantContext } from \"../../contexts/Restaurant\";\r\n\r\nconst cookies = new Cookies();\r\n\r\nconst ForgetPw = () => {\r\n  const { t } = useTranslation();\r\n  const history = useHistory();\r\n\r\n  //getting context values here\r\n  let { loading, setLoading, generalSettings } = useContext(SettingsContext);\r\n  let { authUserInfo } = useContext(UserContext);\r\n\r\n  //state hooks here\r\n  const [credentials, setCredentials] = useState({\r\n    email: null,\r\n  });\r\n\r\n  useEffect(() => {\r\n    handleJquery();\r\n    checkAuth();\r\n  }, []);\r\n\r\n  //jQuery\r\n  const handleJquery = () => {\r\n    //obj Image Animation\r\n    var hoverLayer = $(\"body\");\r\n    var objImgOne = $(\".fk-global-img__obj\");\r\n\r\n    //Animation Init\r\n    hoverLayer.mousemove(function (e) {\r\n      var valueX = (e.pageX * -1) / 60;\r\n      var valueY = (e.pageY * -1) / 80;\r\n      if (objImgOne.length) {\r\n        objImgOne.css({\r\n          transform: \"translate3d(\" + valueX + \"px,\" + valueY + \"px, 0)\",\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  //redirect if logged in\r\n  const checkAuth = () => {\r\n    getCookie() !== undefined && history.replace(\"/dashboard\");\r\n  };\r\n\r\n  //set credentials here on input change\r\n  const handleCredentials = (e) => {\r\n    setCredentials({\r\n      ...credentials,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  //submit credentials to server to send token to email\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    const url = BASE_URL + \"/auth/resetPassword\";\r\n    return axios\r\n      .post(url, credentials)\r\n      .then((res) => {\r\n        if (res.data === \"banned\") {\r\n          toast.error(`${_t(t(\"Sorry, you are banned!\"))}`, {\r\n            position: \"bottom-center\",\r\n            autoClose: 10000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            className: \"text-center toast-notification\",\r\n          });\r\n        }\r\n        if (res.data === \"noUser\") {\r\n          toast.error(`${_t(t(\"Sorry, no user with this email!\"))}`, {\r\n            position: \"bottom-center\",\r\n            autoClose: 10000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            className: \"text-center toast-notification\",\r\n          });\r\n        }\r\n        if (res.data === \"ok\") {\r\n          toast.success(\r\n            `${_t(\r\n              t(\r\n                \"A link has been sent to your email, Please check your email to reset your password\"\r\n              )\r\n            )}`,\r\n            {\r\n              position: \"bottom-center\",\r\n              autoClose: 10000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              className: \"text-center toast-notification\",\r\n            }\r\n          );\r\n        }\r\n        if (res.data === \"smtp\") {\r\n          toast.error(\r\n            `${_t(\r\n              t(\r\n                \"Email configuration needs to be setup by admin to reset password\"\r\n              )\r\n            )}`,\r\n            {\r\n              position: \"bottom-center\",\r\n              autoClose: 10000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              className: \"text-center toast-notification\",\r\n            }\r\n          );\r\n        }\r\n        setLoading(false);\r\n      })\r\n      .catch((error) => {\r\n        setLoading(false);\r\n        toast.error(`${_t(t(\"Please try again!\"))}`, {\r\n          position: \"bottom-center\",\r\n          autoClose: 10000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          className: \"text-center toast-notification\",\r\n        });\r\n      });\r\n  };\r\n\r\n  const style = {\r\n    logo: {\r\n      backgroundColor: \"none\",\r\n      // generalSettings &&\r\n      // getSystemSettings(generalSettings, \"type_background\"),\r\n      backgroundImage:\r\n        generalSettings &&\r\n        `url(${getSystemSettings(generalSettings, \"type_logo\")})`,\r\n    },\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{_t(t(\"Reset Password\"))}</title>\r\n      </Helmet>\r\n      <main>\r\n        <div className=\"fk-global-access\">\r\n          <div className=\"d-none d-lg-block\">\r\n            <div className=\"fk-global-img text-center\">\r\n              <img\r\n                src=\"/assets/img/verifiy-img.png\"\r\n                alt=\"khadyo\"\r\n                className=\"img-fluid mx-auto fk-global-img__is\"\r\n              />\r\n              <img\r\n                src=\"/assets/img/obj-1.png\"\r\n                alt=\"khadyo\"\r\n                className=\"img-fluid fk-global-img__obj fk-global-img__obj-1\"\r\n              />\r\n              <img\r\n                src=\"/assets/img/obj-8.png\"\r\n                alt=\"khadyo\"\r\n                className=\"img-fluid fk-global-img__obj fk-global-img__obj-2\"\r\n              />\r\n              <img\r\n                src=\"/assets/img/obj-7.png\"\r\n                alt=\"khadyo\"\r\n                className=\"img-fluid fk-global-img__obj fk-global-img__obj-6\"\r\n              />\r\n              <img\r\n                src=\"/assets/img/obj-9.png\"\r\n                alt=\"khadyo\"\r\n                className=\"img-fluid fk-global-img__obj fk-global-img__obj-8\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"container my-md-auto\">\r\n            <div className=\"row\">\r\n              <div className=\"fk-brand fk-brand--sr-lg\">\r\n                {window.location.pathname === \"/\" ? (\r\n                  <NavLink\r\n                    to={{ pathname: \"/refresh\", state: \"/\" }}\r\n                    exact\r\n                    className=\"t-link w-100\"\r\n                  >\r\n                    <span\r\n                      className=\"fk-brand__img fk-brand__img--fk\"\r\n                      style={style.logo}\r\n                    ></span>\r\n                  </NavLink>\r\n                ) : (\r\n                  <NavLink to=\"/\" className=\"t-link w-100\">\r\n                    <span\r\n                      className=\"fk-brand__img fk-brand__img--fk\"\r\n                      style={style.logo}\r\n                    ></span>\r\n                  </NavLink>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-8 col-lg-6 col-xl-4 t-mt-50\">\r\n                <div className=\"fk-global-form\">\r\n                  {loading ? (\r\n                    <div key=\"login-form\">\r\n                      <h3 className=\"mt-0 text-capitalize font-weight-bold\">\r\n                        {_t(t(\"Generating link\"))}\r\n                      </h3>\r\n                      <form onSubmit={handleSubmit}>\r\n                        <div className=\"row\">\r\n                          {modalLoading(3)}\r\n                          <div className=\"col-12\">\r\n                            <div className=\"d-flex align-items-center\">\r\n                              <div className=\"t-mr-8\">\r\n                                <button\r\n                                  type=\"button\"\r\n                                  className=\"btn btn-primary sm-text text-uppercase\"\r\n                                >\r\n                                  {_t(t(\"Please wait\"))}\r\n                                </button>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </form>\r\n                    </div>\r\n                  ) : (\r\n                    <div key=\"loading\">\r\n                      <h3 className=\"mt-0 text-capitalize font-weight-bold\">\r\n                        {_t(t(\"reset password\"))}\r\n                      </h3>\r\n                      <form onSubmit={handleSubmit}>\r\n                        <div className=\"row\">\r\n                          <div className=\"col-12 t-mb-15\">\r\n                            <input\r\n                              onChange={handleCredentials}\r\n                              type=\"email\"\r\n                              name=\"email\"\r\n                              placeholder=\"Enter your email\"\r\n                              value={credentials.email}\r\n                              required\r\n                              className=\"form-control border-0 rounded-1\"\r\n                            />\r\n                          </div>\r\n\r\n                          <div className=\"col-12\">\r\n                            <div className=\"d-flex align-items-center\">\r\n                              <div className=\"t-mr-8\">\r\n                                <button\r\n                                  type=\"submit\"\r\n                                  className=\"btn btn-success sm-text text-uppercase\"\r\n                                >\r\n                                  {_t(t(\"Reset Password\"))}\r\n                                </button>\r\n                              </div>\r\n                              <div className=\"t-mr-8 ml-auto\">\r\n                                <NavLink\r\n                                  to=\"/login\"\r\n                                  className=\"btn btn-primary sm-text text-uppercase\"\r\n                                >\r\n                                  {_t(t(\"Sign in\"))}\r\n                                </NavLink>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </form>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ForgetPw;\r\n"]},"metadata":{},"sourceType":"module"}