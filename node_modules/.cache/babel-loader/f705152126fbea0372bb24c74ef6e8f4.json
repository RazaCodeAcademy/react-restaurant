{"ast":null,"code":"import _defineProperty from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useContext}from\"react\";import{NavLink,useHistory}from\"react-router-dom\";//jQuery initialization\nimport $ from\"jquery\";//functions\nimport{_t,getCookie,modalLoading,getSystemSettings}from\"../../functions/Functions\";import{useTranslation}from\"react-i18next\";//axios and base url\nimport axios from\"axios\";import{BASE_URL}from\"../../BaseUrl\";//3rd party packages\nimport{Helmet}from\"react-helmet\";import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import Cookies from\"universal-cookie\";//context consumer\nimport{SettingsContext}from\"../../contexts/Settings\";import{UserContext}from\"../../contexts/User\";import{RestaurantContext}from\"../../contexts/Restaurant\";import{FoodContext}from\"../../contexts/Food\";var cookies=new Cookies();var Login=function Login(){var _useTranslation=useTranslation(),t=_useTranslation.t;var history=useHistory();//getting context values here\nvar _useContext=useContext(SettingsContext),loading=_useContext.loading,setLoading=_useContext.setLoading,generalSettings=_useContext.generalSettings,getSmtp=_useContext.getSmtp,getPermissionGroups=_useContext.getPermissionGroups,getLanguages=_useContext.getLanguages,getCurrency=_useContext.getCurrency,getSettings=_useContext.getSettings;var _useContext2=useContext(UserContext),getAuthUser=_useContext2.getAuthUser,authUserInfo=_useContext2.authUserInfo,getCustomer=_useContext2.getCustomer,getWaiter=_useContext2.getWaiter,getAdminStaff=_useContext2.getAdminStaff;var _useContext3=useContext(RestaurantContext),getBranch=_useContext3.getBranch,getTable=_useContext3.getTable,getDeptTag=_useContext3.getDeptTag,getPaymentType=_useContext3.getPaymentType,getWorkPeriod=_useContext3.getWorkPeriod,getDeliveryPendingOrders=_useContext3.getDeliveryPendingOrders,getDeliveryDeliveredOrders=_useContext3.getDeliveryDeliveredOrders;var _useContext4=useContext(FoodContext),getFood=_useContext4.getFood,getFoodGroup=_useContext4.getFoodGroup,getPropertyGroup=_useContext4.getPropertyGroup,getVariation=_useContext4.getVariation;//state hooks here\nvar _useState=useState({email:null,password:null,remember_me:false,install_check_reload:true,install_no:false}),_useState2=_slicedToArray(_useState,2),credentials=_useState2[0],setCredentials=_useState2[1];// install check\nvar checkInstall=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=BASE_URL+\"/check-install\";_context.next=3;return axios.get(url);case 3:result=_context.sent;return _context.abrupt(\"return\",result.data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function checkInstall(){return _ref.apply(this,arguments);};}();useEffect(function(){setLoading(false);var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return checkInstall();case 2:result=_context2.sent;if(result===\"YES\"){getSettings();handleJquery();checkAuth();setCredentials(_objectSpread(_objectSpread({},credentials),{},{install_no:false,install_check_reload:false}));}else{setCredentials(_objectSpread(_objectSpread({},credentials),{},{install_no:true,install_check_reload:false}));handleJquery();checkAuth();}case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchData(){return _ref2.apply(this,arguments);};}();fetchData();},[]);//jQuery\nvar handleJquery=function handleJquery(){//obj Image Animation\nvar hoverLayer=$(\"body\");var objImgOne=$(\".fk-global-img__obj\");//Animation Init\nhoverLayer.mousemove(function(e){var valueX=e.pageX*-1/60;var valueY=e.pageY*-1/80;if(objImgOne.length){objImgOne.css({transform:\"translate3d(\"+valueX+\"px,\"+valueY+\"px, 0)\"});}});};//redirect if logged in\nvar checkAuth=function checkAuth(){getCookie()!==undefined&&history.replace(\"/dashboard\");};//set credentials here on input change\nvar handleCredentials=function handleCredentials(e){var _objectSpread2;setCredentials(_objectSpread(_objectSpread({},credentials),{},(_objectSpread2={},_defineProperty(_objectSpread2,e.target.name,e.target.value),_defineProperty(_objectSpread2,\"remember_me\",!credentials.remember_me),_objectSpread2)));};//try for login, submit credentials to server\nvar handleSubmit=function handleSubmit(e){e.preventDefault();setLoading(true);var url=BASE_URL+\"/auth/login\";return axios.post(url,credentials).then(function(res){if(res.data[2]===0||res.data[2]===\"0\"){var access_token={_user:res.data[0].access_token.slice(0,8),sbb:res.data[0].access_token.slice(8,10),frr:res.data[0].access_token.slice(10,13),xss:res.data[0].access_token.slice(13)};var date=new Date();date.setFullYear(date.getFullYear()+1);cookies.set(\"_user\",access_token._user,{path:\"/\",expires:date,sameSite:\"lax\"});cookies.set(\"sbb\",access_token.sbb,{path:\"/\",expires:date,sameSite:\"lax\"});cookies.set(\"frr\",access_token.frr,{path:\"/\",expires:date,sameSite:\"lax\"});cookies.set(\"xss\",access_token.xss,{path:\"/\",expires:date,sameSite:\"lax\"});// todo:: get data if have permission here after authentication\n//common\ngetAuthUser();getPermissionGroups();getBranch();getLanguages();getCurrency();//permission based -data[3] permissions of this user\nif(res.data[3]!==null&&res.data[3].includes(\"Manage\")){getSmtp();}if(res.data[3]!==null){if(res.data[3].includes(\"Customer\")||res.data[3].includes(\"POS\")){getAdminStaff();getWorkPeriod();getCustomer();getTable();getWaiter();getDeptTag();getPaymentType();getFood();getFoodGroup();getPropertyGroup();getVariation();}if(res.data[3].includes(\"Delivery\")){getDeliveryPendingOrders();getDeliveryDeliveredOrders();}}if(res.data[1].user_type===\"customer\"){history.push(\"/\");}else{history.push(\"/dashboard\");}}else{setLoading(false);toast.error(\"\".concat(_t(t(\"Sorry, you do not have access!\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}}).catch(function(error){setLoading(false);toast.error(\"\".concat(_t(t(\"Email or password is wrong!\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});});};var style={logo:{backgroundColor:\"none\",// generalSettings &&\n// getSystemSettings(generalSettings, \"type_background\"),\nbackgroundImage:generalSettings&&\"url(\".concat(getSystemSettings(generalSettings,\"type_logo\"),\")\")}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Helmet,null,/*#__PURE__*/React.createElement(\"title\",null,_t(t(\"Sign In\")))),/*#__PURE__*/React.createElement(\"main\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"fk-global-access\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-none d-lg-block\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fk-global-img text-center\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/img/sign-in.png\",alt:\"khadyo\",className:\"img-fluid mx-auto fk-global-img__is\"}),/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/img/obj-1.png\",alt:\"khadyo\",className:\"img-fluid fk-global-img__obj fk-global-img__obj-1\"}),/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/img/obj-8.png\",alt:\"khadyo\",className:\"img-fluid fk-global-img__obj fk-global-img__obj-2\"}),/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/img/obj-7.png\",alt:\"khadyo\",className:\"img-fluid fk-global-img__obj fk-global-img__obj-6\"}),/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/img/obj-9.png\",alt:\"khadyo\",className:\"img-fluid fk-global-img__obj fk-global-img__obj-8\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"container my-md-auto\"},credentials.install_no?/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fk-brand fk-brand--sr-lg\"},window.location.pathname===\"/\"?/*#__PURE__*/React.createElement(NavLink,{to:{pathname:\"/refresh\",state:\"/\"},exact:true,className:\"t-link w-100\"},/*#__PURE__*/React.createElement(\"span\",{className:\"fk-brand__img fk-brand__img--fk login-page-background\"})):/*#__PURE__*/React.createElement(NavLink,{to:\"/\",className:\"t-link w-100\"},/*#__PURE__*/React.createElement(\"span\",{className:\"fk-brand__img fk-brand__img--fk login-page-background\"}))))):/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fk-brand fk-brand--sr-lg\"},window.location.pathname===\"/\"?/*#__PURE__*/React.createElement(NavLink,{to:{pathname:\"/refresh\",state:\"/\"},exact:true,className:\"t-link w-100\"},/*#__PURE__*/React.createElement(\"span\",{className:\"fk-brand__img fk-brand__img--fk\",style:style.logo})):/*#__PURE__*/React.createElement(NavLink,{to:\"/\",className:\"t-link w-100\"},/*#__PURE__*/React.createElement(\"span\",{className:\"fk-brand__img fk-brand__img--fk\",style:style.logo}))))),credentials.install_no?/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 col-lg-6 col-xl-4 t-mt-50\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fk-global-form\"},/*#__PURE__*/React.createElement(\"div\",{key:\"login-form\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"mt-0 text-capitalize font-weight-bold\"},_t(t(\"Not Installed\"))),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",null,\"Your application is not ready to use, Install to continue. Follow our documentation to get installation guide.\"),/*#__PURE__*/React.createElement(\"div\",{className:\"row mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"t-mr-8\"},/*#__PURE__*/React.createElement(NavLink,{to:\"/installation\",className:\"btn btn-primary sm-text text-uppercase\"},_t(t(\"Install\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"t-mr-8\"},/*#__PURE__*/React.createElement(\"a\",{href:\"http://docs.khadyo.com\",target:\"_blank\",rel:\"noopener noreferrer\",className:\"btn btn-info sm-text text-uppercase\"},_t(t(\"Online Documentation\")))))))))))):/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 col-lg-6 col-xl-4 t-mt-50\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fk-global-form\"},loading?/*#__PURE__*/React.createElement(\"div\",{key:\"login-form\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"mt-0 text-capitalize font-weight-bold\"},_t(t(\"waiting for response\"))),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},modalLoading(3),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"t-mr-8\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-primary sm-text text-uppercase\"},_t(t(\"Please wait\"))))))))):/*#__PURE__*/React.createElement(\"div\",{key:\"loading\"},!credentials.install_check_reload?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"h3\",{className:\"mt-0 text-capitalize font-weight-bold\"},_t(t(\"sign in\"))),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-2 t-mb-15 d-none\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-1\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card p-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 text-center sm-text\"},\"Demo login credentials\",/*#__PURE__*/React.createElement(\"div\",{className:\"text-primary\"},\"This password section is only for demo\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 mb-1 pointer-cursor\",onClick:function onClick(){setCredentials(_objectSpread(_objectSpread({},credentials),{},{email:\"admin@mail.com\",password:\"khadyo@123\"}));}},/*#__PURE__*/React.createElement(\"div\",{className:\"card p-2 \"},/*#__PURE__*/React.createElement(\"div\",{className:\"row d-flex align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-5\"},\"Admin: admin@mail.com\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-4\"},\"password: khadyo@123\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-3 text-right\"},/*#__PURE__*/React.createElement(\"span\",{className:\"btn btn-sm btn-primary\"},\"copy\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 pointer-cursor\",onClick:function onClick(){setCredentials(_objectSpread(_objectSpread({},credentials),{},{email:\"staff@mail.com\",password:\"khadyo@123\"}));}},/*#__PURE__*/React.createElement(\"div\",{className:\"card p-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row d-flex align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-5\"},\"Staff: staff@mail.com\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-4\"},\"password: khadyo@123\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-3 text-right\"},/*#__PURE__*/React.createElement(\"span\",{className:\"btn btn-sm btn-primary\"},\"copy\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 pointer-cursor\",onClick:function onClick(){setCredentials(_objectSpread(_objectSpread({},credentials),{},{email:\"customer@mail.com\",password:\"khadyo@123\"}));}},/*#__PURE__*/React.createElement(\"div\",{className:\"card p-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row d-flex align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-5\"},\"Customer: customer@mail.com\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-4\"},\"password: khadyo@123\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-3 text-right\"},/*#__PURE__*/React.createElement(\"span\",{className:\"btn btn-sm btn-primary\"},\"copy\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 pointer-cursor\",onClick:function onClick(){setCredentials(_objectSpread(_objectSpread({},credentials),{},{email:\"deliverymanager@mail.com\",password:\"khadyo@123\"}));}},/*#__PURE__*/React.createElement(\"div\",{className:\"card p-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row d-flex align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-5\"},\"Deliveryman: deliverymanager@mail.com\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-4\"},\"password: khadyo@123\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-3 text-right\"},/*#__PURE__*/React.createElement(\"span\",{className:\"btn btn-sm btn-primary\"},\"copy\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 t-mb-15\"},/*#__PURE__*/React.createElement(\"input\",{onChange:handleCredentials,type:\"email\",name:\"email\",placeholder:\"Email\",value:credentials.email,required:true,autoComplete:\"off\",className:\"form-control border-0 rounded-1\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 t-mb-15\"},/*#__PURE__*/React.createElement(\"input\",{onChange:handleCredentials,name:\"password\",type:\"password\",placeholder:\"Password\",value:credentials.password,required:true,autoComplete:\"off\",className:\"form-control border-0 rounded-1\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 t-mb-15\"},/*#__PURE__*/React.createElement(\"label\",{className:\"mx-checkbox\"},/*#__PURE__*/React.createElement(\"input\",{onChange:handleCredentials,name:\"remember_me\",type:\"checkbox\",className:\"mx-checkbox__input mx-checkbox__input-solid mx-checkbox__input-solid--danger mx-checkbox__input-sm mt-0-kitchen\"}),/*#__PURE__*/React.createElement(\"span\",{className:\"mx-checkbox__text text-capitalize t-text-heading t-ml-8\"},_t(t(\"Remember Me\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-6 t-mb-15 text-right\"},/*#__PURE__*/React.createElement(NavLink,{to:\"/reset-password\",className:\"t-link sm-text\"},_t(t(\"Forgot password\")),\"?\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"t-mr-8\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-success sm-text text-uppercase\"},_t(t(\"sign in\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"t-mr-8\"},/*#__PURE__*/React.createElement(NavLink,{to:\"/sign-up\",className:\"btn btn-primary sm-text text-uppercase\"},_t(t(\"Sign Up\"))))))))):modalLoading(5)))))))));};export default Login;","map":{"version":3,"sources":["/Users/raza/Downloads/khadyo_source_code/client/src/resources/common/Login.js"],"names":["React","useEffect","useState","useContext","NavLink","useHistory","$","_t","getCookie","modalLoading","getSystemSettings","useTranslation","axios","BASE_URL","Helmet","toast","Cookies","SettingsContext","UserContext","RestaurantContext","FoodContext","cookies","Login","t","history","loading","setLoading","generalSettings","getSmtp","getPermissionGroups","getLanguages","getCurrency","getSettings","getAuthUser","authUserInfo","getCustomer","getWaiter","getAdminStaff","getBranch","getTable","getDeptTag","getPaymentType","getWorkPeriod","getDeliveryPendingOrders","getDeliveryDeliveredOrders","getFood","getFoodGroup","getPropertyGroup","getVariation","email","password","remember_me","install_check_reload","install_no","credentials","setCredentials","checkInstall","url","get","result","data","fetchData","handleJquery","checkAuth","hoverLayer","objImgOne","mousemove","e","valueX","pageX","valueY","pageY","length","css","transform","undefined","replace","handleCredentials","target","name","value","handleSubmit","preventDefault","post","then","res","access_token","_user","slice","sbb","frr","xss","date","Date","setFullYear","getFullYear","set","path","expires","sameSite","includes","user_type","push","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","className","catch","style","logo","backgroundColor","backgroundImage","window","location","pathname","state"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\n\r\n//jQuery initialization\r\nimport $ from \"jquery\";\r\n\r\n//functions\r\nimport {\r\n  _t,\r\n  getCookie,\r\n  modalLoading,\r\n  getSystemSettings,\r\n} from \"../../functions/Functions\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\n//axios and base url\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../../BaseUrl\";\r\n\r\n//3rd party packages\r\nimport { Helmet } from \"react-helmet\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Cookies from \"universal-cookie\";\r\n\r\n//context consumer\r\nimport { SettingsContext } from \"../../contexts/Settings\";\r\nimport { UserContext } from \"../../contexts/User\";\r\nimport { RestaurantContext } from \"../../contexts/Restaurant\";\r\nimport { FoodContext } from \"../../contexts/Food\";\r\n\r\nconst cookies = new Cookies();\r\n\r\nconst Login = () => {\r\n  const { t } = useTranslation();\r\n  const history = useHistory();\r\n\r\n  //getting context values here\r\n  let {\r\n    loading,\r\n    setLoading,\r\n    generalSettings,\r\n    getSmtp,\r\n    getPermissionGroups,\r\n    getLanguages,\r\n    getCurrency,\r\n    getSettings,\r\n  } = useContext(SettingsContext);\r\n  let {\r\n    getAuthUser,\r\n    authUserInfo,\r\n    getCustomer,\r\n    getWaiter,\r\n    getAdminStaff,\r\n  } = useContext(UserContext);\r\n  let {\r\n    getBranch,\r\n    getTable,\r\n    getDeptTag,\r\n    getPaymentType,\r\n    getWorkPeriod,\r\n    getDeliveryPendingOrders,\r\n    getDeliveryDeliveredOrders,\r\n  } = useContext(RestaurantContext);\r\n\r\n  let { getFood, getFoodGroup, getPropertyGroup, getVariation } = useContext(\r\n    FoodContext\r\n  );\r\n\r\n  //state hooks here\r\n  const [credentials, setCredentials] = useState({\r\n    email: null,\r\n    password: null,\r\n    remember_me: false,\r\n    install_check_reload: true,\r\n    install_no: false,\r\n  });\r\n\r\n  // install check\r\n  const checkInstall = async () => {\r\n    const url = BASE_URL + \"/check-install\";\r\n    let result = await axios.get(url);\r\n    return result.data;\r\n  };\r\n\r\n  useEffect(() => {\r\n    setLoading(false);\r\n    const fetchData = async () => {\r\n      let result = await checkInstall();\r\n      if (result === \"YES\") {\r\n        getSettings();\r\n        handleJquery();\r\n        checkAuth();\r\n        setCredentials({\r\n          ...credentials,\r\n          install_no: false,\r\n          install_check_reload: false,\r\n        });\r\n      } else {\r\n        setCredentials({\r\n          ...credentials,\r\n          install_no: true,\r\n          install_check_reload: false,\r\n        });\r\n        handleJquery();\r\n        checkAuth();\r\n      }\r\n    };\r\n    fetchData();\r\n  }, []);\r\n\r\n  //jQuery\r\n  const handleJquery = () => {\r\n    //obj Image Animation\r\n    var hoverLayer = $(\"body\");\r\n    var objImgOne = $(\".fk-global-img__obj\");\r\n\r\n    //Animation Init\r\n    hoverLayer.mousemove(function (e) {\r\n      var valueX = (e.pageX * -1) / 60;\r\n      var valueY = (e.pageY * -1) / 80;\r\n      if (objImgOne.length) {\r\n        objImgOne.css({\r\n          transform: \"translate3d(\" + valueX + \"px,\" + valueY + \"px, 0)\",\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  //redirect if logged in\r\n  const checkAuth = () => {\r\n    getCookie() !== undefined && history.replace(\"/dashboard\");\r\n  };\r\n\r\n  //set credentials here on input change\r\n  const handleCredentials = (e) => {\r\n    setCredentials({\r\n      ...credentials,\r\n      [e.target.name]: e.target.value,\r\n      remember_me: !credentials.remember_me,\r\n    });\r\n  };\r\n\r\n  //try for login, submit credentials to server\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    const url = BASE_URL + \"/auth/login\";\r\n    return axios\r\n      .post(url, credentials)\r\n      .then((res) => {\r\n        if (res.data[2] === 0 || res.data[2] === \"0\") {\r\n          let access_token = {\r\n            _user: res.data[0].access_token.slice(0, 8),\r\n            sbb: res.data[0].access_token.slice(8, 10),\r\n            frr: res.data[0].access_token.slice(10, 13),\r\n            xss: res.data[0].access_token.slice(13),\r\n          };\r\n          let date = new Date();\r\n          date.setFullYear(date.getFullYear() + 1);\r\n          cookies.set(\"_user\", access_token._user, {\r\n            path: \"/\",\r\n            expires: date,\r\n            sameSite: \"lax\",\r\n          });\r\n          cookies.set(\"sbb\", access_token.sbb, {\r\n            path: \"/\",\r\n            expires: date,\r\n            sameSite: \"lax\",\r\n          });\r\n          cookies.set(\"frr\", access_token.frr, {\r\n            path: \"/\",\r\n            expires: date,\r\n            sameSite: \"lax\",\r\n          });\r\n          cookies.set(\"xss\", access_token.xss, {\r\n            path: \"/\",\r\n            expires: date,\r\n            sameSite: \"lax\",\r\n          });\r\n          // todo:: get data if have permission here after authentication\r\n          //common\r\n          getAuthUser();\r\n          getPermissionGroups();\r\n          getBranch();\r\n          getLanguages();\r\n          getCurrency();\r\n\r\n          //permission based -data[3] permissions of this user\r\n          if (res.data[3] !== null && res.data[3].includes(\"Manage\")) {\r\n            getSmtp();\r\n          }\r\n          if (res.data[3] !== null) {\r\n            if (\r\n              res.data[3].includes(\"Customer\") ||\r\n              res.data[3].includes(\"POS\")\r\n            ) {\r\n              getAdminStaff();\r\n              getWorkPeriod();\r\n              getCustomer();\r\n              getTable();\r\n              getWaiter();\r\n              getDeptTag();\r\n              getPaymentType();\r\n              getFood();\r\n              getFoodGroup();\r\n              getPropertyGroup();\r\n              getVariation();\r\n            }\r\n            if (res.data[3].includes(\"Delivery\")) {\r\n              getDeliveryPendingOrders();\r\n\r\n              getDeliveryDeliveredOrders();\r\n            }\r\n          }\r\n          if (res.data[1].user_type === \"customer\") {\r\n            history.push(\"/\");\r\n          } else {\r\n            history.push(\"/dashboard\");\r\n          }\r\n        } else {\r\n          setLoading(false);\r\n          toast.error(`${_t(t(\"Sorry, you do not have access!\"))}`, {\r\n            position: \"bottom-center\",\r\n            autoClose: 10000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            className: \"text-center toast-notification\",\r\n          });\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        setLoading(false);\r\n        toast.error(`${_t(t(\"Email or password is wrong!\"))}`, {\r\n          position: \"bottom-center\",\r\n          autoClose: 10000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          className: \"text-center toast-notification\",\r\n        });\r\n      });\r\n  };\r\n\r\n  const style = {\r\n    logo: {\r\n      backgroundColor: \"none\",\r\n      // generalSettings &&\r\n      // getSystemSettings(generalSettings, \"type_background\"),\r\n      backgroundImage:\r\n        generalSettings &&\r\n        `url(${getSystemSettings(generalSettings, \"type_logo\")})`,\r\n    },\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{_t(t(\"Sign In\"))}</title>\r\n      </Helmet>\r\n      <main>\r\n        <div className=\"fk-global-access\">\r\n          <div className=\"d-none d-lg-block\">\r\n            <div className=\"fk-global-img text-center\">\r\n              <img\r\n                src=\"/assets/img/sign-in.png\"\r\n                alt=\"khadyo\"\r\n                className=\"img-fluid mx-auto fk-global-img__is\"\r\n              />\r\n              <img\r\n                src=\"/assets/img/obj-1.png\"\r\n                alt=\"khadyo\"\r\n                className=\"img-fluid fk-global-img__obj fk-global-img__obj-1\"\r\n              />\r\n              <img\r\n                src=\"/assets/img/obj-8.png\"\r\n                alt=\"khadyo\"\r\n                className=\"img-fluid fk-global-img__obj fk-global-img__obj-2\"\r\n              />\r\n              <img\r\n                src=\"/assets/img/obj-7.png\"\r\n                alt=\"khadyo\"\r\n                className=\"img-fluid fk-global-img__obj fk-global-img__obj-6\"\r\n              />\r\n              <img\r\n                src=\"/assets/img/obj-9.png\"\r\n                alt=\"khadyo\"\r\n                className=\"img-fluid fk-global-img__obj fk-global-img__obj-8\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"container my-md-auto\">\r\n            {credentials.install_no ? (\r\n              <div className=\"row\">\r\n                <div className=\"col-md-6\">\r\n                  <div className=\"fk-brand fk-brand--sr-lg\">\r\n                    {window.location.pathname === \"/\" ? (\r\n                      <NavLink\r\n                        to={{ pathname: \"/refresh\", state: \"/\" }}\r\n                        exact\r\n                        className=\"t-link w-100\"\r\n                      >\r\n                        <span className=\"fk-brand__img fk-brand__img--fk login-page-background\"></span>\r\n                      </NavLink>\r\n                    ) : (\r\n                      <NavLink to=\"/\" className=\"t-link w-100\">\r\n                        <span className=\"fk-brand__img fk-brand__img--fk login-page-background\"></span>\r\n                      </NavLink>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"row\">\r\n                <div className=\"col-md-6\">\r\n                  <div className=\"fk-brand fk-brand--sr-lg\">\r\n                    {window.location.pathname === \"/\" ? (\r\n                      <NavLink\r\n                        to={{ pathname: \"/refresh\", state: \"/\" }}\r\n                        exact\r\n                        className=\"t-link w-100\"\r\n                      >\r\n                        <span\r\n                          className=\"fk-brand__img fk-brand__img--fk\"\r\n                          style={style.logo}\r\n                        ></span>\r\n                      </NavLink>\r\n                    ) : (\r\n                      <NavLink to=\"/\" className=\"t-link w-100\">\r\n                        <span\r\n                          className=\"fk-brand__img fk-brand__img--fk\"\r\n                          style={style.logo}\r\n                        ></span>\r\n                      </NavLink>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n            {credentials.install_no ? (\r\n              <div className=\"row\">\r\n                <div className=\"col-md-8 col-lg-6 col-xl-4 t-mt-50\">\r\n                  <div className=\"fk-global-form\">\r\n                    <div key=\"login-form\">\r\n                      <h3 className=\"mt-0 text-capitalize font-weight-bold\">\r\n                        {_t(t(\"Not Installed\"))}\r\n                      </h3>\r\n                      <form onSubmit={handleSubmit}>\r\n                        <div>\r\n                          Your application is not ready to use, Install to\r\n                          continue. Follow our documentation to get installation\r\n                          guide.\r\n                        </div>\r\n                        <div className=\"row mt-3\">\r\n                          <div className=\"col-12\">\r\n                            <div className=\"d-flex align-items-center\">\r\n                              <div className=\"t-mr-8\">\r\n                                <NavLink\r\n                                  to=\"/installation\"\r\n                                  className=\"btn btn-primary sm-text text-uppercase\"\r\n                                >\r\n                                  {_t(t(\"Install\"))}\r\n                                </NavLink>\r\n                              </div>\r\n                              <div className=\"t-mr-8\">\r\n                                <a\r\n                                  href=\"http://docs.khadyo.com\"\r\n                                  target=\"_blank\"\r\n                                  rel=\"noopener noreferrer\"\r\n                                  className=\"btn btn-info sm-text text-uppercase\"\r\n                                >\r\n                                  {_t(t(\"Online Documentation\"))}\r\n                                </a>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </form>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              <div className=\"row\">\r\n                <div className=\"col-md-8 col-lg-6 col-xl-4 t-mt-50\">\r\n                  <div className=\"fk-global-form\">\r\n                    {loading ? (\r\n                      <div key=\"login-form\">\r\n                        <h3 className=\"mt-0 text-capitalize font-weight-bold\">\r\n                          {_t(t(\"waiting for response\"))}\r\n                        </h3>\r\n                        <form onSubmit={handleSubmit}>\r\n                          <div className=\"row\">\r\n                            {modalLoading(3)}\r\n                            <div className=\"col-12\">\r\n                              <div className=\"d-flex align-items-center\">\r\n                                <div className=\"t-mr-8\">\r\n                                  <button\r\n                                    type=\"button\"\r\n                                    className=\"btn btn-primary sm-text text-uppercase\"\r\n                                  >\r\n                                    {_t(t(\"Please wait\"))}\r\n                                  </button>\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </form>\r\n                      </div>\r\n                    ) : (\r\n                      <div key=\"loading\">\r\n                        {!credentials.install_check_reload ? (\r\n                          <>\r\n                            <h3 className=\"mt-0 text-capitalize font-weight-bold\">\r\n                              {_t(t(\"sign in\"))}\r\n                            </h3>\r\n                            <form onSubmit={handleSubmit}>\r\n                              <div className=\"row\">\r\n                                {/* demo login info */}\r\n                                <div className=\"p-2 t-mb-15 d-none\">\r\n                                  <div className=\"col-12 mb-1\" >\r\n                                    <div className=\"card p-2\">\r\n                                      <div className=\"row\">\r\n                                        <div className=\"col-12 text-center sm-text\">\r\n                                          Demo login credentials\r\n                                          <div className=\"text-primary\">\r\n                                            This password section is only for\r\n                                            demo\r\n                                          </div>\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n                                  <div\r\n                                    className=\"col-12 mb-1 pointer-cursor\"\r\n                                    onClick={() => {\r\n                                      setCredentials({\r\n                                        ...credentials,\r\n                                        email: \"admin@mail.com\",\r\n                                        password: \"khadyo@123\",\r\n                                      });\r\n                                    }}\r\n                                  >\r\n                                    <div className=\"card p-2 \">\r\n                                      <div className=\"row d-flex align-items-center\">\r\n                                        <div className=\"col-12 col-md-5\">\r\n                                          Admin: admin@mail.com\r\n                                        </div>\r\n                                        <div className=\"col-12 col-md-4\">\r\n                                          password: khadyo@123\r\n                                        </div>\r\n                                        <div className=\"col-12 col-md-3 text-right\">\r\n                                          <span className=\"btn btn-sm btn-primary\">\r\n                                            copy\r\n                                          </span>\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n\r\n                                  <div\r\n                                    className=\"col-12 pointer-cursor\"\r\n                                    onClick={() => {\r\n                                      setCredentials({\r\n                                        ...credentials,\r\n                                        email: \"staff@mail.com\",\r\n                                        password: \"khadyo@123\",\r\n                                      });\r\n                                    }}\r\n                                  >\r\n                                    <div className=\"card p-2\">\r\n                                      <div className=\"row d-flex align-items-center\">\r\n                                        <div className=\"col-12 col-md-5\">\r\n                                          Staff: staff@mail.com\r\n                                        </div>\r\n                                        <div className=\"col-12 col-md-4\">\r\n                                          password: khadyo@123\r\n                                        </div>\r\n                                        <div className=\"col-12 col-md-3 text-right\">\r\n                                          <span className=\"btn btn-sm btn-primary\">\r\n                                            copy\r\n                                          </span>\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n                                  <div\r\n                                    className=\"col-12 pointer-cursor\"\r\n                                    onClick={() => {\r\n                                      setCredentials({\r\n                                        ...credentials,\r\n                                        email: \"customer@mail.com\",\r\n                                        password: \"khadyo@123\",\r\n                                      });\r\n                                    }}\r\n                                  >\r\n                                    <div className=\"card p-2\">\r\n                                      <div className=\"row d-flex align-items-center\">\r\n                                        <div className=\"col-12 col-md-5\">\r\n                                          Customer: customer@mail.com\r\n                                        </div>\r\n                                        <div className=\"col-12 col-md-4\">\r\n                                          password: khadyo@123\r\n                                        </div>\r\n                                        <div className=\"col-12 col-md-3 text-right\">\r\n                                          <span className=\"btn btn-sm btn-primary\">\r\n                                            copy\r\n                                          </span>\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n                                  <div\r\n                                    className=\"col-12 pointer-cursor\"\r\n                                    onClick={() => {\r\n                                      setCredentials({\r\n                                        ...credentials,\r\n                                        email: \"deliverymanager@mail.com\",\r\n                                        password: \"khadyo@123\",\r\n                                      });\r\n                                    }}\r\n                                  >\r\n                                    <div className=\"card p-2\">\r\n                                      <div className=\"row d-flex align-items-center\">\r\n                                        <div className=\"col-12 col-md-5\">\r\n                                          Deliveryman: deliverymanager@mail.com\r\n                                        </div>\r\n                                        <div className=\"col-12 col-md-4\">\r\n                                          password: khadyo@123\r\n                                        </div>\r\n                                        <div className=\"col-12 col-md-3 text-right\">\r\n                                          <span className=\"btn btn-sm btn-primary\">\r\n                                            copy\r\n                                          </span>\r\n                                        </div>\r\n                                      </div>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n\r\n                                <div className=\"col-12 t-mb-15\">\r\n                                  <input\r\n                                    onChange={handleCredentials}\r\n                                    type=\"email\"\r\n                                    name=\"email\"\r\n                                    placeholder=\"Email\"\r\n                                    value={credentials.email}\r\n                                    required\r\n                                    autoComplete=\"off\"\r\n                                    className=\"form-control border-0 rounded-1\"\r\n                                  />\r\n                                </div>\r\n                                <div className=\"col-12 t-mb-15\">\r\n                                  <input\r\n                                    onChange={handleCredentials}\r\n                                    name=\"password\"\r\n                                    type=\"password\"\r\n                                    placeholder=\"Password\"\r\n                                    value={credentials.password}\r\n                                    required\r\n                                    autoComplete=\"off\"\r\n                                    className=\"form-control border-0 rounded-1\"\r\n                                  />\r\n                                </div>\r\n                                <div className=\"col-6 t-mb-15\">\r\n                                  <label className=\"mx-checkbox\">\r\n                                    <input\r\n                                      onChange={handleCredentials}\r\n                                      name=\"remember_me\"\r\n                                      type=\"checkbox\"\r\n                                      className=\"mx-checkbox__input mx-checkbox__input-solid mx-checkbox__input-solid--danger mx-checkbox__input-sm mt-0-kitchen\"\r\n                                    />\r\n                                    <span className=\"mx-checkbox__text text-capitalize t-text-heading t-ml-8\">\r\n                                      {_t(t(\"Remember Me\"))}\r\n                                    </span>\r\n                                  </label>\r\n                                </div>\r\n                                <div className=\"col-6 t-mb-15 text-right\">\r\n                                  <NavLink\r\n                                    to=\"/reset-password\"\r\n                                    className=\"t-link sm-text\"\r\n                                  >\r\n                                    {_t(t(\"Forgot password\"))}?\r\n                                  </NavLink>\r\n                                </div>\r\n                                <div className=\"col-12\">\r\n                                  <div className=\"d-flex align-items-center\">\r\n                                    <div className=\"t-mr-8\">\r\n                                      <button\r\n                                        type=\"submit\"\r\n                                        className=\"btn btn-success sm-text text-uppercase\"\r\n                                      >\r\n                                        {_t(t(\"sign in\"))}\r\n                                      </button>\r\n                                    </div>\r\n                                    <div className=\"t-mr-8\">\r\n                                      <NavLink\r\n                                        to=\"/sign-up\"\r\n                                        className=\"btn btn-primary sm-text text-uppercase\"\r\n                                      >\r\n                                        {_t(t(\"Sign Up\"))}\r\n                                      </NavLink>\r\n                                    </div>\r\n                                  </div>\r\n                                </div>\r\n                              </div>\r\n                            </form>\r\n                          </>\r\n                        ) : (\r\n                          modalLoading(5)\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}