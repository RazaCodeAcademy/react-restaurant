{"ast":null,"code":"import _defineProperty from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useContext,useState}from\"react\";import{useHistory}from\"react-router-dom\";//axios and base url\nimport axios from\"axios\";import{BASE_URL}from\"../../../../../BaseUrl\";//functions\nimport{_t,getCookie,tableLoading,currencySymbolLeft,formatPrice,currencySymbolRight}from\"../../../../../functions/Functions\";import{useTranslation}from\"react-i18next\";//3rd party packages\nimport{Helmet}from\"react-helmet\";import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import Select from\"react-select\";import makeAnimated from\"react-select/animated\";import DatePicker from\"react-datepicker\";import\"react-datepicker/dist/react-datepicker.css\";//pages & includes\nimport ManageSidebar from\"../ManageSidebar\";//context consumer\nimport{SettingsContext}from\"../../../../../contexts/Settings\";import{RestaurantContext}from\"../../../../../contexts/Restaurant\";import{UserContext}from\"../../../../../contexts/User\";import{FoodContext}from\"../../../../../contexts/Food\";var IngredientPurchase=function IngredientPurchase(){var _useTranslation=useTranslation(),t=_useTranslation.t;var history=useHistory();//getting context values here\nvar _useContext=useContext(RestaurantContext),loading=_useContext.loading,setLoading=_useContext.setLoading,branchForSearch=_useContext.branchForSearch,getIngredientItem=_useContext.getIngredientItem,ingredientItemForSearch=_useContext.ingredientItemForSearch,ingredientItemStock=_useContext.ingredientItemStock,getWorkPeriod=_useContext.getWorkPeriod,dataPaginating=_useContext.dataPaginating;var _useContext2=useContext(UserContext),getSupplier=_useContext2.getSupplier,supplierForSearch=_useContext2.supplierForSearch;var _useContext3=useContext(FoodContext),workPeriodWeb=_useContext3.workPeriodWeb,getFoodWeb=_useContext3.getFoodWeb;// States hook here\n//new item\nvar _useState=useState({branch:null,supplier:null,invoice:\"\",description:\"\",paymentType:\"\",items:null,paid:null,total:null,due:null}),_useState2=_slicedToArray(_useState,2),newItem=_useState2[0],setNewItem=_useState2[1];//datepicker\nvar _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),purchaseDate=_useState4[0],setPurchaseDate=_useState4[1];//qty and rate\nvar _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),qtyOfItem=_useState6[0],setQtyOfItem=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),rateOfItem=_useState8[0],setRateOfItem=_useState8[1];//useEffect == componentDidMount()\nuseEffect(function(){getFoodWeb();getSupplier();getIngredientItem();},[]);//on change input field\nvar handleChange=function handleChange(e){setNewItem(_objectSpread(_objectSpread({},newItem),{},_defineProperty({},e.target.name,e.target.value)));};//set items hook\nvar handleSetItems=function handleSetItems(item){setNewItem(_objectSpread(_objectSpread({},newItem),{},{items:item}));};//stock\nvar handleGetStock=function handleGetStock(id){if(newItem.branch===null){return 0;}var stock=ingredientItemStock.find(function(item){return item.ingredient_id===parseInt(id)&&item.branch_id===newItem.branch.id;});if(stock===undefined){return 0;}return stock.qty;};//subtotal\nvar handleGetSubTotal=function handleGetSubTotal(slug){var qty=0;var rate=0;if(qtyOfItem!==null&&qtyOfItem[slug]){qty=qtyOfItem[slug];}if(rateOfItem!==null&&rateOfItem[slug]){rate=rateOfItem[slug];}return rate*qty;};//total\nvar handleGetTotal=function handleGetTotal(){var total=0;if(newItem.items!==null){newItem.items.map(function(item){if(qtyOfItem&&rateOfItem&&qtyOfItem[item.slug]&&rateOfItem[item.slug]){total=total+qtyOfItem[item.slug]*rateOfItem[item.slug];}});}return total;};//set each item qty\nvar handleItemQty=function handleItemQty(e){setQtyOfItem(_objectSpread(_objectSpread({},qtyOfItem),{},_defineProperty({},e.target.name,e.target.value)));};//set each item qty\nvar handleItemRate=function handleItemRate(e){setRateOfItem(_objectSpread(_objectSpread({},rateOfItem),{},_defineProperty({},e.target.name,e.target.value)));};//handle Set branch hook\nvar handleSetBranch=function handleSetBranch(branch){var theWorkPeriod=workPeriodWeb&&workPeriodWeb.find(function(thisItem){return parseInt(thisItem.branch_id)===parseInt(branch.id);});if(theWorkPeriod!==undefined){setNewItem(_objectSpread(_objectSpread({},newItem),{},{branch:branch}));}else{setNewItem(_objectSpread(_objectSpread({},newItem),{},{branch:null}));}};//handle Set supplier hook\nvar handleSetSupplier=function handleSetSupplier(supplier){setNewItem(_objectSpread(_objectSpread({},newItem),{},{supplier:supplier}));};//post req of food item add\nvar ingredientItemAxios=function ingredientItemAxios(){setLoading(true);var date=new Date(purchaseDate).getFullYear()+\"-\"+(new Date(purchaseDate).getMonth()+1)+\"-\"+new Date(purchaseDate).getDate();var formData=new FormData();formData.append(\"branch_id\",newItem.branch.id);formData.append(\"supplier_id\",newItem.supplier.id);formData.append(\"invoice_number\",newItem.invoice);formData.append(\"purchase_date\",date);formData.append(\"desc\",newItem.description);formData.append(\"payment_type\",newItem.paymentType);formData.append(\"paid_amount\",newItem.paid);formData.append(\"total_bill\",handleGetTotal());//converting items and prices to array\nvar slugArray=[];newItem.items.map(function(newIngredientItem){slugArray.push(newIngredientItem.slug);});slugArray.map(function(slugItem){formData.append(\"slugOfIngredients[]\",slugItem);if(qtyOfItem[slugItem]){formData.append(\"qtys[]\",qtyOfItem[slugItem]);}if(rateOfItem[slugItem]){formData.append(\"rates[]\",rateOfItem[slugItem]);}});var url=BASE_URL+\"/settings/new-ingredient_purchase\";return axios.post(url,formData,{headers:{Authorization:\"Bearer \".concat(getCookie())}}).then(function(res){getIngredientItem();setNewItem({branch:null,supplier:null,invoice:\"\",description:\"\",paymentType:\"\",items:null,paid:null,total:null,due:null});setQtyOfItem(null);setRateOfItem(null);setLoading(false);toast.success(\"\".concat(_t(t(\"Purchase has been added\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}).catch(function(error){setLoading(false);toast.error(\"\".concat(_t(t(\"Please try again later\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});});};//send to server\nvar handleSubmit=function handleSubmit(e){e.preventDefault();if(newItem.branch!==null&&newItem.supplier!==null&&newItem.items!==null&&newItem.items.length>0&&newItem.purchaseDate!==null){ingredientItemAxios();}else{toast.error(\"\".concat(_t(t(\"Please fill all the required fields\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Helmet,null,/*#__PURE__*/React.createElement(\"title\",null,_t(t(\"Add Purchase\")))),/*#__PURE__*/React.createElement(\"main\",{id:\"main\",\"data-simplebar\":true},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row t-mt-10 gx-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-3 col-xxl-2 t-mb-30 mb-lg-0\"},/*#__PURE__*/React.createElement(ManageSidebar,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-9 col-xxl-10 t-mb-30 mb-lg-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"t-bg-white\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fk-scroll--pos-menu table-bottom-info-hide\",\"data-simplebar\":true},/*#__PURE__*/React.createElement(\"div\",{className:\"t-pl-15 t-pr-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(dataPaginating&&\"loading\")}),loading===true?tableLoading():/*#__PURE__*/React.createElement(\"div\",{key:\"smtp-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 align-items-center t-pt-15 t-pb-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-lg-5 t-mb-15 mb-md-0\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list fk-breadcrumb\"},/*#__PURE__*/React.createElement(\"li\",{className:\"fk-breadcrumb__list\"},/*#__PURE__*/React.createElement(\"span\",{className:\"t-link fk-breadcrumb__link text-capitalize\"},_t(t(\"Add new purchase\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-lg-7\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-3 align-items-center\"}))),/*#__PURE__*/React.createElement(\"form\",{className:\"row card p-2 mx-3 mb-5 sm-text\",onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},branchForSearch&&/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mt-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-2\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"branch\",className:\"control-label\"},_t(t(\"Branch\")),/*#__PURE__*/React.createElement(\"span\",{className:\"text-danger\"},\"*\"),newItem.branch===null&&/*#__PURE__*/React.createElement(\"small\",{className:\"text-secondary\"},\" (\",_t(t(\"please check if workperiod of the selected branch is started\")),\")\"))),/*#__PURE__*/React.createElement(Select,{options:branchForSearch,components:makeAnimated(),getOptionLabel:function getOptionLabel(option){return option.name;},getOptionValue:function getOptionValue(option){return option.name;},classNamePrefix:\"select\",onChange:handleSetBranch,maxMenuHeight:\"200px\",placeholder:_t(t(\"Please select a branch\"))+\"..\"})),supplierForSearch&&/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-2\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"branch\",className:\"control-label\"},_t(t(\"Supplier\")),/*#__PURE__*/React.createElement(\"span\",{className:\"text-danger\"},\"*\"))),/*#__PURE__*/React.createElement(Select,{options:supplierForSearch,components:makeAnimated(),getOptionLabel:function getOptionLabel(option){return option.name;},getOptionValue:function getOptionValue(option){return option.name;},classNamePrefix:\"select\",onChange:handleSetSupplier,maxMenuHeight:\"200px\",placeholder:_t(t(\"Please select a supplier\"))+\"..\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col-8 mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-2\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"invoice\",className:\"control-label\"},_t(t(\"Invoice\")),/*#__PURE__*/React.createElement(\"span\",{className:\"text-danger\"},\"*\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-2\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"invoice\",name:\"invoice\",onChange:handleChange,value:newItem.invoice,placeholder:\"e.g. 123\",required:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group col-4 text-right mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-2 ml-4 text-left\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"purchaseDate\",className:\"control-label\"},_t(t(\"Purchase Date\")),/*#__PURE__*/React.createElement(\"span\",{className:\"text-danger\"},\"*\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-2\"},/*#__PURE__*/React.createElement(DatePicker,{selected:purchaseDate,onChange:function onChange(date){return setPurchaseDate(date);},peekNextMonth:true,showMonthDropdown:true,showYearDropdown:true,dropdownMode:\"select\",className:\"form-control\",placeholderText:_t(t(\"Purchase date\")),shouldCloseOnSelect:false})))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-2\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"description\",className:\"control-label\"},_t(t(\"Description\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-2\"},/*#__PURE__*/React.createElement(\"textarea\",{type:\"text\",className:\"form-control\",id:\"description\",name:\"description\",onChange:handleChange,value:newItem.description,placeholder:\"Short description\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-2\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"paymentType\",className:\"control-label\"},_t(t(\"Payment Type\")),/*#__PURE__*/React.createElement(\"span\",{className:\"text-danger\"},\"*\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"mb-2\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control\",id:\"paymentType\",name:\"paymentType\",onChange:handleChange,value:newItem.paymentType,placeholder:\"e.g. Cash, Bank payment..\",required:true}))),ingredientItemForSearch&&/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mt-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"mb-2\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"branch\",className:\"control-label\"},_t(t(\"Ingredient Items\")),/*#__PURE__*/React.createElement(\"span\",{className:\"text-danger\"},\"*\"))),/*#__PURE__*/React.createElement(Select,{options:ingredientItemForSearch,components:makeAnimated(),getOptionLabel:function getOptionLabel(option){return option.name;},getOptionValue:function getOptionValue(option){return option.name;},classNamePrefix:\"select\",onChange:handleSetItems,maxMenuHeight:\"200px\",isMulti:true,isDisabled:newItem.branch===null,placeholder:_t(t(\"Please select items\"))+\"..\"})),newItem.items!==null&&[newItem.items.length>0&&/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive mt-3\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table table-bordered table-hover\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"align-middle\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},_t(t(\"Name\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},_t(t(\"stock\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},_t(t(\"Qty\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},_t(t(\"Rate\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},_t(t(\"Total\"))))),/*#__PURE__*/React.createElement(\"tbody\",{className:\"align-middle\"},newItem.items.map(function(ingredientItem,index){return/*#__PURE__*/React.createElement(\"tr\",{className:\"align-middle\",key:index},/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text text-capitalize align-middle text-center\"},ingredientItem.name),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},handleGetStock(ingredientItem.id)),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text text-capitalize align-middle text-center\"},/*#__PURE__*/React.createElement(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",className:\"form-control text-center\",id:ingredientItem.slug,name:ingredientItem.slug,onChange:handleItemQty,placeholder:\"Qty\",required:true,disabled:newItem.branch===null})),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text text-capitalize align-middle text-center\"},/*#__PURE__*/React.createElement(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",className:\"form-control text-center\",id:ingredientItem.slug,name:ingredientItem.slug,onChange:handleItemRate,placeholder:\"Price in usd\",required:true,disabled:newItem.branch===null})),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},currencySymbolLeft(),formatPrice(handleGetSubTotal(ingredientItem.slug)),currencySymbolRight()));})),/*#__PURE__*/React.createElement(\"tfoot\",{className:\"align-middle\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",colSpan:\"3\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"}),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},_t(t(\"Total Bill\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},currencySymbolLeft(),formatPrice(handleGetTotal()),currencySymbolRight())),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",colSpan:\"3\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"}),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},_t(t(\"Paid\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},/*#__PURE__*/React.createElement(\"input\",{type:\"number\",step:\"0.01\",min:\"0\",className:\"form-control p-0 text-center\",name:\"paid\",value:newItem.paid,onChange:handleChange,placeholder:\"In usd\",required:true}))),/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",colSpan:\"3\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"}),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},_t(t(\"Due\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text text-capitalize align-middle text-center border-1 border\"},currencySymbolLeft(),formatPrice(handleGetTotal()-newItem.paid),currencySymbolRight())))))],/*#__PURE__*/React.createElement(\"div\",{className:\"form-group mt-4 pb-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-12\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary px-5\",type:\"submit\",disabled:newItem.branch===null},_t(t(\"Save\"))))))))))))))));};export default IngredientPurchase;","map":{"version":3,"sources":["/Users/raza/Downloads/khadyo_source_code/client/src/resources/restaurant/auth/manage/stock/IngredientPurchase.js"],"names":["React","useEffect","useContext","useState","useHistory","axios","BASE_URL","_t","getCookie","tableLoading","currencySymbolLeft","formatPrice","currencySymbolRight","useTranslation","Helmet","toast","Select","makeAnimated","DatePicker","ManageSidebar","SettingsContext","RestaurantContext","UserContext","FoodContext","IngredientPurchase","t","history","loading","setLoading","branchForSearch","getIngredientItem","ingredientItemForSearch","ingredientItemStock","getWorkPeriod","dataPaginating","getSupplier","supplierForSearch","workPeriodWeb","getFoodWeb","branch","supplier","invoice","description","paymentType","items","paid","total","due","newItem","setNewItem","purchaseDate","setPurchaseDate","qtyOfItem","setQtyOfItem","rateOfItem","setRateOfItem","handleChange","e","target","name","value","handleSetItems","item","handleGetStock","id","stock","find","ingredient_id","parseInt","branch_id","undefined","qty","handleGetSubTotal","slug","rate","handleGetTotal","map","handleItemQty","handleItemRate","handleSetBranch","theWorkPeriod","thisItem","handleSetSupplier","ingredientItemAxios","date","Date","getFullYear","getMonth","getDate","formData","FormData","append","slugArray","newIngredientItem","push","slugItem","url","post","headers","Authorization","then","res","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","className","catch","error","handleSubmit","preventDefault","length","option","ingredientItem","index"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n//axios and base url\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../../../../../BaseUrl\";\r\n\r\n//functions\r\nimport {\r\n  _t,\r\n  getCookie,\r\n  tableLoading,\r\n  currencySymbolLeft,\r\n  formatPrice,\r\n  currencySymbolRight,\r\n} from \"../../../../../functions/Functions\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\n//3rd party packages\r\nimport { Helmet } from \"react-helmet\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Select from \"react-select\";\r\nimport makeAnimated from \"react-select/animated\";\r\nimport DatePicker from \"react-datepicker\";\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\n//pages & includes\r\nimport ManageSidebar from \"../ManageSidebar\";\r\n\r\n//context consumer\r\nimport { SettingsContext } from \"../../../../../contexts/Settings\";\r\nimport { RestaurantContext } from \"../../../../../contexts/Restaurant\";\r\nimport { UserContext } from \"../../../../../contexts/User\";\r\nimport { FoodContext } from \"../../../../../contexts/Food\";\r\n\r\nconst IngredientPurchase = () => {\r\n  const { t } = useTranslation();\r\n  const history = useHistory();\r\n  //getting context values here\r\n  let {\r\n    loading,\r\n    setLoading,\r\n    branchForSearch,\r\n    getIngredientItem,\r\n    ingredientItemForSearch,\r\n    ingredientItemStock,\r\n    getWorkPeriod,\r\n    dataPaginating,\r\n  } = useContext(RestaurantContext);\r\n  let { getSupplier, supplierForSearch } = useContext(UserContext);\r\n  let { workPeriodWeb, getFoodWeb } = useContext(FoodContext);\r\n  // States hook here\r\n  //new item\r\n  let [newItem, setNewItem] = useState({\r\n    branch: null,\r\n    supplier: null,\r\n    invoice: \"\",\r\n    description: \"\",\r\n    paymentType: \"\",\r\n    items: null,\r\n    paid: null,\r\n    total: null,\r\n    due: null,\r\n  });\r\n\r\n  //datepicker\r\n  const [purchaseDate, setPurchaseDate] = useState(null);\r\n\r\n  //qty and rate\r\n  let [qtyOfItem, setQtyOfItem] = useState(null);\r\n  let [rateOfItem, setRateOfItem] = useState(null);\r\n\r\n  //useEffect == componentDidMount()\r\n  useEffect(() => {\r\n    getFoodWeb();\r\n    getSupplier();\r\n    getIngredientItem();\r\n  }, []);\r\n\r\n  //on change input field\r\n  const handleChange = (e) => {\r\n    setNewItem({ ...newItem, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  //set items hook\r\n  const handleSetItems = (item) => {\r\n    setNewItem({\r\n      ...newItem,\r\n      items: item,\r\n    });\r\n  };\r\n\r\n  //stock\r\n  const handleGetStock = (id) => {\r\n    if (newItem.branch === null) {\r\n      return 0;\r\n    }\r\n    let stock = ingredientItemStock.find((item) => {\r\n      return (\r\n        item.ingredient_id === parseInt(id) &&\r\n        item.branch_id === newItem.branch.id\r\n      );\r\n    });\r\n    if (stock === undefined) {\r\n      return 0;\r\n    }\r\n    return stock.qty;\r\n  };\r\n  //subtotal\r\n  const handleGetSubTotal = (slug) => {\r\n    let qty = 0;\r\n    let rate = 0;\r\n    if (qtyOfItem !== null && qtyOfItem[slug]) {\r\n      qty = qtyOfItem[slug];\r\n    }\r\n    if (rateOfItem !== null && rateOfItem[slug]) {\r\n      rate = rateOfItem[slug];\r\n    }\r\n    return rate * qty;\r\n  };\r\n\r\n  //total\r\n  const handleGetTotal = () => {\r\n    let total = 0;\r\n    if (newItem.items !== null) {\r\n      newItem.items.map((item) => {\r\n        if (\r\n          qtyOfItem &&\r\n          rateOfItem &&\r\n          qtyOfItem[item.slug] &&\r\n          rateOfItem[item.slug]\r\n        ) {\r\n          total = total + qtyOfItem[item.slug] * rateOfItem[item.slug];\r\n        }\r\n      });\r\n    }\r\n    return total;\r\n  };\r\n\r\n  //set each item qty\r\n  const handleItemQty = (e) => {\r\n    setQtyOfItem({\r\n      ...qtyOfItem,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  //set each item qty\r\n  const handleItemRate = (e) => {\r\n    setRateOfItem({\r\n      ...rateOfItem,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  //handle Set branch hook\r\n  const handleSetBranch = (branch) => {\r\n    let theWorkPeriod =\r\n      workPeriodWeb &&\r\n      workPeriodWeb.find((thisItem) => {\r\n        return parseInt(thisItem.branch_id) === parseInt(branch.id);\r\n      });\r\n    if (theWorkPeriod !== undefined) {\r\n      setNewItem({ ...newItem, branch });\r\n    } else {\r\n      setNewItem({ ...newItem, branch: null });\r\n    }\r\n  };\r\n\r\n  //handle Set supplier hook\r\n  const handleSetSupplier = (supplier) => {\r\n    setNewItem({ ...newItem, supplier });\r\n  };\r\n\r\n  //post req of food item add\r\n  const ingredientItemAxios = () => {\r\n    setLoading(true);\r\n    let date =\r\n      new Date(purchaseDate).getFullYear() +\r\n      \"-\" +\r\n      (new Date(purchaseDate).getMonth() + 1) +\r\n      \"-\" +\r\n      new Date(purchaseDate).getDate();\r\n    let formData = new FormData();\r\n    formData.append(\"branch_id\", newItem.branch.id);\r\n    formData.append(\"supplier_id\", newItem.supplier.id);\r\n    formData.append(\"invoice_number\", newItem.invoice);\r\n    formData.append(\"purchase_date\", date);\r\n    formData.append(\"desc\", newItem.description);\r\n    formData.append(\"payment_type\", newItem.paymentType);\r\n    formData.append(\"paid_amount\", newItem.paid);\r\n    formData.append(\"total_bill\", handleGetTotal());\r\n\r\n    //converting items and prices to array\r\n    let slugArray = [];\r\n    newItem.items.map((newIngredientItem) => {\r\n      slugArray.push(newIngredientItem.slug);\r\n    });\r\n    slugArray.map((slugItem) => {\r\n      formData.append(\"slugOfIngredients[]\", slugItem);\r\n      if (qtyOfItem[slugItem]) {\r\n        formData.append(\"qtys[]\", qtyOfItem[slugItem]);\r\n      }\r\n      if (rateOfItem[slugItem]) {\r\n        formData.append(\"rates[]\", rateOfItem[slugItem]);\r\n      }\r\n    });\r\n\r\n    const url = BASE_URL + \"/settings/new-ingredient_purchase\";\r\n    return axios\r\n      .post(url, formData, {\r\n        headers: { Authorization: `Bearer ${getCookie()}` },\r\n      })\r\n      .then((res) => {\r\n        getIngredientItem();\r\n        setNewItem({\r\n          branch: null,\r\n          supplier: null,\r\n          invoice: \"\",\r\n          description: \"\",\r\n          paymentType: \"\",\r\n          items: null,\r\n          paid: null,\r\n          total: null,\r\n          due: null,\r\n        });\r\n        setQtyOfItem(null);\r\n        setRateOfItem(null);\r\n        setLoading(false);\r\n        toast.success(`${_t(t(\"Purchase has been added\"))}`, {\r\n          position: \"bottom-center\",\r\n          autoClose: 10000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          className: \"text-center toast-notification\",\r\n        });\r\n      })\r\n      .catch((error) => {\r\n        setLoading(false);\r\n        toast.error(`${_t(t(\"Please try again later\"))}`, {\r\n          position: \"bottom-center\",\r\n          autoClose: 10000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          className: \"text-center toast-notification\",\r\n        });\r\n      });\r\n  };\r\n\r\n  //send to server\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (\r\n      newItem.branch !== null &&\r\n      newItem.supplier !== null &&\r\n      newItem.items !== null &&\r\n      newItem.items.length > 0 &&\r\n      newItem.purchaseDate !== null\r\n    ) {\r\n      ingredientItemAxios();\r\n    } else {\r\n      toast.error(`${_t(t(\"Please fill all the required fields\"))}`, {\r\n        position: \"bottom-center\",\r\n        autoClose: 10000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        className: \"text-center toast-notification\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{_t(t(\"Add Purchase\"))}</title>\r\n      </Helmet>\r\n\r\n      {/* main body */}\r\n      <main id=\"main\" data-simplebar>\r\n        <div className=\"container\">\r\n          <div className=\"row t-mt-10 gx-2\">\r\n            {/* left Sidebar */}\r\n            <div className=\"col-lg-3 col-xxl-2 t-mb-30 mb-lg-0\">\r\n              <ManageSidebar />\r\n            </div>\r\n            {/* left Sidebar ends */}\r\n\r\n            {/* Rightbar contents */}\r\n            <div className=\"col-lg-9 col-xxl-10 t-mb-30 mb-lg-0\">\r\n              <div className=\"t-bg-white\">\r\n                <div\r\n                  className=\"fk-scroll--pos-menu table-bottom-info-hide\"\r\n                  data-simplebar\r\n                >\r\n                  <div className=\"t-pl-15 t-pr-15\">\r\n                    {/* next page data spin loading */}\r\n                    <div className={`${dataPaginating && \"loading\"}`}></div>\r\n                    {/* spin loading ends */}\r\n\r\n                    {/* Loading effect */}\r\n                    {loading === true ? (\r\n                      tableLoading()\r\n                    ) : (\r\n                      <div key=\"smtp-form\">\r\n                        <div className=\"row gx-2 align-items-center t-pt-15 t-pb-15\">\r\n                          <div className=\"col-md-6 col-lg-5 t-mb-15 mb-md-0\">\r\n                            <ul className=\"t-list fk-breadcrumb\">\r\n                              <li className=\"fk-breadcrumb__list\">\r\n                                <span className=\"t-link fk-breadcrumb__link text-capitalize\">\r\n                                  {_t(t(\"Add new purchase\"))}\r\n                                </span>\r\n                              </li>\r\n                            </ul>\r\n                          </div>\r\n                          <div className=\"col-md-6 col-lg-7\">\r\n                            <div className=\"row gx-3 align-items-center\"></div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Form starts here */}\r\n                        <form\r\n                          className=\"row card p-2 mx-3 mb-5 sm-text\"\r\n                          onSubmit={handleSubmit}\r\n                        >\r\n                          <div className=\"col-12\">\r\n                            {branchForSearch && (\r\n                              <div className=\"form-group mt-2\">\r\n                                <div className=\"mb-2\">\r\n                                  <label\r\n                                    htmlFor=\"branch\"\r\n                                    className=\"control-label\"\r\n                                  >\r\n                                    {_t(t(\"Branch\"))}\r\n                                    <span className=\"text-danger\">*</span>\r\n                                    {newItem.branch === null && (\r\n                                      <small className=\"text-secondary\">\r\n                                        {\" (\"}\r\n                                        {_t(\r\n                                          t(\r\n                                            \"please check if workperiod of the selected branch is started\"\r\n                                          )\r\n                                        )}\r\n                                        )\r\n                                      </small>\r\n                                    )}\r\n                                  </label>\r\n                                </div>\r\n                                <Select\r\n                                  options={branchForSearch}\r\n                                  components={makeAnimated()}\r\n                                  getOptionLabel={(option) => option.name}\r\n                                  getOptionValue={(option) => option.name}\r\n                                  classNamePrefix=\"select\"\r\n                                  onChange={handleSetBranch}\r\n                                  maxMenuHeight=\"200px\"\r\n                                  placeholder={\r\n                                    _t(t(\"Please select a branch\")) + \"..\"\r\n                                  }\r\n                                />\r\n                              </div>\r\n                            )}\r\n\r\n                            {supplierForSearch && (\r\n                              <div className=\"form-group mt-3\">\r\n                                <div className=\"mb-2\">\r\n                                  <label\r\n                                    htmlFor=\"branch\"\r\n                                    className=\"control-label\"\r\n                                  >\r\n                                    {_t(t(\"Supplier\"))}\r\n                                    <span className=\"text-danger\">*</span>\r\n                                  </label>\r\n                                </div>\r\n                                <Select\r\n                                  options={supplierForSearch}\r\n                                  components={makeAnimated()}\r\n                                  getOptionLabel={(option) => option.name}\r\n                                  getOptionValue={(option) => option.name}\r\n                                  classNamePrefix=\"select\"\r\n                                  onChange={handleSetSupplier}\r\n                                  maxMenuHeight=\"200px\"\r\n                                  placeholder={\r\n                                    _t(t(\"Please select a supplier\")) + \"..\"\r\n                                  }\r\n                                />\r\n                              </div>\r\n                            )}\r\n                            <div className=\"row\">\r\n                              <div className=\"form-group col-8 mt-3\">\r\n                                <div className=\"mb-2\">\r\n                                  <label\r\n                                    htmlFor=\"invoice\"\r\n                                    className=\"control-label\"\r\n                                  >\r\n                                    {_t(t(\"Invoice\"))}\r\n                                    <span className=\"text-danger\">*</span>\r\n                                  </label>\r\n                                </div>\r\n                                <div className=\"mb-2\">\r\n                                  <input\r\n                                    type=\"text\"\r\n                                    className=\"form-control\"\r\n                                    id=\"invoice\"\r\n                                    name=\"invoice\"\r\n                                    onChange={handleChange}\r\n                                    value={newItem.invoice}\r\n                                    placeholder=\"e.g. 123\"\r\n                                    required\r\n                                  />\r\n                                </div>\r\n                              </div>\r\n\r\n                              <div className=\"form-group col-4 text-right mt-3\">\r\n                                <div className=\"mb-2 ml-4 text-left\">\r\n                                  <label\r\n                                    htmlFor=\"purchaseDate\"\r\n                                    className=\"control-label\"\r\n                                  >\r\n                                    {_t(t(\"Purchase Date\"))}\r\n                                    <span className=\"text-danger\">*</span>\r\n                                  </label>\r\n                                </div>\r\n                                <div className=\"mb-2\">\r\n                                  <DatePicker\r\n                                    selected={purchaseDate}\r\n                                    onChange={(date) => setPurchaseDate(date)}\r\n                                    peekNextMonth\r\n                                    showMonthDropdown\r\n                                    showYearDropdown\r\n                                    dropdownMode=\"select\"\r\n                                    className=\"form-control\"\r\n                                    placeholderText={_t(t(\"Purchase date\"))}\r\n                                    shouldCloseOnSelect={false}\r\n                                  />\r\n                                </div>\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div className=\"form-group mt-3\">\r\n                              <div className=\"mb-2\">\r\n                                <label\r\n                                  htmlFor=\"description\"\r\n                                  className=\"control-label\"\r\n                                >\r\n                                  {_t(t(\"Description\"))}\r\n                                </label>\r\n                              </div>\r\n                              <div className=\"mb-2\">\r\n                                <textarea\r\n                                  type=\"text\"\r\n                                  className=\"form-control\"\r\n                                  id=\"description\"\r\n                                  name=\"description\"\r\n                                  onChange={handleChange}\r\n                                  value={newItem.description}\r\n                                  placeholder=\"Short description\"\r\n                                />\r\n                              </div>\r\n                            </div>\r\n\r\n                            <div className=\"form-group mt-3\">\r\n                              <div className=\"mb-2\">\r\n                                <label\r\n                                  htmlFor=\"paymentType\"\r\n                                  className=\"control-label\"\r\n                                >\r\n                                  {_t(t(\"Payment Type\"))}\r\n                                  <span className=\"text-danger\">*</span>\r\n                                </label>\r\n                              </div>\r\n                              <div className=\"mb-2\">\r\n                                <input\r\n                                  type=\"text\"\r\n                                  className=\"form-control\"\r\n                                  id=\"paymentType\"\r\n                                  name=\"paymentType\"\r\n                                  onChange={handleChange}\r\n                                  value={newItem.paymentType}\r\n                                  placeholder=\"e.g. Cash, Bank payment..\"\r\n                                  required\r\n                                />\r\n                              </div>\r\n                            </div>\r\n\r\n                            {ingredientItemForSearch && (\r\n                              <div className=\"form-group mt-3\">\r\n                                <div className=\"mb-2\">\r\n                                  <label\r\n                                    htmlFor=\"branch\"\r\n                                    className=\"control-label\"\r\n                                  >\r\n                                    {_t(t(\"Ingredient Items\"))}\r\n                                    <span className=\"text-danger\">*</span>\r\n                                  </label>\r\n                                </div>\r\n                                <Select\r\n                                  options={ingredientItemForSearch}\r\n                                  components={makeAnimated()}\r\n                                  getOptionLabel={(option) => option.name}\r\n                                  getOptionValue={(option) => option.name}\r\n                                  classNamePrefix=\"select\"\r\n                                  onChange={handleSetItems}\r\n                                  maxMenuHeight=\"200px\"\r\n                                  isMulti\r\n                                  isDisabled={newItem.branch === null}\r\n                                  placeholder={\r\n                                    _t(t(\"Please select items\")) + \"..\"\r\n                                  }\r\n                                />\r\n                              </div>\r\n                            )}\r\n\r\n                            {newItem.items !== null && [\r\n                              newItem.items.length > 0 && (\r\n                                <div className=\"table-responsive mt-3\">\r\n                                  <table className=\"table table-bordered table-hover\">\r\n                                    <thead className=\"align-middle\">\r\n                                      <tr>\r\n                                        <th\r\n                                          scope=\"col\"\r\n                                          className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                        >\r\n                                          {_t(t(\"Name\"))}\r\n                                        </th>\r\n                                        <th\r\n                                          scope=\"col\"\r\n                                          className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                        >\r\n                                          {_t(t(\"stock\"))}\r\n                                        </th>\r\n                                        <th\r\n                                          scope=\"col\"\r\n                                          className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                        >\r\n                                          {_t(t(\"Qty\"))}\r\n                                        </th>\r\n                                        <th\r\n                                          scope=\"col\"\r\n                                          className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                        >\r\n                                          {_t(t(\"Rate\"))}\r\n                                        </th>\r\n\r\n                                        <th\r\n                                          scope=\"col\"\r\n                                          className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                        >\r\n                                          {_t(t(\"Total\"))}\r\n                                        </th>\r\n                                      </tr>\r\n                                    </thead>\r\n\r\n                                    <tbody className=\"align-middle\">\r\n                                      {newItem.items.map(\r\n                                        (ingredientItem, index) => {\r\n                                          return (\r\n                                            <tr\r\n                                              className=\"align-middle\"\r\n                                              key={index}\r\n                                            >\r\n                                              <td className=\"xsm-text text-capitalize align-middle text-center\">\r\n                                                {ingredientItem.name}\r\n                                              </td>\r\n\r\n                                              <td className=\"xsm-text align-middle text-center\">\r\n                                                {handleGetStock(\r\n                                                  ingredientItem.id\r\n                                                )}\r\n                                              </td>\r\n\r\n                                              <td className=\"xsm-text text-capitalize align-middle text-center\">\r\n                                                <input\r\n                                                  type=\"number\"\r\n                                                  step=\"0.01\"\r\n                                                  min=\"0\"\r\n                                                  className=\"form-control text-center\"\r\n                                                  id={ingredientItem.slug}\r\n                                                  name={ingredientItem.slug}\r\n                                                  onChange={handleItemQty}\r\n                                                  placeholder=\"Qty\"\r\n                                                  required\r\n                                                  disabled={\r\n                                                    newItem.branch === null\r\n                                                  }\r\n                                                />\r\n                                              </td>\r\n                                              <td className=\"xsm-text text-capitalize align-middle text-center\">\r\n                                                <input\r\n                                                  type=\"number\"\r\n                                                  step=\"0.01\"\r\n                                                  min=\"0\"\r\n                                                  className=\"form-control text-center\"\r\n                                                  id={ingredientItem.slug}\r\n                                                  name={ingredientItem.slug}\r\n                                                  onChange={handleItemRate}\r\n                                                  placeholder=\"Price in usd\"\r\n                                                  required\r\n                                                  disabled={\r\n                                                    newItem.branch === null\r\n                                                  }\r\n                                                />\r\n                                              </td>\r\n\r\n                                              <td className=\"xsm-text align-middle text-center\">\r\n                                                {currencySymbolLeft()}\r\n                                                {formatPrice(\r\n                                                  handleGetSubTotal(\r\n                                                    ingredientItem.slug\r\n                                                  )\r\n                                                )}\r\n                                                {currencySymbolRight()}\r\n                                              </td>\r\n                                            </tr>\r\n                                          );\r\n                                        }\r\n                                      )}\r\n                                    </tbody>\r\n                                    <tfoot className=\"align-middle\">\r\n                                      <tr>\r\n                                        <th\r\n                                          scope=\"col\"\r\n                                          colSpan=\"3\"\r\n                                          className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                        ></th>\r\n\r\n                                        <th\r\n                                          scope=\"col\"\r\n                                          className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                        >\r\n                                          {_t(t(\"Total Bill\"))}\r\n                                        </th>\r\n\r\n                                        <th\r\n                                          scope=\"col\"\r\n                                          className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                        >\r\n                                          {currencySymbolLeft()}\r\n                                          {formatPrice(handleGetTotal())}\r\n                                          {currencySymbolRight()}\r\n                                        </th>\r\n                                      </tr>\r\n                                      <tr>\r\n                                        <th\r\n                                          scope=\"col\"\r\n                                          colSpan=\"3\"\r\n                                          className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                        ></th>\r\n                                        <th\r\n                                          scope=\"col\"\r\n                                          className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                        >\r\n                                          {_t(t(\"Paid\"))}\r\n                                        </th>\r\n\r\n                                        <th\r\n                                          scope=\"col\"\r\n                                          className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                        >\r\n                                          <input\r\n                                            type=\"number\"\r\n                                            step=\"0.01\"\r\n                                            min=\"0\"\r\n                                            className=\"form-control p-0 text-center\"\r\n                                            name=\"paid\"\r\n                                            value={newItem.paid}\r\n                                            onChange={handleChange}\r\n                                            placeholder=\"In usd\"\r\n                                            required\r\n                                          />\r\n                                        </th>\r\n                                      </tr>\r\n                                      <tr>\r\n                                        <th\r\n                                          scope=\"col\"\r\n                                          colSpan=\"3\"\r\n                                          className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                        ></th>\r\n                                        <th\r\n                                          scope=\"col\"\r\n                                          className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                        >\r\n                                          {_t(t(\"Due\"))}\r\n                                        </th>\r\n\r\n                                        <th\r\n                                          scope=\"col\"\r\n                                          className=\"sm-text text-capitalize align-middle text-center border-1 border\"\r\n                                        >\r\n                                          {currencySymbolLeft()}\r\n                                          {formatPrice(\r\n                                            handleGetTotal() - newItem.paid\r\n                                          )}\r\n                                          {currencySymbolRight()}\r\n                                        </th>\r\n                                      </tr>\r\n                                    </tfoot>\r\n                                  </table>\r\n                                </div>\r\n                              ),\r\n                            ]}\r\n\r\n                            <div className=\"form-group mt-4 pb-2\">\r\n                              <div className=\"col-lg-12\">\r\n                                <button\r\n                                  className=\"btn btn-primary px-5\"\r\n                                  type=\"submit\"\r\n                                  disabled={newItem.branch === null}\r\n                                >\r\n                                  {_t(t(\"Save\"))}\r\n                                </button>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </form>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* Rightbar contents end*/}\r\n          </div>\r\n        </div>\r\n      </main>\r\n      {/* main body ends */}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default IngredientPurchase;\r\n"]},"metadata":{},"sourceType":"module"}