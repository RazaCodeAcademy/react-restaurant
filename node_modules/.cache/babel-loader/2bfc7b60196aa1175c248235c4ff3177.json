{"ast":null,"code":"import _defineProperty from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _objectSpread from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useContext,useState}from\"react\";import{useHistory}from\"react-router-dom\";//axios and base url\nimport axios from\"axios\";import{BASE_URL}from\"../../BaseUrl\";//functions\nimport{_t,tableLoading}from\"../../functions/Functions\";import{useTranslation}from\"react-i18next\";//3rd party packages\nimport{Helmet}from\"react-helmet\";import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";//context consumer\nimport{SettingsContext}from\"../../contexts/Settings\";var InstallationUser=function InstallationUser(){var _useTranslation=useTranslation(),t=_useTranslation.t;var history=useHistory();//getting context values here\nvar _useContext=useContext(SettingsContext),loading=_useContext.loading,setLoading=_useContext.setLoading,dataPaginating=_useContext.dataPaginating;// States hook here\nvar _useState=useState({name:null,email:null,phn_no:null,password:null,password_confirmation:null,purchase_key:null,ip_address:null,domain_name:null}),_useState2=_slicedToArray(_useState,2),details=_useState2[0],setDetails=_useState2[1];//useEffect == componentDidMount()\nuseEffect(function(){function fetchMyAPI(){return _fetchMyAPI.apply(this,arguments);}function _fetchMyAPI(){_fetchMyAPI=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=BASE_URL+\"/setup/check_ip_domain\";_context.next=3;return axios.get(url);case 3:response=_context.sent;setDetails(_objectSpread(_objectSpread({},details),{},{ip_address:response.data[0],domain_name:response.data[1]}));setLoading(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return _fetchMyAPI.apply(this,arguments);}fetchMyAPI();},[]);//set data\nvar handleChange=function handleChange(e){setDetails(_objectSpread(_objectSpread({},details),{},_defineProperty({},e.target.name,e.target.value)));};//save data\nvar handleSubmit=function handleSubmit(e){e.preventDefault();if(details.password===details.password_confirmation){setLoading(true);var formData={purchase_key:details.purchase_key,ip_address:details.ip_address,domain_name:details.domain_name};var verifyUrl=window.location.protocol+\"//verify.softtech-it.com/api/khadyo-verify-purchase-code\";return axios.post(verifyUrl,formData).then(function(response){if(response.data===\"continue\"){var url=BASE_URL+\"/setup/admin/store\";return axios.post(url,details).then(function(res){setLoading(false);if(res.data===\"ok\"){history.push(\"/installation/congratulation\");}else{setLoading(false);toast.error(\"\".concat(_t(t(\"Something went wrong, please try again\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}}).catch(function(){setLoading(false);toast.error(\"\".concat(_t(t(\"Something went wrong, please try again\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});});}else{setLoading(false);if(response.data===\"notKhadyo\"){toast.error(\"\".concat(_t(t(\"You inserted a wrong purchase code, Please purchase our item from CODECANYON for a valid code\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}if(response.data===\"invalidKey\"){toast.error(\"\".concat(_t(t(\"This purchase key is not valid\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}if(response.data!==\"invalidKey\"&&response.data!==\"notKhadyo\"&&response.data!==\"continue\"){toast.error(\"This purchase key has already been used in \".concat(response.data,\" ,contact the support team to transfer domain.\"),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}}}).catch(function(err){setLoading(false);toast.error(\"\".concat(_t(t(\"Something went wrong, please try again\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});});}else{toast.error(\"\".concat(_t(t(\"Password confirmation does not match\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Helmet,null,/*#__PURE__*/React.createElement(\"title\",null,\"Add User\")),/*#__PURE__*/React.createElement(\"div\",{id:\"main\",className:\"main-height-100\",\"data-simplebar\":true},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row t-mt-10 gx-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-10 offset-1 t-mb-30 mb-lg-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"t-bg-white\"},/*#__PURE__*/React.createElement(\"div\",{className:\"installation-full-page\",\"data-simplebar\":true},/*#__PURE__*/React.createElement(\"div\",{className:\"t-pl-15 t-pr-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(dataPaginating&&\"loading\")}),loading===true?tableLoading():/*#__PURE__*/React.createElement(\"div\",{key:\"smtp-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 align-items-center t-pt-15 t-pb-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-lg-5 t-mb-15 mb-md-0\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list fk-breadcrumb\"},/*#__PURE__*/React.createElement(\"li\",{className:\"fk-breadcrumb__list\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-lg-7\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-3 align-items-center\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"text-center mb-5\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"text-success font-weight-bold text-uppercase\"},\"Hey, You are nearly there\"),/*#__PURE__*/React.createElement(\"h5\",{className:\"font-weight-bold\"},\"Add an admin to use the system\")),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row mb-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"name\",className:\"col-md-4 col-form-label text-md-right\"},\"Name\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"input\",{placeholder:\"Enter full name\",id:\"name\",type:\"text\",className:\"form-control\",name:\"name\",value:details.name,onChange:handleChange,required:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row mb-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"email\",className:\"col-md-4 col-form-label text-md-right\"},\"E-Mail Address\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"input\",{id:\"email\",placeholder:\"Enter email\",type:\"email\",className:\"form-control\",name:\"email\",value:details.email,onChange:handleChange,required:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row mb-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"phn_no\",className:\"col-md-4 col-form-label text-md-right\"},\"Phone No.\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"input\",{placeholder:\"Enter phone number\",id:\"phn_no\",type:\"number\",className:\"form-control\",name:\"phn_no\",value:details.phn_no,onChange:handleChange,required:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row mb-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"password\",className:\"col-md-4 col-form-label text-md-right\"},\"Password\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"input\",{id:\"password\",placeholder:\"Enter password\",type:\"password\",className:\"form-control\",name:\"password\",value:details.password,onChange:handleChange,required:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row mb-3\"},/*#__PURE__*/React.createElement(\"label\",{for:\"password-confirm\",className:\"col-md-4 col-form-label text-md-right\"},\"Confirm Password\"),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 mb-3\"},/*#__PURE__*/React.createElement(\"input\",{id:\"password-confirm\",placeholder:\"Enter confirm password\",type:\"password\",className:\"form-control\",name:\"password_confirmation\",value:details.password_confirmation,onChange:handleChange,required:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row mb-3 mt-4\"},/*#__PURE__*/React.createElement(\"label\",{className:\"col-md-4 col-form-label text-md-right\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"list-group ml-0 pl-0\"},/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item text-semibold text-primary border-0 pl-0\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-info mr-2\"}),\"Important information\"),/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item text-semibold border-0 pl-0 sm-text\"},\"You can use this\",\" \",/*#__PURE__*/React.createElement(\"span\",{className:\"text-secondary\"},\"purchase code\"),\" \",\"only in one domain. Once used, you can only transfer the website in it's subdomains. The main domain can not be changed unless you verify your purchase code from the support team of this software. And this support will not be free.\"),/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item text-semibold border-0 pl-0 sm-text\"},\"You can install in localhost, it will not affect your live server installation with the same purchase code.\"),/*#__PURE__*/React.createElement(\"li\",{className:\"list-group-item text-semibold text-secondary border-0 pl-0 sm-text\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-info mr-2\"}),\"You need internet connection to save these informations\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row mb-3 align-items-center\"},/*#__PURE__*/React.createElement(\"label\",{for:\"purchase_key\",className:\"col-md-4 col-form-label text-md-right\"},\"Your Purchase Code\",\" \",/*#__PURE__*/React.createElement(\"a\",{href:\"https://help.market.envato.com/hc/en-us/articles/202822600-Where-Is-My-Purchase-Code-\",target:\"_blank\",rel:\"noopener noreferrer\",className:\"ml-2 text-info\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-info\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6\"},/*#__PURE__*/React.createElement(\"textarea\",{placeholder:\"Enter your purchase code here\",id:\"purchase_key\",type:\"text\",className:\"form-control pt-4\",name:\"purchase_key\",value:details.purchase_key,onChange:handleChange,required:true}))),/*#__PURE__*/React.createElement(\"div\",{className:\"form-group row mb-3\"},/*#__PURE__*/React.createElement(\"label\",{className:\"col-md-4 col-form-label text-md-right\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 mb-3\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-primary px-5\"},\"Save\")))))))))))));};export default InstallationUser;","map":{"version":3,"sources":["/Users/raza/Downloads/khadyo_source_code/client/src/resources/install/InstallationUser.js"],"names":["React","useEffect","useContext","useState","useHistory","axios","BASE_URL","_t","tableLoading","useTranslation","Helmet","toast","SettingsContext","InstallationUser","t","history","loading","setLoading","dataPaginating","name","email","phn_no","password","password_confirmation","purchase_key","ip_address","domain_name","details","setDetails","fetchMyAPI","url","get","response","data","handleChange","e","target","value","handleSubmit","preventDefault","formData","verifyUrl","window","location","protocol","post","then","res","push","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","className","catch","err"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n//axios and base url\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../../BaseUrl\";\r\n\r\n//functions\r\nimport { _t, tableLoading } from \"../../functions/Functions\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\n//3rd party packages\r\nimport { Helmet } from \"react-helmet\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\n//context consumer\r\nimport { SettingsContext } from \"../../contexts/Settings\";\r\n\r\nconst InstallationUser = () => {\r\n  const { t } = useTranslation();\r\n  const history = useHistory();\r\n  //getting context values here\r\n  let { loading, setLoading, dataPaginating } = useContext(SettingsContext);\r\n\r\n  // States hook here\r\n  const [details, setDetails] = useState({\r\n    name: null,\r\n    email: null,\r\n    phn_no: null,\r\n    password: null,\r\n    password_confirmation: null,\r\n    purchase_key: null,\r\n    ip_address: null,\r\n    domain_name: null,\r\n  });\r\n\r\n  //useEffect == componentDidMount()\r\n  useEffect(() => {\r\n    async function fetchMyAPI() {\r\n      const url = BASE_URL + \"/setup/check_ip_domain\";\r\n      let response = await axios.get(url);\r\n      setDetails({\r\n        ...details,\r\n        ip_address: response.data[0],\r\n        domain_name: response.data[1],\r\n      });\r\n      setLoading(false);\r\n    }\r\n    fetchMyAPI();\r\n  }, []);\r\n\r\n  //set data\r\n  const handleChange = (e) => {\r\n    setDetails({\r\n      ...details,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  //save data\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (details.password === details.password_confirmation) {\r\n      setLoading(true);\r\n      let formData = {\r\n        purchase_key: details.purchase_key,\r\n        ip_address: details.ip_address,\r\n        domain_name: details.domain_name,\r\n      };\r\n      const verifyUrl =\r\n        window.location.protocol +\r\n        \"//verify.softtech-it.com/api/khadyo-verify-purchase-code\";\r\n      return axios\r\n        .post(verifyUrl, formData)\r\n        .then((response) => {\r\n          if (response.data === \"continue\") {\r\n            const url = BASE_URL + \"/setup/admin/store\";\r\n            return axios\r\n              .post(url, details)\r\n              .then((res) => {\r\n                setLoading(false);\r\n                if (res.data === \"ok\") {\r\n                  history.push(\"/installation/congratulation\");\r\n                } else {\r\n                  setLoading(false);\r\n                  toast.error(\r\n                    `${_t(t(\"Something went wrong, please try again\"))}`,\r\n                    {\r\n                      position: \"bottom-center\",\r\n                      autoClose: 10000,\r\n                      hideProgressBar: false,\r\n                      closeOnClick: true,\r\n                      pauseOnHover: true,\r\n                      className: \"text-center toast-notification\",\r\n                    }\r\n                  );\r\n                }\r\n              })\r\n              .catch(() => {\r\n                setLoading(false);\r\n                toast.error(\r\n                  `${_t(t(\"Something went wrong, please try again\"))}`,\r\n                  {\r\n                    position: \"bottom-center\",\r\n                    autoClose: 10000,\r\n                    hideProgressBar: false,\r\n                    closeOnClick: true,\r\n                    pauseOnHover: true,\r\n                    className: \"text-center toast-notification\",\r\n                  }\r\n                );\r\n              });\r\n          } else {\r\n            setLoading(false);\r\n            if (response.data === \"notKhadyo\") {\r\n              toast.error(\r\n                `${_t(\r\n                  t(\r\n                    \"You inserted a wrong purchase code, Please purchase our item from CODECANYON for a valid code\"\r\n                  )\r\n                )}`,\r\n                {\r\n                  position: \"bottom-center\",\r\n                  autoClose: 10000,\r\n                  hideProgressBar: false,\r\n                  closeOnClick: true,\r\n                  pauseOnHover: true,\r\n                  className: \"text-center toast-notification\",\r\n                }\r\n              );\r\n            }\r\n\r\n            if (response.data === \"invalidKey\") {\r\n              toast.error(`${_t(t(\"This purchase key is not valid\"))}`, {\r\n                position: \"bottom-center\",\r\n                autoClose: 10000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                className: \"text-center toast-notification\",\r\n              });\r\n            }\r\n\r\n            if (\r\n              response.data !== \"invalidKey\" &&\r\n              response.data !== \"notKhadyo\" &&\r\n              response.data !== \"continue\"\r\n            ) {\r\n              toast.error(\r\n                `This purchase key has already been used in ${response.data} ,contact the support team to transfer domain.`,\r\n                {\r\n                  position: \"bottom-center\",\r\n                  autoClose: 10000,\r\n                  hideProgressBar: false,\r\n                  closeOnClick: true,\r\n                  pauseOnHover: true,\r\n                  className: \"text-center toast-notification\",\r\n                }\r\n              );\r\n            }\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          setLoading(false);\r\n          toast.error(`${_t(t(\"Something went wrong, please try again\"))}`, {\r\n            position: \"bottom-center\",\r\n            autoClose: 10000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            className: \"text-center toast-notification\",\r\n          });\r\n        });\r\n    } else {\r\n      toast.error(`${_t(t(\"Password confirmation does not match\"))}`, {\r\n        position: \"bottom-center\",\r\n        autoClose: 10000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        className: \"text-center toast-notification\",\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Add User</title>\r\n      </Helmet>\r\n\r\n      {/* main body */}\r\n      <div id=\"main\" className=\"main-height-100\" data-simplebar>\r\n        <div className=\"container\">\r\n          <div className=\"row t-mt-10 gx-2\">\r\n            {/* Rightbar contents */}\r\n            <div className=\"col-10 offset-1 t-mb-30 mb-lg-0\">\r\n              <div className=\"t-bg-white\">\r\n                <div className=\"installation-full-page\" data-simplebar>\r\n                  <div className=\"t-pl-15 t-pr-15\">\r\n                    {/* next page data spin loading */}\r\n                    <div className={`${dataPaginating && \"loading\"}`}></div>\r\n                    {/* spin loading ends */}\r\n\r\n                    {/* Loading effect */}\r\n                    {loading === true ? (\r\n                      tableLoading()\r\n                    ) : (\r\n                      <div key=\"smtp-form\">\r\n                        <div className=\"row gx-2 align-items-center t-pt-15 t-pb-15\">\r\n                          <div className=\"col-md-6 col-lg-5 t-mb-15 mb-md-0\">\r\n                            <ul className=\"t-list fk-breadcrumb\">\r\n                              <li className=\"fk-breadcrumb__list\"></li>\r\n                            </ul>\r\n                          </div>\r\n                          <div className=\"col-md-6 col-lg-7\">\r\n                            <div className=\"row gx-3 align-items-center\"></div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Form starts here */}\r\n                        <div className=\"text-center mb-5\">\r\n                          <h3 className=\"text-success font-weight-bold text-uppercase\">\r\n                            Hey, You are nearly there\r\n                          </h3>\r\n                          <h5 className=\"font-weight-bold\">\r\n                            Add an admin to use the system\r\n                          </h5>\r\n                        </div>\r\n                        <form onSubmit={handleSubmit}>\r\n                          <div className=\"form-group row mb-3\">\r\n                            <label\r\n                              for=\"name\"\r\n                              className=\"col-md-4 col-form-label text-md-right\"\r\n                            >\r\n                              Name\r\n                            </label>\r\n                            <div className=\"col-md-6\">\r\n                              <input\r\n                                placeholder=\"Enter full name\"\r\n                                id=\"name\"\r\n                                type=\"text\"\r\n                                className=\"form-control\"\r\n                                name=\"name\"\r\n                                value={details.name}\r\n                                onChange={handleChange}\r\n                                required\r\n                              />\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"form-group row mb-3\">\r\n                            <label\r\n                              for=\"email\"\r\n                              className=\"col-md-4 col-form-label text-md-right\"\r\n                            >\r\n                              E-Mail Address\r\n                            </label>\r\n\r\n                            <div className=\"col-md-6\">\r\n                              <input\r\n                                id=\"email\"\r\n                                placeholder=\"Enter email\"\r\n                                type=\"email\"\r\n                                className=\"form-control\"\r\n                                name=\"email\"\r\n                                value={details.email}\r\n                                onChange={handleChange}\r\n                                required\r\n                              />\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"form-group row mb-3\">\r\n                            <label\r\n                              for=\"phn_no\"\r\n                              className=\"col-md-4 col-form-label text-md-right\"\r\n                            >\r\n                              Phone No.\r\n                            </label>\r\n                            <div className=\"col-md-6\">\r\n                              <input\r\n                                placeholder=\"Enter phone number\"\r\n                                id=\"phn_no\"\r\n                                type=\"number\"\r\n                                className=\"form-control\"\r\n                                name=\"phn_no\"\r\n                                value={details.phn_no}\r\n                                onChange={handleChange}\r\n                                required\r\n                              />\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"form-group row mb-3\">\r\n                            <label\r\n                              for=\"password\"\r\n                              className=\"col-md-4 col-form-label text-md-right\"\r\n                            >\r\n                              Password\r\n                            </label>\r\n\r\n                            <div className=\"col-md-6\">\r\n                              <input\r\n                                id=\"password\"\r\n                                placeholder=\"Enter password\"\r\n                                type=\"password\"\r\n                                className=\"form-control\"\r\n                                name=\"password\"\r\n                                value={details.password}\r\n                                onChange={handleChange}\r\n                                required\r\n                              />\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"form-group row mb-3\">\r\n                            <label\r\n                              for=\"password-confirm\"\r\n                              className=\"col-md-4 col-form-label text-md-right\"\r\n                            >\r\n                              Confirm Password\r\n                            </label>\r\n\r\n                            <div className=\"col-md-6 mb-3\">\r\n                              <input\r\n                                id=\"password-confirm\"\r\n                                placeholder=\"Enter confirm password\"\r\n                                type=\"password\"\r\n                                className=\"form-control\"\r\n                                name=\"password_confirmation\"\r\n                                value={details.password_confirmation}\r\n                                onChange={handleChange}\r\n                                required\r\n                              />\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"form-group row mb-3 mt-4\">\r\n                            <label className=\"col-md-4 col-form-label text-md-right\"></label>\r\n                            <div className=\"col-md-6\">\r\n                              <ul className=\"list-group ml-0 pl-0\">\r\n                                <li className=\"list-group-item text-semibold text-primary border-0 pl-0\">\r\n                                  <i className=\"fa fa-info mr-2\"></i>\r\n                                  Important information\r\n                                </li>\r\n\r\n                                <li className=\"list-group-item text-semibold border-0 pl-0 sm-text\">\r\n                                  You can use this{\" \"}\r\n                                  <span className=\"text-secondary\">\r\n                                    purchase code\r\n                                  </span>{\" \"}\r\n                                  only in one domain. Once used, you can only\r\n                                  transfer the website in it's subdomains. The\r\n                                  main domain can not be changed unless you\r\n                                  verify your purchase code from the support\r\n                                  team of this software. And this support will\r\n                                  not be free.\r\n                                </li>\r\n                                <li className=\"list-group-item text-semibold border-0 pl-0 sm-text\">\r\n                                  You can install in localhost, it will not\r\n                                  affect your live server installation with the\r\n                                  same purchase code.\r\n                                </li>\r\n                                <li className=\"list-group-item text-semibold text-secondary border-0 pl-0 sm-text\">\r\n                                  <i className=\"fa fa-info mr-2\"></i>You need\r\n                                  internet connection to save these informations\r\n                                </li>\r\n                              </ul>\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"form-group row mb-3 align-items-center\">\r\n                            <label\r\n                              for=\"purchase_key\"\r\n                              className=\"col-md-4 col-form-label text-md-right\"\r\n                            >\r\n                              Your Purchase Code{\" \"}\r\n                              <a\r\n                                href=\"https://help.market.envato.com/hc/en-us/articles/202822600-Where-Is-My-Purchase-Code-\"\r\n                                target=\"_blank\"\r\n                                rel=\"noopener noreferrer\"\r\n                                className=\"ml-2 text-info\"\r\n                              >\r\n                                <i className=\"fa fa-info\"></i>\r\n                              </a>\r\n                            </label>\r\n                            <div className=\"col-md-6\">\r\n                              <textarea\r\n                                placeholder=\"Enter your purchase code here\"\r\n                                id=\"purchase_key\"\r\n                                type=\"text\"\r\n                                className=\"form-control pt-4\"\r\n                                name=\"purchase_key\"\r\n                                value={details.purchase_key}\r\n                                onChange={handleChange}\r\n                                required\r\n                              />\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div className=\"form-group row mb-3\">\r\n                            <label className=\"col-md-4 col-form-label text-md-right\"></label>\r\n\r\n                            <div className=\"col-md-6 mb-3\">\r\n                              <button\r\n                                type=\"submit\"\r\n                                className=\"btn btn-primary px-5\"\r\n                              >\r\n                                Save\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                        </form>\r\n\r\n                        {/* Form ends here */}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* Rightbar contents end*/}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* main body ends */}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default InstallationUser;\r\n"]},"metadata":{},"sourceType":"module"}