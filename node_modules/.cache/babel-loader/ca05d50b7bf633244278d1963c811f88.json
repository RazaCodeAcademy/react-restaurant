{"ast":null,"code":"var _jsxFileName = \"/Users/raza/Downloads/khadyo_source_code/client/src/resources/install/DbSetup.js\";\nimport React, { useEffect, useContext, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\"; //axios and base url\n\nimport axios from \"axios\";\nimport { BASE_URL } from \"../../BaseUrl\"; //functions\n\nimport { _t, tableLoading } from \"../../functions/Functions\";\nimport { useTranslation } from \"react-i18next\"; //3rd party packages\n\nimport { Helmet } from \"react-helmet\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\"; //context consumer\n\nimport { SettingsContext } from \"../../contexts/Settings\";\n\nconst DbSetup = () => {\n  const {\n    t\n  } = useTranslation();\n  const history = useHistory(); //getting context values here\n\n  let {\n    loading,\n    setLoading,\n    dataPaginating\n  } = useContext(SettingsContext); // States hook here\n  //new item\n\n  let [dbData, setDbData] = useState({\n    DB_HOST: \"localhost\",\n    DB_PORT: \"3306\",\n    DB_DATABASE: null,\n    DB_USERNAME: null,\n    DB_PASSWORD: null\n  }); //useEffect == componentDidMount()\n\n  useEffect(() => {\n    setLoading(false);\n  }, []); //set data\n\n  const handleChange = e => {\n    setDbData({ ...dbData,\n      [e.target.name]: e.target.value\n    });\n  }; //save data\n\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    setLoading(true);\n    const url = BASE_URL + \"/setup/database\";\n    return axios.post(url, dbData).then(() => {\n      handleCheckDbConnection();\n    }).catch(err => {\n      setLoading(false);\n    });\n  }; //check db connection\n\n\n  const handleCheckDbConnection = () => {\n    const url = BASE_URL + \"/check-database-connection\";\n    return axios.get(url).then(res => {\n      if (res.data === \"ok\") {\n        setLoading(false);\n        history.push(\"/installation/import-database\");\n      } else {\n        setLoading(false);\n        toast.error(`${_t(t(\"Something went wrong, could not establish database connection\"))}`, {\n          position: \"bottom-center\",\n          autoClose: 10000,\n          hideProgressBar: false,\n          closeOnClick: true,\n          pauseOnHover: true,\n          className: \"text-center toast-notification\"\n        });\n      }\n    }).catch(() => {\n      setLoading(false);\n      toast.error(`${_t(t(\"Something went wrong, please try again\"))}`, {\n        position: \"bottom-center\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        className: \"text-center toast-notification\"\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Helmet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, \"Setup your database\")), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"main\",\n    className: \"main-height-100\",\n    \"data-simplebar\": true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row t-mt-10 gx-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-10 offset-1 t-mb-30 mb-lg-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"t-bg-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"installation-full-page\",\n    \"data-simplebar\": true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"t-pl-15 t-pr-15\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `${dataPaginating && \"loading\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 21\n    }\n  }), loading === true ? tableLoading() : /*#__PURE__*/React.createElement(\"div\", {\n    key: \"smtp-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gx-2 align-items-center t-pt-15 t-pb-15\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6 col-lg-5 t-mb-15 mb-md-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"t-list fk-breadcrumb\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"fk-breadcrumb__list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 31\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6 col-lg-7\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gx-3 align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"text-success font-weight-bold text-uppercase\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 27\n    }\n  }, \"Setup your database\")), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"col-12 col-md-8 offset-md-2 sm-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 29\n    }\n  }, \"Database Host\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    placeholder: \"Database Host\",\n    name: \"DB_HOST\",\n    value: dbData.DB_HOST,\n    onChange: handleChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 29\n    }\n  }, \"Database Port\", \" \", /*#__PURE__*/React.createElement(\"small\", {\n    className: \"text-secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 31\n    }\n  }, \"(3306 *default, 3308, 8888, 8889, 7888 etc..)\", /*#__PURE__*/React.createElement(\"a\", {\n    href: \"https://www.networkinghowtos.com/howto/common-database-server-port-numbers/\",\n    target: \"_blank\",\n    rel: \"noopener noreferrer\",\n    className: \"t-link\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fa fa-info-circle ml-2 lg-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 35\n    }\n  })))), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    placeholder: \"Database Port\",\n    name: \"DB_PORT\",\n    value: dbData.DB_PORT,\n    onChange: handleChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 29\n    }\n  }, \"Database Name\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    placeholder: \"Database Name\",\n    name: \"DB_DATABASE\",\n    value: dbData.DB_DATABASE,\n    onChange: handleChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 29\n    }\n  }, \"Database Username\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    placeholder: \"Database Username\",\n    name: \"DB_USERNAME\",\n    value: dbData.DB_USERNAME,\n    onChange: handleChange,\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"form-group mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 29\n    }\n  }, \"Database Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    className: \"form-control\",\n    placeholder: \"Database Password\",\n    type: \"password\",\n    name: \"DB_PASSWORD\",\n    value: dbData.DB_PASSWORD,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"text-uppercase mt-4 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-secondary text-uppercase\",\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 29\n    }\n  }, \"Save the configuration\"))))))))))));\n};\n\nexport default DbSetup;","map":{"version":3,"sources":["/Users/raza/Downloads/khadyo_source_code/client/src/resources/install/DbSetup.js"],"names":["React","useEffect","useContext","useState","useHistory","axios","BASE_URL","_t","tableLoading","useTranslation","Helmet","toast","SettingsContext","DbSetup","t","history","loading","setLoading","dataPaginating","dbData","setDbData","DB_HOST","DB_PORT","DB_DATABASE","DB_USERNAME","DB_PASSWORD","handleChange","e","target","name","value","handleSubmit","preventDefault","url","post","then","handleCheckDbConnection","catch","err","get","res","data","push","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","className"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n//axios and base url\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../../BaseUrl\";\r\n\r\n//functions\r\nimport { _t, tableLoading } from \"../../functions/Functions\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\n//3rd party packages\r\nimport { Helmet } from \"react-helmet\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n//context consumer\r\nimport { SettingsContext } from \"../../contexts/Settings\";\r\n\r\nconst DbSetup = () => {\r\n  const { t } = useTranslation();\r\n  const history = useHistory();\r\n  //getting context values here\r\n  let { loading, setLoading, dataPaginating } = useContext(SettingsContext);\r\n\r\n  // States hook here\r\n  //new item\r\n  let [dbData, setDbData] = useState({\r\n    DB_HOST: \"localhost\",\r\n    DB_PORT: \"3306\",\r\n    DB_DATABASE: null,\r\n    DB_USERNAME: null,\r\n    DB_PASSWORD: null,\r\n  });\r\n\r\n  //useEffect == componentDidMount()\r\n  useEffect(() => {\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  //set data\r\n  const handleChange = (e) => {\r\n    setDbData({\r\n      ...dbData,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  //save data\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    const url = BASE_URL + \"/setup/database\";\r\n    return axios\r\n      .post(url, dbData)\r\n      .then(() => {\r\n        handleCheckDbConnection();\r\n      })\r\n      .catch((err) => {\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  //check db connection\r\n  const handleCheckDbConnection = () => {\r\n    const url = BASE_URL + \"/check-database-connection\";\r\n    return axios\r\n      .get(url)\r\n      .then((res) => {\r\n        if (res.data === \"ok\") {\r\n          setLoading(false);\r\n          history.push(\"/installation/import-database\");\r\n        } else {\r\n          setLoading(false);\r\n          toast.error(\r\n            `${_t(\r\n              t(\"Something went wrong, could not establish database connection\")\r\n            )}`,\r\n            {\r\n              position: \"bottom-center\",\r\n              autoClose: 10000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              className: \"text-center toast-notification\",\r\n            }\r\n          );\r\n        }\r\n      })\r\n      .catch(() => {\r\n        setLoading(false);\r\n        toast.error(`${_t(t(\"Something went wrong, please try again\"))}`, {\r\n          position: \"bottom-center\",\r\n          autoClose: 10000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          className: \"text-center toast-notification\",\r\n        });\r\n      });\r\n  };\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>Setup your database</title>\r\n      </Helmet>\r\n\r\n      {/* main body */}\r\n      <div id=\"main\" className=\"main-height-100\" data-simplebar>\r\n        <div className=\"container\">\r\n          <div className=\"row t-mt-10 gx-2\">\r\n            {/* Rightbar contents */}\r\n            <div className=\"col-10 offset-1 t-mb-30 mb-lg-0\">\r\n              <div className=\"t-bg-white\">\r\n                <div className=\"installation-full-page\" data-simplebar>\r\n                  <div className=\"t-pl-15 t-pr-15\">\r\n                    {/* next page data spin loading */}\r\n                    <div className={`${dataPaginating && \"loading\"}`}></div>\r\n                    {/* spin loading ends */}\r\n\r\n                    {/* Loading effect */}\r\n                    {loading === true ? (\r\n                      tableLoading()\r\n                    ) : (\r\n                      <div key=\"smtp-form\">\r\n                        <div className=\"row gx-2 align-items-center t-pt-15 t-pb-15\">\r\n                          <div className=\"col-md-6 col-lg-5 t-mb-15 mb-md-0\">\r\n                            <ul className=\"t-list fk-breadcrumb\">\r\n                              <li className=\"fk-breadcrumb__list\"></li>\r\n                            </ul>\r\n                          </div>\r\n                          <div className=\"col-md-6 col-lg-7\">\r\n                            <div className=\"row gx-3 align-items-center\"></div>\r\n                          </div>\r\n                        </div>\r\n\r\n                        {/* Form starts here */}\r\n                        <div className=\"text-center\">\r\n                          <h3 className=\"text-success font-weight-bold text-uppercase\">\r\n                            Setup your database\r\n                          </h3>\r\n                        </div>\r\n                        <form\r\n                          onSubmit={handleSubmit}\r\n                          className=\"col-12 col-md-8 offset-md-2 sm-text\"\r\n                        >\r\n                          <div className=\"form-group mb-3\">\r\n                            <label>Database Host</label>\r\n                            <input\r\n                              className=\"form-control\"\r\n                              placeholder=\"Database Host\"\r\n                              name=\"DB_HOST\"\r\n                              value={dbData.DB_HOST}\r\n                              onChange={handleChange}\r\n                              required\r\n                            />\r\n                          </div>\r\n\r\n                          <div className=\"form-group mb-3\">\r\n                            <label>\r\n                              Database Port{\" \"}\r\n                              <small className=\"text-secondary\">\r\n                                (3306 *default, 3308, 8888, 8889, 7888 etc..)\r\n                                <a\r\n                                  href=\"https://www.networkinghowtos.com/howto/common-database-server-port-numbers/\"\r\n                                  target=\"_blank\"\r\n                                  rel=\"noopener noreferrer\"\r\n                                  className=\"t-link\"\r\n                                >\r\n                                  <i className=\"fa fa-info-circle ml-2 lg-text\"></i>\r\n                                </a>\r\n                              </small>\r\n                            </label>\r\n                            <input\r\n                              className=\"form-control\"\r\n                              placeholder=\"Database Port\"\r\n                              name=\"DB_PORT\"\r\n                              value={dbData.DB_PORT}\r\n                              onChange={handleChange}\r\n                              required\r\n                            />\r\n                          </div>\r\n                          <div className=\"form-group mb-3\">\r\n                            <label>Database Name</label>\r\n                            <input\r\n                              className=\"form-control\"\r\n                              placeholder=\"Database Name\"\r\n                              name=\"DB_DATABASE\"\r\n                              value={dbData.DB_DATABASE}\r\n                              onChange={handleChange}\r\n                              required\r\n                            />\r\n                          </div>\r\n\r\n                          <div className=\"form-group mb-3\">\r\n                            <label>Database Username</label>\r\n                            <input\r\n                              className=\"form-control\"\r\n                              placeholder=\"Database Username\"\r\n                              name=\"DB_USERNAME\"\r\n                              value={dbData.DB_USERNAME}\r\n                              onChange={handleChange}\r\n                              required\r\n                            />\r\n                          </div>\r\n\r\n                          <div className=\"form-group mb-3\">\r\n                            <label>Database Password</label>\r\n                            <input\r\n                              className=\"form-control\"\r\n                              placeholder=\"Database Password\"\r\n                              type=\"password\"\r\n                              name=\"DB_PASSWORD\"\r\n                              value={dbData.DB_PASSWORD}\r\n                              onChange={handleChange}\r\n                            />\r\n                          </div>\r\n\r\n                          <div className=\"text-uppercase mt-4 mb-3\">\r\n                            <button\r\n                              className=\"btn btn-secondary text-uppercase\"\r\n                              type=\"submit\"\r\n                            >\r\n                              Save the configuration\r\n                            </button>\r\n                          </div>\r\n                        </form>\r\n                        {/* Form ends here */}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* Rightbar contents end*/}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      {/* main body ends */}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DbSetup;\r\n"]},"metadata":{},"sourceType":"module"}