{"ast":null,"code":"var _jsxFileName = \"/Users/raza/Downloads/khadyo_source_code/client/src/contexts/Settings.js\";\nimport React, { useState, useEffect } from \"react\"; //axios and base url\n\nimport axios from \"axios\";\nimport { BASE_URL } from \"../BaseUrl\"; //functions\n\nimport { getCookie, getSystemSettings } from \"../functions/Functions\"; //3rd party packages\n//creating context api\n\nconst SettingsContext = React.createContext();\n\nconst SettingsProvider = ({\n  children\n}) => {\n  // State hooks  here\n  //loading\n  const [loading, setLoading] = useState(false);\n  const [dataPaginating, setDataPaginating] = useState(false); //permission group\n\n  const [permissionGroup, setPermissionGroup] = useState(null);\n  const [permissionGroupForSearch, setPermissionGroupForSearch] = useState(null); //permissions\n\n  const [permissions, setPermissions] = useState(null); //languages\n\n  const [languageList, setLanguageList] = useState(null);\n  const [navLanguageList, setNavLanguageList] = useState(null);\n  const [languageListForSearch, setLanguageListForSearch] = useState(null); //currencies\n\n  const [currencyList, setCurrencyList] = useState(null);\n  const [navCurrencyList, setNavCurrencyList] = useState(null);\n  const [currencyListForSearch, setCurrencyListForSearch] = useState(null); //settings\n\n  const [generalSettings, setGeneralSettings] = useState(null); //smtp\n\n  const [smtp, setSmtp] = useState({\n    MAIL_MAILER: null,\n    MAIL_HOST: null,\n    MAIL_PORT: null,\n    MAIL_USERNAME: null,\n    MAIL_PASSWORD: null,\n    MAIL_ENCRYPTION: null,\n    MAIL_FROM_ADDRESS: null,\n    MAIL_FROM_NAME: null\n  }); // show manage stock value\n\n  const [showManageStock, setshowManageStock] = useState(true); // paypal \n\n  const [paymentDetails, setpaymentDetails] = useState([]);\n  const [paypal_client_id, setpaypal_client_id] = useState(null); //useEffect- to get data on render\n\n  useEffect(() => {\n    const fetchData = async () => {\n      let result = await checkInstall();\n\n      if (result === \"YES\") {\n        //call- unauthenticated\n        getLanguages();\n        getCurrency();\n        getSettings(); //call if authenticated\n\n        if (getCookie() !== undefined) {\n          getSmtp();\n          getPermissionGroups();\n        }\n      }\n    }; // show manage stock function\n\n\n    const updateManageStockValue = () => {\n      const url = BASE_URL + `/settings/show-manage-stock-menu-info`;\n      axios.get(url, {\n        headers: {\n          Authorization: `Bearer ${getCookie()}`\n        }\n      }).then(res => {\n        if (res.data.length == 0 || res.data[0].value == 1) {\n          setshowManageStock(true);\n        } else {\n          setshowManageStock(false);\n        }\n      });\n    };\n\n    const getpaypalpaid = () => {\n      const url = BASE_URL + `/get-payment-client-id`;\n      axios.get(url, {\n        headers: {\n          Authorization: `Bearer ${getCookie()}`\n        }\n      }).then(res => {\n        if (res.data === \" \") {\n          setpaypal_client_id(null);\n        } else {\n          setpaypal_client_id(res.data.value);\n        }\n\n        setpaymentDetails(res.data);\n      });\n    };\n\n    fetchData();\n    const checkMngStk = setInterval(updateManageStockValue, 5000);\n    const checkpaypal = setInterval(getpaypalpaid, 10000);\n    updateManageStockValue();\n    getpaypalpaid();\n    return () => {\n      clearInterval(checkMngStk, checkpaypal);\n    };\n  }, []); // install check\n\n  const checkInstall = async () => {\n    const url = BASE_URL + \"/check-install\";\n    let result = await axios.get(url);\n    return result.data;\n  }; //get all languages\n\n\n  const getLanguages = () => {\n    setLoading(true);\n    const langUrl = BASE_URL + \"/settings/get-lang\";\n    return axios.get(langUrl).then(res => {\n      setLanguageList(res.data[0]);\n      setNavLanguageList(res.data[1]);\n      setLanguageListForSearch(res.data[1]);\n      setLoading(false);\n    });\n  }; // get paginated languages\n\n\n  const setPaginatedLanguages = pageNo => {\n    setDataPaginating(true);\n    const langUrl = BASE_URL + \"/settings/get-lang?page=\" + pageNo;\n    return axios.get(langUrl).then(res => {\n      setLanguageList(res.data[0]);\n      setDataPaginating(false);\n    }).catch(error => {});\n  }; //get smtp settings\n\n\n  const getSmtp = () => {\n    setLoading(true);\n    const smtpUrl = BASE_URL + \"/settings/get-smtp\";\n    return axios.get(smtpUrl, {\n      headers: {\n        Authorization: `Bearer ${getCookie()}`\n      }\n    }).then(res => {\n      setSmtp({ ...smtp,\n        MAIL_MAILER: res.data[0].MAIL_MAILER,\n        MAIL_HOST: res.data[0].MAIL_HOST,\n        MAIL_PORT: res.data[0].MAIL_PORT,\n        MAIL_USERNAME: res.data[0].MAIL_USERNAME,\n        MAIL_PASSWORD: res.data[0].MAIL_PASSWORD,\n        MAIL_ENCRYPTION: res.data[0].MAIL_ENCRYPTION,\n        MAIL_FROM_ADDRESS: res.data[0].MAIL_FROM_ADDRESS,\n        MAIL_FROM_NAME: res.data[0].MAIL_FROM_NAME\n      });\n      setLoading(false);\n    });\n  }; //get permission groups\n\n\n  const getPermissionGroups = () => {\n    setLoading(true);\n    const permissionGroupUrl = BASE_URL + \"/settings/permission-group-list\";\n    return axios.get(permissionGroupUrl, {\n      headers: {\n        Authorization: `Bearer ${getCookie()}`\n      }\n    }).then(res => {\n      setPermissionGroup(res.data[0]);\n      setPermissionGroupForSearch(res.data[1]);\n      setPermissions(res.data[2]);\n      setLoading(false);\n    });\n  }; // get paginated groups\n\n\n  const setPaginatedGropus = pageNo => {\n    setDataPaginating(true);\n    const url = BASE_URL + \"/settings/permission-group-list?page=\" + pageNo;\n    return axios.get(url, {\n      headers: {\n        Authorization: `Bearer ${getCookie()}`\n      }\n    }).then(res => {\n      setPermissionGroup(res.data[0]);\n      setPermissionGroupForSearch(res.data[1]);\n      setPermissions(res.data[2]);\n      setDataPaginating(false);\n    }).catch(() => {});\n  }; //get all currency\n\n\n  const getCurrency = () => {\n    setLoading(true);\n    const currencyUrl = BASE_URL + \"/settings/get-currency\";\n    return axios.get(currencyUrl).then(res => {\n      setCurrencyList(res.data[0]);\n      setNavCurrencyList(res.data[1]);\n      setCurrencyListForSearch(res.data[1]);\n      setLoading(false);\n    });\n  }; // get paginated currency\n\n\n  const setPaginatedCurrencies = pageNo => {\n    setDataPaginating(true);\n    const currencyUrl = BASE_URL + \"/settings/get-currency?page=\" + pageNo;\n    return axios.get(currencyUrl).then(res => {\n      setCurrencyList(res.data[0]);\n      setDataPaginating(false);\n    }).catch(error => {});\n  }; //get all languages\n\n\n  const getSettings = () => {\n    setLoading(true);\n    const url = BASE_URL + \"/settings/general-settings\";\n    return axios.get(url).then(res => {\n      setGeneralSettings(res.data);\n      const favicon = document.getElementById(\"favicon\");\n      favicon.href = BASE_URL + getSystemSettings(res.data, \"favicon\");\n      setLoading(false);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(SettingsContext.Provider, {\n    value: {\n      //common\n      loading,\n      setLoading,\n      //general settings\n      generalSettings,\n      setGeneralSettings,\n      getLanguages,\n      getCurrency,\n      getSettings,\n      //currencies\n      currencyList,\n      setCurrencyList,\n      setPaginatedCurrencies,\n      navCurrencyList,\n      setNavCurrencyList,\n      currencyListForSearch,\n      setCurrencyListForSearch,\n      //languages\n      languageList,\n      setLanguageList,\n      setPaginatedLanguages,\n      navLanguageList,\n      setNavLanguageList,\n      languageListForSearch,\n      setLanguageListForSearch,\n      //smtp\n      smtp,\n      getSmtp,\n      setSmtp,\n      //permission group\n      getPermissionGroups,\n      permissionGroup,\n      setPermissionGroup,\n      setPaginatedGropus,\n      permissionGroupForSearch,\n      setPermissionGroupForSearch,\n      //permissions\n      permissions,\n      setPermissions,\n      //pagination\n      dataPaginating,\n      setDataPaginating,\n      //show  manage stock\n      showManageStock,\n      setshowManageStock,\n      // paypal_paypal_client_id\n      paypal_client_id,\n      setpaypal_client_id,\n      paymentDetails // setpaymentDetails\n\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 5\n    }\n  }, children);\n};\n\nexport { SettingsContext, SettingsProvider };","map":{"version":3,"sources":["/Users/raza/Downloads/khadyo_source_code/client/src/contexts/Settings.js"],"names":["React","useState","useEffect","axios","BASE_URL","getCookie","getSystemSettings","SettingsContext","createContext","SettingsProvider","children","loading","setLoading","dataPaginating","setDataPaginating","permissionGroup","setPermissionGroup","permissionGroupForSearch","setPermissionGroupForSearch","permissions","setPermissions","languageList","setLanguageList","navLanguageList","setNavLanguageList","languageListForSearch","setLanguageListForSearch","currencyList","setCurrencyList","navCurrencyList","setNavCurrencyList","currencyListForSearch","setCurrencyListForSearch","generalSettings","setGeneralSettings","smtp","setSmtp","MAIL_MAILER","MAIL_HOST","MAIL_PORT","MAIL_USERNAME","MAIL_PASSWORD","MAIL_ENCRYPTION","MAIL_FROM_ADDRESS","MAIL_FROM_NAME","showManageStock","setshowManageStock","paymentDetails","setpaymentDetails","paypal_client_id","setpaypal_client_id","fetchData","result","checkInstall","getLanguages","getCurrency","getSettings","undefined","getSmtp","getPermissionGroups","updateManageStockValue","url","get","headers","Authorization","then","res","data","length","value","getpaypalpaid","checkMngStk","setInterval","checkpaypal","clearInterval","langUrl","setPaginatedLanguages","pageNo","catch","error","smtpUrl","permissionGroupUrl","setPaginatedGropus","currencyUrl","setPaginatedCurrencies","favicon","document","getElementById","href"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\n//axios and base url\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../BaseUrl\";\r\n\r\n//functions\r\nimport { getCookie, getSystemSettings } from \"../functions/Functions\";\r\n\r\n//3rd party packages\r\n\r\n//creating context api\r\nconst SettingsContext = React.createContext();\r\n\r\nconst SettingsProvider = ({ children }) => {\r\n  // State hooks  here\r\n  //loading\r\n  const [loading, setLoading] = useState(false);\r\n  const [dataPaginating, setDataPaginating] = useState(false);\r\n\r\n  //permission group\r\n  const [permissionGroup, setPermissionGroup] = useState(null);\r\n  const [permissionGroupForSearch, setPermissionGroupForSearch] =\r\n    useState(null);\r\n\r\n  //permissions\r\n  const [permissions, setPermissions] = useState(null);\r\n\r\n  //languages\r\n  const [languageList, setLanguageList] = useState(null);\r\n  const [navLanguageList, setNavLanguageList] = useState(null);\r\n  const [languageListForSearch, setLanguageListForSearch] = useState(null);\r\n\r\n  //currencies\r\n  const [currencyList, setCurrencyList] = useState(null);\r\n  const [navCurrencyList, setNavCurrencyList] = useState(null);\r\n  const [currencyListForSearch, setCurrencyListForSearch] = useState(null);\r\n\r\n  //settings\r\n  const [generalSettings, setGeneralSettings] = useState(null);\r\n\r\n  //smtp\r\n  const [smtp, setSmtp] = useState({\r\n    MAIL_MAILER: null,\r\n    MAIL_HOST: null,\r\n    MAIL_PORT: null,\r\n    MAIL_USERNAME: null,\r\n    MAIL_PASSWORD: null,\r\n    MAIL_ENCRYPTION: null,\r\n    MAIL_FROM_ADDRESS: null,\r\n    MAIL_FROM_NAME: null,\r\n  });\r\n\r\n  // show manage stock value\r\n  const [showManageStock, setshowManageStock] = useState(true);\r\n\r\n  // paypal \r\n  const [paymentDetails, setpaymentDetails] = useState([]);\r\n  const [paypal_client_id, setpaypal_client_id] = useState(null);\r\n  //useEffect- to get data on render\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      let result = await checkInstall();\r\n      if (result === \"YES\") {\r\n        //call- unauthenticated\r\n        getLanguages();\r\n        getCurrency();\r\n        getSettings();\r\n\r\n        //call if authenticated\r\n        if (getCookie() !== undefined) {\r\n          getSmtp();\r\n          getPermissionGroups();\r\n        }\r\n      }\r\n    };\r\n\r\n    // show manage stock function\r\n    const updateManageStockValue = () => {\r\n      const url = BASE_URL + `/settings/show-manage-stock-menu-info`;\r\n      axios.get(url, {\r\n        headers: { Authorization: `Bearer ${getCookie()}` },\r\n      }).then((res) => {\r\n\r\n        if (res.data.length == 0 || res.data[0].value == 1) {\r\n          setshowManageStock(true);\r\n        } else {\r\n          setshowManageStock(false);\r\n        }\r\n      });\r\n    };\r\n\r\n    const getpaypalpaid = () => {\r\n      const url = BASE_URL + `/get-payment-client-id`;\r\n      axios.get(url, {\r\n        headers: { Authorization: `Bearer ${getCookie()}` },\r\n      })\r\n        .then((res) => {\r\n          if (res.data === \" \") {\r\n            setpaypal_client_id(null)\r\n          } else {\r\n            setpaypal_client_id(res.data.value)\r\n          }\r\n          setpaymentDetails(res.data);\r\n        })\r\n    }\r\n\r\n    fetchData();\r\n    const checkMngStk = setInterval(updateManageStockValue, 5000);\r\n    const checkpaypal = setInterval(getpaypalpaid, 10000);\r\n    updateManageStockValue();\r\n    getpaypalpaid();\r\n    return () => {\r\n      clearInterval(checkMngStk, checkpaypal);\r\n    }\r\n  }, []);\r\n\r\n  // install check\r\n  const checkInstall = async () => {\r\n    const url = BASE_URL + \"/check-install\";\r\n    let result = await axios.get(url);\r\n    return result.data;\r\n  };\r\n\r\n  //get all languages\r\n  const getLanguages = () => {\r\n    setLoading(true);\r\n    const langUrl = BASE_URL + \"/settings/get-lang\";\r\n    return axios.get(langUrl).then((res) => {\r\n      setLanguageList(res.data[0]);\r\n      setNavLanguageList(res.data[1]);\r\n      setLanguageListForSearch(res.data[1]);\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  // get paginated languages\r\n  const setPaginatedLanguages = (pageNo) => {\r\n    setDataPaginating(true);\r\n    const langUrl = BASE_URL + \"/settings/get-lang?page=\" + pageNo;\r\n    return axios\r\n      .get(langUrl)\r\n      .then((res) => {\r\n        setLanguageList(res.data[0]);\r\n        setDataPaginating(false);\r\n      })\r\n      .catch((error) => { });\r\n  };\r\n\r\n  //get smtp settings\r\n  const getSmtp = () => {\r\n    setLoading(true);\r\n    const smtpUrl = BASE_URL + \"/settings/get-smtp\";\r\n    return axios\r\n      .get(smtpUrl, {\r\n        headers: { Authorization: `Bearer ${getCookie()}` },\r\n      })\r\n      .then((res) => {\r\n        setSmtp({\r\n          ...smtp,\r\n          MAIL_MAILER: res.data[0].MAIL_MAILER,\r\n          MAIL_HOST: res.data[0].MAIL_HOST,\r\n          MAIL_PORT: res.data[0].MAIL_PORT,\r\n          MAIL_USERNAME: res.data[0].MAIL_USERNAME,\r\n          MAIL_PASSWORD: res.data[0].MAIL_PASSWORD,\r\n          MAIL_ENCRYPTION: res.data[0].MAIL_ENCRYPTION,\r\n          MAIL_FROM_ADDRESS: res.data[0].MAIL_FROM_ADDRESS,\r\n          MAIL_FROM_NAME: res.data[0].MAIL_FROM_NAME,\r\n        });\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  //get permission groups\r\n  const getPermissionGroups = () => {\r\n    setLoading(true);\r\n    const permissionGroupUrl = BASE_URL + \"/settings/permission-group-list\";\r\n    return axios\r\n      .get(permissionGroupUrl, {\r\n        headers: { Authorization: `Bearer ${getCookie()}` },\r\n      })\r\n      .then((res) => {\r\n        setPermissionGroup(res.data[0]);\r\n        setPermissionGroupForSearch(res.data[1]);\r\n        setPermissions(res.data[2]);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  // get paginated groups\r\n  const setPaginatedGropus = (pageNo) => {\r\n    setDataPaginating(true);\r\n    const url = BASE_URL + \"/settings/permission-group-list?page=\" + pageNo;\r\n    return axios\r\n      .get(url, {\r\n        headers: { Authorization: `Bearer ${getCookie()}` },\r\n      })\r\n      .then((res) => {\r\n        setPermissionGroup(res.data[0]);\r\n        setPermissionGroupForSearch(res.data[1]);\r\n        setPermissions(res.data[2]);\r\n        setDataPaginating(false);\r\n      })\r\n      .catch(() => { });\r\n  };\r\n\r\n  //get all currency\r\n  const getCurrency = () => {\r\n    setLoading(true);\r\n    const currencyUrl = BASE_URL + \"/settings/get-currency\";\r\n    return axios.get(currencyUrl).then((res) => {\r\n      setCurrencyList(res.data[0]);\r\n      setNavCurrencyList(res.data[1]);\r\n      setCurrencyListForSearch(res.data[1]);\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  // get paginated currency\r\n  const setPaginatedCurrencies = (pageNo) => {\r\n    setDataPaginating(true);\r\n    const currencyUrl = BASE_URL + \"/settings/get-currency?page=\" + pageNo;\r\n    return axios\r\n      .get(currencyUrl)\r\n      .then((res) => {\r\n        setCurrencyList(res.data[0]);\r\n        setDataPaginating(false);\r\n      })\r\n      .catch((error) => { });\r\n  };\r\n\r\n  //get all languages\r\n  const getSettings = () => {\r\n    setLoading(true);\r\n    const url = BASE_URL + \"/settings/general-settings\";\r\n    return axios.get(url).then((res) => {\r\n      setGeneralSettings(res.data);\r\n      const favicon = document.getElementById(\"favicon\");\r\n      favicon.href = BASE_URL + getSystemSettings(res.data, \"favicon\");\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <SettingsContext.Provider\r\n      value={{\r\n        //common\r\n        loading,\r\n        setLoading,\r\n\r\n        //general settings\r\n        generalSettings,\r\n        setGeneralSettings,\r\n        getLanguages,\r\n        getCurrency,\r\n        getSettings,\r\n\r\n        //currencies\r\n        currencyList,\r\n        setCurrencyList,\r\n        setPaginatedCurrencies,\r\n        navCurrencyList,\r\n        setNavCurrencyList,\r\n        currencyListForSearch,\r\n        setCurrencyListForSearch,\r\n\r\n        //languages\r\n        languageList,\r\n        setLanguageList,\r\n        setPaginatedLanguages,\r\n        navLanguageList,\r\n        setNavLanguageList,\r\n        languageListForSearch,\r\n        setLanguageListForSearch,\r\n\r\n        //smtp\r\n        smtp,\r\n        getSmtp,\r\n        setSmtp,\r\n\r\n        //permission group\r\n        getPermissionGroups,\r\n        permissionGroup,\r\n        setPermissionGroup,\r\n        setPaginatedGropus,\r\n        permissionGroupForSearch,\r\n        setPermissionGroupForSearch,\r\n\r\n        //permissions\r\n        permissions,\r\n        setPermissions,\r\n\r\n        //pagination\r\n        dataPaginating,\r\n        setDataPaginating,\r\n\r\n        //show  manage stock\r\n        showManageStock,\r\n        setshowManageStock,\r\n\r\n        // paypal_paypal_client_id\r\n        paypal_client_id,\r\n        setpaypal_client_id,\r\n\r\n        paymentDetails,\r\n        // setpaymentDetails\r\n      }}\r\n    >\r\n      {children}\r\n    </SettingsContext.Provider>\r\n  );\r\n};\r\n\r\nexport { SettingsContext, SettingsProvider };\r\n"]},"metadata":{},"sourceType":"module"}