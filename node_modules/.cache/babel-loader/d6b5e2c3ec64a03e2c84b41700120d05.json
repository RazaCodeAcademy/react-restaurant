{"ast":null,"code":"import _slicedToArray from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from\"react\";import{NavLink,useParams,useHistory}from\"react-router-dom\";//jQuery initialization\nimport $ from\"jquery\";//functions\nimport{_t,getCookie,tableLoading}from\"../../../../../functions/Functions\";import{useTranslation}from\"react-i18next\";//axios and base url\nimport axios from\"axios\";import{BASE_URL}from\"../../../../../BaseUrl\";//3rd party packages\nimport{Helmet}from\"react-helmet\";import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";//pages & includes\nimport ManageSidebar from\"../ManageSidebar\";//context consumer\nimport{SettingsContext}from\"../../../../../contexts/Settings\";var Translation=function Translation(){var _useTranslation=useTranslation(),t=_useTranslation.t;var history=useHistory();//getting context values here\nvar _useContext=useContext(SettingsContext),loading=_useContext.loading,languageListForSearch=_useContext.languageListForSearch,dataPaginating=_useContext.dataPaginating,setDataPaginating=_useContext.setDataPaginating;//getting url parameter\nvar _useParams=useParams(),code=_useParams.code;// States hook here\nvar _useState=useState(null),_useState2=_slicedToArray(_useState,2),toTranslate=_useState2[0],setToTranslate=_useState2[1];//useEffect == componentDidMount()\nuseEffect(function(){handleTranslate(code);toastAfterReload();},[]);var toastAfterReload=function toastAfterReload(){if(window.location.href.includes(\"translation-successful=true\")){toast.success(\"\".concat(_t(t(\"Translation has been saved\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});history.replace(\"/dashboard/manage/settings/languages/\"+code);}};var handleTranslate=function handleTranslate(langCode){setDataPaginating(true);var t_url=BASE_URL+\"/settings/get-lang/\".concat(langCode);axios.get(t_url,{headers:{Authorization:\"Bearer \".concat(getCookie())}}).then(function(res){setToTranslate(Object.entries(res.data));setDataPaginating(false);});};var handleTranslationInput=function handleTranslationInput(e,index,key){var temp=[];toTranslate.map(function(item,indexItem){if(index===indexItem){temp.push([key,e.target.value]);}else{temp.push(item);}});setToTranslate(temp);};//translate in one click\nvar handleCopy=function handleCopy(){var jsonData=toTranslate;var temp=[];$(\"#tranlation-table > tbody  > tr\").each(function(index,tr){$(tr).find(\".value\").val($(tr).find(\".key\").text());var newTranslation=$(tr).find(\".key\").text();jsonData.map(function(items,itemIndex){if(itemIndex===index){temp.push([items[0],newTranslation]);}});});setToTranslate(temp);};var handleSubmitTranslation=function handleSubmitTranslation(e){e.preventDefault();var data=Object.fromEntries(toTranslate.filter(function(_ref){var _ref2=_slicedToArray(_ref,2),k=_ref2[0],v=_ref2[1];return true;}));var formData={data:data,code:code};var t_url=BASE_URL+\"/settings/save-translation\";return axios.post(t_url,formData,{headers:{Authorization:\"Bearer \".concat(getCookie())}}).then(function(){window.location.href=window.location.pathname+\"?translation-successful=true\";});};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Helmet,null,/*#__PURE__*/React.createElement(\"title\",null,_t(t(\"Update Translation\")))),/*#__PURE__*/React.createElement(\"main\",{id:\"main\",\"data-simplebar\":true},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row t-mt-10 gx-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-3 col-xxl-2 t-mb-30 mb-lg-0\"},/*#__PURE__*/React.createElement(ManageSidebar,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-9 col-xxl-10 t-mb-30 mb-lg-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"t-bg-white\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fk-scroll--pos-menu\",\"data-simplebar\":true},/*#__PURE__*/React.createElement(\"div\",{className:\"t-pl-15 t-pr-15\"},loading===true?tableLoading():/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(dataPaginating&&\"loading\")}),/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 align-items-center pt-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-4 col-lg-3 mb-md-0\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list fk-breadcrumb\"},/*#__PURE__*/React.createElement(\"li\",{className:\"fk-breadcrumb__list\"},/*#__PURE__*/React.createElement(\"span\",{className:\"t-link fk-breadcrumb__link text-capitalize\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 col-lg-9\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-0 align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-9 col-xl-10 t-mb-15 mb-md-0\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-3 col-xl-2 text-md-right\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"card-header border-bottom-0\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"panel-title text-center\"},_t(t(\"Update Translation\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},languageListForSearch&&languageListForSearch.map(function(item){if(item.code===code){return/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center\",key:item.id},/*#__PURE__*/React.createElement(\"span\",null,item.name),/*#__PURE__*/React.createElement(\"div\",{className:\"fk-language__flag ml-3\",style:{backgroundImage:\"url(\".concat(item.image,\")\")}}));}})),/*#__PURE__*/React.createElement(\"p\",{className:\"text-muted text-center\"},_t(t(\"You can update the translation in a very easy way\")),/*#__PURE__*/React.createElement(\"br\",null),\" \",_t(t(\"Install any google translation extention in your browser, translate the whole page\")),/*#__PURE__*/React.createElement(\"br\",null),\" \",_t(t(\"Click Copy Translation button\")),/*#__PURE__*/React.createElement(\"br\",null),_t(t(\"Click save\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-horizontal\"},/*#__PURE__*/React.createElement(\"div\",{className:\"panel-body\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table table-striped table-bordered demo-dt-basic mb-1\",cellSpacing:\"0\",width:\"100%\",id:\"tranlation-table\"},/*#__PURE__*/React.createElement(\"tbody\",null,toTranslate&&toTranslate.map(function(items,index){return/*#__PURE__*/React.createElement(\"tr\",{className:\"text-center\",key:index},/*#__PURE__*/React.createElement(\"td\",null,index+1),/*#__PURE__*/React.createElement(\"td\",{className:\"key text-left translation-input\"},items[0]),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control value w-100\",name:\"translations[]\",onChange:function onChange(e){handleTranslationInput(e,index,items[0]);},value:items[1]})));})))))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"t-bg-white mt-1 t-pt-5 t-pb-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center t-pl-15 t-pr-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-7 t-mb-15 mb-md-0\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list d-flex justify-content-center justify-content-md-start\"},/*#__PURE__*/React.createElement(\"li\",{className:\"t-list__item no-pagination-style\"},/*#__PURE__*/React.createElement(NavLink,{className:\"btn btn-primary btn-sm\",to:\"/dashboard/manage/settings/languages\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-reply\"}),\" \",_t(t(\"Go back\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list d-flex justify-content-center justify-content-md-end align-items-center\"},/*#__PURE__*/React.createElement(\"li\",{className:\"t-list__item\"},/*#__PURE__*/React.createElement(\"div\",{className:\"form-group\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-12 text-right\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-warning btn-sm text-dark\",type:\"button\",onClick:handleCopy},_t(t(\"Copy Translations\"))),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success btn-sm ml-2 text-dark\",type:\"button\",onClick:handleSubmitTranslation},_t(t(\"Save\")))))))))))))));};export default Translation;","map":{"version":3,"sources":["/Users/raza/Downloads/khadyo_source_code/client/src/resources/restaurant/auth/manage/settings/Translation.js"],"names":["React","useState","useEffect","useContext","NavLink","useParams","useHistory","$","_t","getCookie","tableLoading","useTranslation","axios","BASE_URL","Helmet","toast","ManageSidebar","SettingsContext","Translation","t","history","loading","languageListForSearch","dataPaginating","setDataPaginating","code","toTranslate","setToTranslate","handleTranslate","toastAfterReload","window","location","href","includes","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","className","replace","langCode","t_url","get","headers","Authorization","then","res","Object","entries","data","handleTranslationInput","e","index","key","temp","map","item","indexItem","push","target","value","handleCopy","jsonData","each","tr","find","val","text","newTranslation","items","itemIndex","handleSubmitTranslation","preventDefault","fromEntries","filter","k","v","formData","post","pathname","id","name","backgroundImage","image"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\r\nimport { NavLink, useParams, useHistory } from \"react-router-dom\";\r\n\r\n//jQuery initialization\r\nimport $ from \"jquery\";\r\n\r\n//functions\r\nimport {\r\n  _t,\r\n  getCookie,\r\n  tableLoading,\r\n} from \"../../../../../functions/Functions\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\n//axios and base url\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../../../../../BaseUrl\";\r\n\r\n//3rd party packages\r\nimport { Helmet } from \"react-helmet\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\n//pages & includes\r\nimport ManageSidebar from \"../ManageSidebar\";\r\n\r\n//context consumer\r\nimport { SettingsContext } from \"../../../../../contexts/Settings\";\r\nconst Translation = () => {\r\n  const { t } = useTranslation();\r\n  const history = useHistory();\r\n  //getting context values here\r\n  let {\r\n    loading,\r\n    languageListForSearch,\r\n    dataPaginating,\r\n    setDataPaginating,\r\n  } = useContext(SettingsContext);\r\n\r\n  //getting url parameter\r\n  let { code } = useParams();\r\n\r\n  // States hook here\r\n  let [toTranslate, setToTranslate] = useState(null);\r\n\r\n  //useEffect == componentDidMount()\r\n  useEffect(() => {\r\n    handleTranslate(code);\r\n    toastAfterReload();\r\n  }, []);\r\n\r\n  const toastAfterReload = () => {\r\n    if (window.location.href.includes(\"translation-successful=true\")) {\r\n      toast.success(`${_t(t(\"Translation has been saved\"))}`, {\r\n        position: \"bottom-center\",\r\n        autoClose: 10000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        className: \"text-center toast-notification\",\r\n      });\r\n      history.replace(\"/dashboard/manage/settings/languages/\" + code);\r\n    }\r\n  };\r\n\r\n  const handleTranslate = (langCode) => {\r\n    setDataPaginating(true);\r\n    const t_url = BASE_URL + `/settings/get-lang/${langCode}`;\r\n    axios\r\n      .get(t_url, {\r\n        headers: { Authorization: `Bearer ${getCookie()}` },\r\n      })\r\n      .then((res) => {\r\n        setToTranslate(Object.entries(res.data));\r\n        setDataPaginating(false);\r\n      });\r\n  };\r\n\r\n  const handleTranslationInput = (e, index, key) => {\r\n    let temp = [];\r\n    toTranslate.map((item, indexItem) => {\r\n      if (index === indexItem) {\r\n        temp.push([key, e.target.value]);\r\n      } else {\r\n        temp.push(item);\r\n      }\r\n    });\r\n    setToTranslate(temp);\r\n  };\r\n\r\n  //translate in one click\r\n  const handleCopy = () => {\r\n    let jsonData = toTranslate;\r\n    let temp = [];\r\n    $(\"#tranlation-table > tbody  > tr\").each(function (index, tr) {\r\n      $(tr).find(\".value\").val($(tr).find(\".key\").text());\r\n      let newTranslation = $(tr).find(\".key\").text();\r\n      jsonData.map((items, itemIndex) => {\r\n        if (itemIndex === index) {\r\n          temp.push([items[0], newTranslation]);\r\n        }\r\n      });\r\n    });\r\n    setToTranslate(temp);\r\n  };\r\n\r\n  const handleSubmitTranslation = (e) => {\r\n    e.preventDefault();\r\n    let data = Object.fromEntries(\r\n      toTranslate.filter(([k, v]) => {\r\n        return true;\r\n      })\r\n    );\r\n    let formData = {\r\n      data: data,\r\n      code: code,\r\n    };\r\n    const t_url = BASE_URL + `/settings/save-translation`;\r\n    return axios\r\n      .post(t_url, formData, {\r\n        headers: { Authorization: `Bearer ${getCookie()}` },\r\n      })\r\n      .then(() => {\r\n        window.location.href =\r\n          window.location.pathname + \"?translation-successful=true\";\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{_t(t(\"Update Translation\"))}</title>\r\n      </Helmet>\r\n\r\n      {/* main body */}\r\n      <main id=\"main\" data-simplebar>\r\n        <div className=\"container\">\r\n          <div className=\"row t-mt-10 gx-2\">\r\n            {/* left Sidebar */}\r\n            <div className=\"col-lg-3 col-xxl-2 t-mb-30 mb-lg-0\">\r\n              <ManageSidebar />\r\n            </div>\r\n            {/* left Sidebar ends */}\r\n\r\n            {/* Rightbar contents */}\r\n            <div className=\"col-lg-9 col-xxl-10 t-mb-30 mb-lg-0\">\r\n              <div className=\"t-bg-white\">\r\n                <div className=\"fk-scroll--pos-menu\" data-simplebar>\r\n                  <div className=\"t-pl-15 t-pr-15\">\r\n                    {/* Loading effect */}\r\n                    {loading === true ? (\r\n                      tableLoading()\r\n                    ) : (\r\n                      <>\r\n                        {/* next page data spin loading */}\r\n                        <div className={`${dataPaginating && \"loading\"}`}></div>\r\n                        {/* spin loading ends */}\r\n                        <div className=\"row gx-2 align-items-center pt-0\">\r\n                          <div className=\"col-md-4 col-lg-3 mb-md-0\">\r\n                            <ul className=\"t-list fk-breadcrumb\">\r\n                              <li className=\"fk-breadcrumb__list\">\r\n                                <span className=\"t-link fk-breadcrumb__link text-capitalize\"></span>\r\n                              </li>\r\n                            </ul>\r\n                          </div>\r\n                          <div className=\"col-md-8 col-lg-9\">\r\n                            <div className=\"row gx-0 align-items-center\">\r\n                              {/* Search Translationuages */}\r\n                              <div className=\"col-md-9 col-xl-10 t-mb-15 mb-md-0\"></div>\r\n\r\n                              {/* Add Translationuage modal trigger button */}\r\n                              <div className=\"col-md-3 col-xl-2 text-md-right\"></div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        {/* Table */}\r\n                        <div className=\"card-header border-bottom-0\">\r\n                          <h3 className=\"panel-title text-center\">\r\n                            {_t(t(\"Update Translation\"))}\r\n                          </h3>\r\n                          {/* Showing language name and flag */}\r\n                          <div className=\"d-flex justify-content-center\">\r\n                            {languageListForSearch &&\r\n                              languageListForSearch.map((item) => {\r\n                                if (item.code === code) {\r\n                                  return (\r\n                                    <div\r\n                                      className=\"d-flex align-items-center\"\r\n                                      key={item.id}\r\n                                    >\r\n                                      <span>{item.name}</span>\r\n                                      <div\r\n                                        className=\"fk-language__flag ml-3\"\r\n                                        style={{\r\n                                          backgroundImage: `url(${item.image})`,\r\n                                        }}\r\n                                      ></div>\r\n                                    </div>\r\n                                  );\r\n                                }\r\n                              })}\r\n                          </div>\r\n                          <p className=\"text-muted text-center\">\r\n                            {_t(\r\n                              t(\r\n                                \"You can update the translation in a very easy way\"\r\n                              )\r\n                            )}\r\n                            <br />{\" \"}\r\n                            {_t(\r\n                              t(\r\n                                \"Install any google translation extention in your browser, translate the whole page\"\r\n                              )\r\n                            )}\r\n                            <br /> {_t(t(\"Click Copy Translation button\"))}\r\n                            <br />\r\n                            {_t(t(\"Click save\"))}\r\n                          </p>\r\n                        </div>\r\n                        <div className=\"card-body\">\r\n                          <div className=\"form-horizontal\">\r\n                            <div className=\"panel-body\">\r\n                              <table\r\n                                className=\"table table-striped table-bordered demo-dt-basic mb-1\"\r\n                                cellSpacing=\"0\"\r\n                                width=\"100%\"\r\n                                id=\"tranlation-table\"\r\n                              >\r\n                                <tbody>\r\n                                  {toTranslate &&\r\n                                    toTranslate.map((items, index) => {\r\n                                      return (\r\n                                        <tr className=\"text-center\" key={index}>\r\n                                          <td>{index + 1}</td>\r\n                                          <td className=\"key text-left translation-input\">\r\n                                            {items[0]}\r\n                                          </td>\r\n                                          <td>\r\n                                            <input\r\n                                              type=\"text\"\r\n                                              className=\"form-control value w-100\"\r\n                                              name=\"translations[]\"\r\n                                              onChange={(e) => {\r\n                                                handleTranslationInput(\r\n                                                  e,\r\n                                                  index,\r\n                                                  items[0]\r\n                                                );\r\n                                              }}\r\n                                              value={items[1]}\r\n                                            />\r\n                                          </td>\r\n                                        </tr>\r\n                                      );\r\n                                    })}\r\n                                </tbody>\r\n                              </table>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* pagination loading effect */}\r\n              {/* pagination loading effect removed */}\r\n              <div className=\"t-bg-white mt-1 t-pt-5 t-pb-5\">\r\n                <div className=\"row align-items-center t-pl-15 t-pr-15\">\r\n                  <div className=\"col-md-7 t-mb-15 mb-md-0\">\r\n                    <ul className=\"t-list d-flex justify-content-center justify-content-md-start\">\r\n                      <li className=\"t-list__item no-pagination-style\">\r\n                        <NavLink\r\n                          className=\"btn btn-primary btn-sm\"\r\n                          to=\"/dashboard/manage/settings/languages\"\r\n                        >\r\n                          <i className=\"fa fa-reply\"></i> {_t(t(\"Go back\"))}\r\n                        </NavLink>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                  <div className=\"col-md-5\">\r\n                    <ul className=\"t-list d-flex justify-content-center justify-content-md-end align-items-center\">\r\n                      <li className=\"t-list__item\">\r\n                        <div className=\"form-group\">\r\n                          <div className=\"col-lg-12 text-right\">\r\n                            <button\r\n                              className=\"btn btn-warning btn-sm text-dark\"\r\n                              type=\"button\"\r\n                              onClick={handleCopy}\r\n                            >\r\n                              {_t(t(\"Copy Translations\"))}\r\n                            </button>\r\n                            <button\r\n                              className=\"btn btn-success btn-sm ml-2 text-dark\"\r\n                              type=\"button\"\r\n                              onClick={handleSubmitTranslation}\r\n                            >\r\n                              {_t(t(\"Save\"))}\r\n                            </button>\r\n                          </div>\r\n                        </div>\r\n                      </li>\r\n                    </ul>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* Rightbar contents end*/}\r\n          </div>\r\n        </div>\r\n      </main>\r\n      {/* main body ends */}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Translation;\r\n"]},"metadata":{},"sourceType":"module"}