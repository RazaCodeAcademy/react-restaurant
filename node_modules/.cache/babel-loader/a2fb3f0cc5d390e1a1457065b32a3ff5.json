{"ast":null,"code":"import _objectSpread from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useContext,useState}from\"react\";//axios and base url\nimport axios from\"axios\";import{BASE_URL}from\"../../../../BaseUrl\";//functions\nimport{_t,getCookie,pageLoading,paginationLoading,pagination,showingData,searchedShowingData}from\"../../../../functions/Functions\";import{useTranslation}from\"react-i18next\";//3rd party packages\nimport{Helmet}from\"react-helmet\";import Select from\"react-select\";import makeAnimated from\"react-select/animated\";import{confirmAlert}from\"react-confirm-alert\";import\"react-confirm-alert/src/react-confirm-alert.css\";import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import Moment from\"react-moment\";//importing context consumer here\nimport{UserContext}from\"../../../../contexts/User\";import{SettingsContext}from\"../../../../contexts/Settings\";import{RestaurantContext}from\"../../../../contexts/Restaurant\";import{NavLink}from\"react-router-dom\";var WorkPeriod=function WorkPeriod(){var weekday=[\"Sunday\",\"Monday\",\"Tuesday\",\"Wednesday\",\"Thursday\",\"Friday\",\"Saturday\"];var month=[\"Jan\",\"Feb\",\"Mar\",\"Apr\",\"May\",\"Jun\",\"Jul\",\"Aug\",\"Sep\",\"Oct\",\"Nov\",\"Dec\"];//getting context values here\nvar _useContext=useContext(SettingsContext),loading=_useContext.loading,setLoading=_useContext.setLoading,dataPaginating=_useContext.dataPaginating,showManageStock=_useContext.showManageStock;var _useContext2=useContext(UserContext),authUserInfo=_useContext2.authUserInfo;var _useContext3=useContext(RestaurantContext),branchForSearch=_useContext3.branchForSearch,getWorkPeriod=_useContext3.getWorkPeriod,workPeriodList=_useContext3.workPeriodList,setWorkPeriodList=_useContext3.setWorkPeriodList,setPaginatedWorkPeriod=_useContext3.setPaginatedWorkPeriod,workPeriodForSearch=_useContext3.workPeriodForSearch,setWorkPeriodListForSearch=_useContext3.setWorkPeriodListForSearch;var _useTranslation=useTranslation(),t=_useTranslation.t;//new unit\nvar _useState=useState({user_type:null,branch_id:null,uploading:false}),_useState2=_slicedToArray(_useState,2),newWorkPeriod=_useState2[0],setNewWorkPeriod=_useState2[1];//search result\nvar _useState3=useState({list:null,searched:false}),_useState4=_slicedToArray(_useState3,2),searchedWorkPeriod=_useState4[0],setSearchedWorkPeriod=_useState4[1];//useEffect == componentDidMount\nuseEffect(function(){authUserInfo.details&&setNewWorkPeriod({branch_id:authUserInfo.details.branch_id?authUserInfo.details.branch_id:null,user_type:authUserInfo.details.user_type});},[]);//set branch id\nvar handleSetBranchId=function handleSetBranchId(branch){setNewWorkPeriod(_objectSpread(_objectSpread({},newWorkPeriod),{},{branch_id:branch.id}));};//search work periods here\nvar handleSearch=function handleSearch(e){var searchInput=e.target.value.toLowerCase();if(searchInput.length===0){setSearchedWorkPeriod(_objectSpread(_objectSpread({},searchedWorkPeriod),{},{searched:false}));}else{var searchedList=workPeriodForSearch.filter(function(item){var lowerCaseItemBranchName=item.branch_name.toLowerCase();var lowerCaseItemUserName=item.started_by.toLowerCase();var lowerCaseItemDate=item.date.toLowerCase();var lowerCaseItemUserName2=item.ended_by&&item.ended_by.toLowerCase();return lowerCaseItemBranchName.includes(searchInput)||lowerCaseItemUserName.includes(searchInput)||lowerCaseItemDate.includes(searchInput)||lowerCaseItemUserName2&&lowerCaseItemUserName2.includes(searchInput);});setSearchedWorkPeriod(_objectSpread(_objectSpread({},searchedWorkPeriod),{},{list:searchedList,searched:true}));}};//Save New work period\nvar handleSaveNewWorkPeriod=function handleSaveNewWorkPeriod(e){e.preventDefault();if(newWorkPeriod.branch_id){setNewWorkPeriod(_objectSpread(_objectSpread({},newWorkPeriod),{},{uploading:true}));var url=BASE_URL+\"/settings/new-work-period\";var date=weekday[new Date().getDay()]+\", \"+new Date().getDate()+\" \"+month[new Date().getMonth()]+\", \"+new Date().getFullYear();var time=new Date().getTime();var formData={date:date,branch_id:newWorkPeriod.branch_id,started_at:time};return axios.post(url,formData,{headers:{Authorization:\"Bearer \".concat(getCookie())}}).then(function(res){if(res.data===\"exist\"){authUserInfo.details&&setNewWorkPeriod({branch_id:authUserInfo.details.branch_id?authUserInfo.details.branch_id:null,user_type:authUserInfo.details.user_type,uploading:false});toast.error(\"\".concat(_t(t(\"Please end the started work period first\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}else{authUserInfo.details&&setNewWorkPeriod({branch_id:authUserInfo.details.branch_id?authUserInfo.details.branch_id:null,user_type:authUserInfo.details.user_type,uploading:false});setWorkPeriodList(res.data[0]);setWorkPeriodListForSearch(res.data[1]);setSearchedWorkPeriod(_objectSpread(_objectSpread({},searchedWorkPeriod),{},{list:res.data[1]}));setLoading(false);toast.success(\"\".concat(_t(t(\"Work period has been started\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}}).catch(function(){setLoading(false);setNewWorkPeriod(_objectSpread(_objectSpread({},newWorkPeriod),{},{uploading:false}));toast.error(\"\".concat(_t(t(\"Please try again\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});});}else{toast.error(\"\".concat(_t(t(\"Please select a branch\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}};//milisec to hour min\nvar millisToMinutesAndHours=function millisToMinutesAndHours(millis){var minutes=Math.floor(millis/60000);var hours=Math.floor(minutes/60);minutes=Math.floor(minutes%60);var seconds=(millis%60000/1000).toFixed(0);return\"\".concat(hours,\" \").concat(_t(t(\"hr\")),\" - \").concat(minutes,\" \").concat(_t(t(\"min\")),\" - \").concat(seconds<10?\"0\":\"\").concat(seconds,\" \").concat(_t(t(\"sec\")));};//end confirmation modal of workPeriod\nvar handleDeleteConfirmation=function handleDeleteConfirmation(id){confirmAlert({customUI:function customUI(_ref){var onClose=_ref.onClose;return/*#__PURE__*/React.createElement(\"div\",{className:\"card card-body\"},/*#__PURE__*/React.createElement(\"h1\",null,_t(t(\"Are you sure?\"))),/*#__PURE__*/React.createElement(\"p\",{className:\"text-center\"},_t(t(\"You want to end now?\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex justify-content-center\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){handleEndWorkPeriod(id);onClose();}},_t(t(\"Yes, end work period!\"))),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-success ml-2 px-3\",onClick:onClose},_t(t(\"No\")))));}});};//end here\nvar handleEndWorkPeriod=function handleEndWorkPeriod(id){setNewWorkPeriod(_objectSpread(_objectSpread({},newWorkPeriod),{},{uploading:true}));var url=BASE_URL+\"/settings/update-work-period\";var time=new Date().getTime();var formData={id:id,ended_at:time};return axios.post(url,formData,{headers:{Authorization:\"Bearer \".concat(getCookie())}}).then(function(res){if(res.data!==\"orderExist\"&&res.data!==\"addClosing\"){authUserInfo.details&&setNewWorkPeriod({branch_id:authUserInfo.details.branch_id?authUserInfo.details.branch_id:null,user_type:authUserInfo.details.user_type,uploading:false});setWorkPeriodList(res.data[0]);setWorkPeriodListForSearch(res.data[1]);setSearchedWorkPeriod(_objectSpread(_objectSpread({},searchedWorkPeriod),{},{list:res.data[1]}));setLoading(false);toast.success(\"\".concat(_t(t(\"Work period has been ended\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}else{if(res.data===\"addClosing\"){toast.error(\"\".concat(_t(t(\"Add closing stock of ingredients\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}else{toast.error(\"\".concat(_t(t(\"All submitted orders need to be settled to end workperiod\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}setLoading(false);setNewWorkPeriod(_objectSpread(_objectSpread({},newWorkPeriod),{},{uploading:false}));}}).catch(function(){setLoading(false);setNewWorkPeriod(_objectSpread(_objectSpread({},newWorkPeriod),{},{uploading:false}));toast.error(\"\".concat(_t(t(\"Please try again\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});});};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Helmet,null,/*#__PURE__*/React.createElement(\"title\",null,_t(t(\"Work Periods\")))),/*#__PURE__*/React.createElement(\"main\",{id:\"main\",\"data-simplebar\":true},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row t-mt-10 gx-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 t-mb-30 mb-lg-0\"},newWorkPeriod.uploading===true||loading===true?pageLoading():/*#__PURE__*/React.createElement(\"div\",{className:\"t-bg-white \"},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(dataPaginating&&\"loading\")}),/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 align-items-center t-pt-15 t-pb-15 t-pl-15 t-pr-15 t-shadow\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 t-mb-15\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list fk-breadcrumb\"},/*#__PURE__*/React.createElement(\"li\",{className:\"fk-breadcrumb__list\"},/*#__PURE__*/React.createElement(\"span\",{className:\"t-link fk-breadcrumb__link text-capitalize\"},!searchedWorkPeriod.searched?_t(t(\"Work periods\")):_t(t(\"Search Result\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-lg-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary\",type:\"button\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fa fa-search\",\"aria-hidden\":\"true\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"form-file\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",className:\"form-control border-0 form-control--light-1 rounded-0\",placeholder:_t(t(\"Search by branch, date, user\"))+\"..\",onChange:handleSearch})))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-6 col-lg-7 t-mb-15 mb-md-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 align-items-center\"},authUserInfo.details!==null&&authUserInfo.details.user_type!==\"staff\"?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-7 t-mb-15 mb-md-0 mt-3 mt-md-0\"},/*#__PURE__*/React.createElement(Select,{options:branchForSearch&&branchForSearch,components:makeAnimated(),getOptionLabel:function getOptionLabel(option){return option.name;},getOptionValue:function getOptionValue(option){return option.name;},classNamePrefix:\"select\",className:\"xsm-text\",onChange:handleSetBranchId,maxMenuHeight:\"200px\",placeholder:_t(t(\"Please select a branch\"))+\"..\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list fk-sort align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"li\",{className:\"fk-sort__list mb-0 flex-grow-1\"},/*#__PURE__*/React.createElement(\"button\",{onClick:handleSaveNewWorkPeriod,className:\"w-100 btn btn-secondary sm-text text-uppercase\"},_t(t(\"start work period\"))))))):/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-5 ml-auto mt-2 mt-md-0\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list fk-sort align-items-center justify-content-center\"},/*#__PURE__*/React.createElement(\"li\",{className:\"fk-sort__list mb-0 flex-grow-1\"},/*#__PURE__*/React.createElement(\"button\",{onClick:handleSaveNewWorkPeriod,className:\"w-100 btn btn-secondary sm-text text-uppercase\"},_t(t(\"start work period\"))))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"fk-scroll--order-history\",\"data-simplebar\":true},/*#__PURE__*/React.createElement(\"div\",{className:\"t-pl-15 t-pr-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"table-responsive\"},/*#__PURE__*/React.createElement(\"table\",{className:\"table table-bordered table-hover min-table-height mt-4\"},/*#__PURE__*/React.createElement(\"thead\",{className:\"align-middle\"},/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text align-middle text-center border-1 border\"},_t(t(\"S/L\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text align-middle text-center border-1 border\"},_t(t(\"Branch\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text align-middle text-center border-1 border\"},_t(t(\"Started by\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text align-middle text-center border-1 border\"},_t(t(\"Date\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text align-middle text-center border-1 border\"},_t(t(\"Started at\"))),showManageStock?/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text align-middle text-center border-1 border\"},_t(t(\"Stock\"))):null,/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text align-middle text-center border-1 border\"},_t(t(\"Ended at\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text align-middle text-center border-1 border\"},_t(t(\"Ended by\"))),/*#__PURE__*/React.createElement(\"th\",{scope:\"col\",className:\"sm-text align-middle text-center border-1 border\"},_t(t(\"Total time\"))))),/*#__PURE__*/React.createElement(\"tbody\",{className:\"align-middle\"},!searchedWorkPeriod.searched?[workPeriodList&&[workPeriodList.data.length===0?/*#__PURE__*/React.createElement(\"tr\",{className:\"align-middle\"},/*#__PURE__*/React.createElement(\"td\",{scope:\"row\",colSpan:\"8\",className:\"xsm-text align-middle text-center\"},_t(t(\"No data available\")))):workPeriodList.data.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{className:\"align-middle\",key:index},/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",className:\"xsm-text text-capitalize align-middle text-center\"},index+1+(workPeriodList.current_page-1)*workPeriodList.per_page),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center text-secondary\"},item.branch_name),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},item.started_by),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},item.date),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center text-green\"},/*#__PURE__*/React.createElement(Moment,{format:\"LT\"},new Date(item.created_at))),showManageStock?/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},/*#__PURE__*/React.createElement(NavLink,{className:\"btn xxsm-text \".concat(item.ended_at===null?\"btn-secondary\":\"btn-success\",\" btn-sm p-1\"),to:\"/dashboard/closing-stock/\"+item.started_at},_t(t(\"Closing Stock\")))):null,/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center text-primary\"},item.ended_at?/*#__PURE__*/React.createElement(Moment,{format:\"LT\"},new Date(item.updated_at)):\"-\"),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},item.ended_at?item.ended_by:/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary btn-sm py-0 px-4\",onClick:function onClick(){handleDeleteConfirmation(item.id);}},_t(t(\"End\")))),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},item.ended_at?millisToMinutesAndHours(parseInt(item.ended_at-item.started_at)):\"-\"));})]]:[/* searched data, logic === haveData*/searchedWorkPeriod&&[searchedWorkPeriod.list.length===0?/*#__PURE__*/React.createElement(\"tr\",{className:\"align-middle\"},/*#__PURE__*/React.createElement(\"td\",{scope:\"row\",colSpan:\"9\",className:\"xsm-text align-middle text-center\"},_t(t(\"No data available\")))):searchedWorkPeriod.list.map(function(item,index){return/*#__PURE__*/React.createElement(\"tr\",{className:\"align-middle\",key:index},/*#__PURE__*/React.createElement(\"th\",{scope:\"row\",className:\"xsm-text text-capitalize align-middle text-center\"},index+1+(workPeriodList.current_page-1)*workPeriodList.per_page),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center text-secondary\"},item.branch_name),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},item.started_by),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},item.date),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},/*#__PURE__*/React.createElement(Moment,{format:\"LT\"},new Date(item.created_at))),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},item.ended_at?/*#__PURE__*/React.createElement(Moment,{format:\"LT\"},new Date(item.updated_at)):\"-\"),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},item.ended_at?item.ended_by:/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary btn-sm py-0 px-4\",onClick:function onClick(){handleDeleteConfirmation(item.id);}},_t(t(\"End\")))),/*#__PURE__*/React.createElement(\"td\",{className:\"xsm-text align-middle text-center\"},item.ended_at?millisToMinutesAndHours(parseInt(item.ended_at-item.started_at)):\"-\"));})]])))))),newWorkPeriod.uploading===true||loading===true?paginationLoading():[// logic === !searched\n!searchedWorkPeriod.searched?/*#__PURE__*/React.createElement(\"div\",{key:\"fragment4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"t-bg-white mt-1 t-pt-5 t-pb-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center t-pl-15 t-pr-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-7 t-mb-15 mb-md-0\"},pagination(workPeriodList,setPaginatedWorkPeriod)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list d-flex justify-content-md-end align-items-center\"},/*#__PURE__*/React.createElement(\"li\",{className:\"t-list__item\"},/*#__PURE__*/React.createElement(\"span\",{className:\"d-inline-block sm-text\"},showingData(workPeriodList)))))))):/*#__PURE__*/ // if searched\nReact.createElement(\"div\",{className:\"t-bg-white mt-1 t-pt-5 t-pb-5\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row align-items-center t-pl-15 t-pr-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-7 t-mb-15 mb-md-0\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list d-flex\"},/*#__PURE__*/React.createElement(\"li\",{className:\"t-list__item no-pagination-style\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary btn-sm\",onClick:function onClick(){return setSearchedWorkPeriod(_objectSpread(_objectSpread({},searchedWorkPeriod),{},{searched:false}));}},_t(t(\"Clear Search\")))))),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-5\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list d-flex justify-content-md-end align-items-center\"},/*#__PURE__*/React.createElement(\"li\",{className:\"t-list__item\"},/*#__PURE__*/React.createElement(\"span\",{className:\"d-inline-block sm-text\"},searchedShowingData(searchedWorkPeriod,workPeriodForSearch)))))))])))));};export default WorkPeriod;","map":{"version":3,"sources":["/Users/raza/Downloads/khadyo_source_code/client/src/resources/restaurant/auth/workPeriod/WorkPeriod.js"],"names":["React","useEffect","useContext","useState","axios","BASE_URL","_t","getCookie","pageLoading","paginationLoading","pagination","showingData","searchedShowingData","useTranslation","Helmet","Select","makeAnimated","confirmAlert","toast","Moment","UserContext","SettingsContext","RestaurantContext","NavLink","WorkPeriod","weekday","month","loading","setLoading","dataPaginating","showManageStock","authUserInfo","branchForSearch","getWorkPeriod","workPeriodList","setWorkPeriodList","setPaginatedWorkPeriod","workPeriodForSearch","setWorkPeriodListForSearch","t","user_type","branch_id","uploading","newWorkPeriod","setNewWorkPeriod","list","searched","searchedWorkPeriod","setSearchedWorkPeriod","details","handleSetBranchId","branch","id","handleSearch","e","searchInput","target","value","toLowerCase","length","searchedList","filter","item","lowerCaseItemBranchName","branch_name","lowerCaseItemUserName","started_by","lowerCaseItemDate","date","lowerCaseItemUserName2","ended_by","includes","handleSaveNewWorkPeriod","preventDefault","url","Date","getDay","getDate","getMonth","getFullYear","time","getTime","formData","started_at","post","headers","Authorization","then","res","data","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","className","success","catch","millisToMinutesAndHours","millis","minutes","Math","floor","hours","seconds","toFixed","handleDeleteConfirmation","customUI","onClose","handleEndWorkPeriod","ended_at","option","name","map","index","current_page","per_page","created_at","updated_at","parseInt"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext, useState } from \"react\";\r\n\r\n//axios and base url\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../../../../BaseUrl\";\r\n\r\n//functions\r\nimport {\r\n  _t,\r\n  getCookie,\r\n  pageLoading,\r\n  paginationLoading,\r\n  pagination,\r\n  showingData,\r\n  searchedShowingData,\r\n} from \"../../../../functions/Functions\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\n//3rd party packages\r\nimport { Helmet } from \"react-helmet\";\r\nimport Select from \"react-select\";\r\nimport makeAnimated from \"react-select/animated\";\r\nimport { confirmAlert } from \"react-confirm-alert\";\r\nimport \"react-confirm-alert/src/react-confirm-alert.css\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Moment from \"react-moment\";\r\n\r\n//importing context consumer here\r\nimport { UserContext } from \"../../../../contexts/User\";\r\nimport { SettingsContext } from \"../../../../contexts/Settings\";\r\nimport { RestaurantContext } from \"../../../../contexts/Restaurant\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nconst WorkPeriod = () => {\r\n  var weekday = [\r\n    \"Sunday\",\r\n    \"Monday\",\r\n    \"Tuesday\",\r\n    \"Wednesday\",\r\n    \"Thursday\",\r\n    \"Friday\",\r\n    \"Saturday\",\r\n  ];\r\n\r\n  var month = [\r\n    \"Jan\",\r\n    \"Feb\",\r\n    \"Mar\",\r\n    \"Apr\",\r\n    \"May\",\r\n    \"Jun\",\r\n    \"Jul\",\r\n    \"Aug\",\r\n    \"Sep\",\r\n    \"Oct\",\r\n    \"Nov\",\r\n    \"Dec\",\r\n  ];\r\n\r\n  //getting context values here\r\n  const {\r\n    //common\r\n    loading,\r\n    setLoading,\r\n    dataPaginating,\r\n    showManageStock,\r\n  } = useContext(SettingsContext);\r\n\r\n  const { authUserInfo } = useContext(UserContext);\r\n\r\n  const {\r\n    //branch\r\n    branchForSearch,\r\n\r\n    //work period\r\n    getWorkPeriod,\r\n    workPeriodList,\r\n    setWorkPeriodList,\r\n    setPaginatedWorkPeriod,\r\n    workPeriodForSearch,\r\n    setWorkPeriodListForSearch,\r\n  } = useContext(RestaurantContext);\r\n\r\n  const { t } = useTranslation();\r\n\r\n  //new unit\r\n  let [newWorkPeriod, setNewWorkPeriod] = useState({\r\n    user_type: null,\r\n    branch_id: null,\r\n    uploading: false,\r\n  });\r\n\r\n  //search result\r\n  let [searchedWorkPeriod, setSearchedWorkPeriod] = useState({\r\n    list: null,\r\n    searched: false,\r\n  });\r\n\r\n  //useEffect == componentDidMount\r\n  useEffect(() => {\r\n    authUserInfo.details &&\r\n      setNewWorkPeriod({\r\n        branch_id: authUserInfo.details.branch_id\r\n          ? authUserInfo.details.branch_id\r\n          : null,\r\n        user_type: authUserInfo.details.user_type,\r\n      });\r\n  }, []);\r\n\r\n  //set branch id\r\n  const handleSetBranchId = (branch) => {\r\n    setNewWorkPeriod({\r\n      ...newWorkPeriod,\r\n      branch_id: branch.id,\r\n    });\r\n  };\r\n\r\n  //search work periods here\r\n  const handleSearch = (e) => {\r\n    let searchInput = e.target.value.toLowerCase();\r\n    if (searchInput.length === 0) {\r\n      setSearchedWorkPeriod({ ...searchedWorkPeriod, searched: false });\r\n    } else {\r\n      let searchedList = workPeriodForSearch.filter((item) => {\r\n        let lowerCaseItemBranchName = item.branch_name.toLowerCase();\r\n        let lowerCaseItemUserName = item.started_by.toLowerCase();\r\n        let lowerCaseItemDate = item.date.toLowerCase();\r\n        let lowerCaseItemUserName2 =\r\n          item.ended_by && item.ended_by.toLowerCase();\r\n        return (\r\n          lowerCaseItemBranchName.includes(searchInput) ||\r\n          lowerCaseItemUserName.includes(searchInput) ||\r\n          lowerCaseItemDate.includes(searchInput) ||\r\n          (lowerCaseItemUserName2 &&\r\n            lowerCaseItemUserName2.includes(searchInput))\r\n        );\r\n      });\r\n      setSearchedWorkPeriod({\r\n        ...searchedWorkPeriod,\r\n        list: searchedList,\r\n        searched: true,\r\n      });\r\n    }\r\n  };\r\n\r\n  //Save New work period\r\n  const handleSaveNewWorkPeriod = (e) => {\r\n    e.preventDefault();\r\n    if (newWorkPeriod.branch_id) {\r\n      setNewWorkPeriod({\r\n        ...newWorkPeriod,\r\n        uploading: true,\r\n      });\r\n      const url = BASE_URL + `/settings/new-work-period`;\r\n      let date =\r\n        weekday[new Date().getDay()] +\r\n        \", \" +\r\n        new Date().getDate() +\r\n        \" \" +\r\n        month[new Date().getMonth()] +\r\n        \", \" +\r\n        new Date().getFullYear();\r\n\r\n      let time = new Date().getTime();\r\n\r\n      let formData = {\r\n        date: date,\r\n        branch_id: newWorkPeriod.branch_id,\r\n        started_at: time,\r\n      };\r\n      return axios\r\n        .post(url, formData, {\r\n          headers: { Authorization: `Bearer ${getCookie()}` },\r\n        })\r\n        .then((res) => {\r\n          if (res.data === \"exist\") {\r\n            authUserInfo.details &&\r\n              setNewWorkPeriod({\r\n                branch_id: authUserInfo.details.branch_id\r\n                  ? authUserInfo.details.branch_id\r\n                  : null,\r\n                user_type: authUserInfo.details.user_type,\r\n\r\n                uploading: false,\r\n              });\r\n            toast.error(\r\n              `${_t(t(\"Please end the started work period first\"))}`,\r\n              {\r\n                position: \"bottom-center\",\r\n                autoClose: 10000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                className: \"text-center toast-notification\",\r\n              }\r\n            );\r\n          } else {\r\n            authUserInfo.details &&\r\n              setNewWorkPeriod({\r\n                branch_id: authUserInfo.details.branch_id\r\n                  ? authUserInfo.details.branch_id\r\n                  : null,\r\n                user_type: authUserInfo.details.user_type,\r\n\r\n                uploading: false,\r\n              });\r\n            setWorkPeriodList(res.data[0]);\r\n            setWorkPeriodListForSearch(res.data[1]);\r\n            setSearchedWorkPeriod({\r\n              ...searchedWorkPeriod,\r\n              list: res.data[1],\r\n            });\r\n            setLoading(false);\r\n            toast.success(`${_t(t(\"Work period has been started\"))}`, {\r\n              position: \"bottom-center\",\r\n              autoClose: 10000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              className: \"text-center toast-notification\",\r\n            });\r\n          }\r\n        })\r\n        .catch(() => {\r\n          setLoading(false);\r\n          setNewWorkPeriod({\r\n            ...newWorkPeriod,\r\n            uploading: false,\r\n          });\r\n          toast.error(`${_t(t(\"Please try again\"))}`, {\r\n            position: \"bottom-center\",\r\n            autoClose: 10000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            className: \"text-center toast-notification\",\r\n          });\r\n        });\r\n    } else {\r\n      toast.error(`${_t(t(\"Please select a branch\"))}`, {\r\n        position: \"bottom-center\",\r\n        autoClose: 10000,\r\n        hideProgressBar: false,\r\n        closeOnClick: true,\r\n        pauseOnHover: true,\r\n        className: \"text-center toast-notification\",\r\n      });\r\n    }\r\n  };\r\n\r\n  //milisec to hour min\r\n  const millisToMinutesAndHours = (millis) => {\r\n    var minutes = Math.floor(millis / 60000);\r\n    var hours = Math.floor(minutes / 60);\r\n    minutes = Math.floor(minutes % 60);\r\n    var seconds = ((millis % 60000) / 1000).toFixed(0);\r\n    return `${hours} ${_t(t(\"hr\"))} - ${minutes} ${_t(t(\"min\"))} - ${seconds < 10 ? \"0\" : \"\"\r\n      }${seconds} ${_t(t(\"sec\"))}`;\r\n  };\r\n\r\n  //end confirmation modal of workPeriod\r\n  const handleDeleteConfirmation = (id) => {\r\n    confirmAlert({\r\n      customUI: ({ onClose }) => {\r\n        return (\r\n          <div className=\"card card-body\">\r\n            <h1>{_t(t(\"Are you sure?\"))}</h1>\r\n            <p className=\"text-center\">{_t(t(\"You want to end now?\"))}</p>\r\n            <div className=\"d-flex justify-content-center\">\r\n              <button\r\n                className=\"btn btn-primary\"\r\n                onClick={() => {\r\n                  handleEndWorkPeriod(id);\r\n                  onClose();\r\n                }}\r\n              >\r\n                {_t(t(\"Yes, end work period!\"))}\r\n              </button>\r\n              <button className=\"btn btn-success ml-2 px-3\" onClick={onClose}>\r\n                {_t(t(\"No\"))}\r\n              </button>\r\n            </div>\r\n          </div>\r\n        );\r\n      },\r\n    });\r\n  };\r\n\r\n  //end here\r\n  const handleEndWorkPeriod = (id) => {\r\n    setNewWorkPeriod({\r\n      ...newWorkPeriod,\r\n      uploading: true,\r\n    });\r\n    const url = BASE_URL + `/settings/update-work-period`;\r\n    let time = new Date().getTime();\r\n    let formData = {\r\n      id: id,\r\n      ended_at: time,\r\n    };\r\n    return axios\r\n      .post(url, formData, {\r\n        headers: { Authorization: `Bearer ${getCookie()}` },\r\n      })\r\n      .then((res) => {\r\n        if (res.data !== \"orderExist\" && res.data !== \"addClosing\") {\r\n          authUserInfo.details &&\r\n            setNewWorkPeriod({\r\n              branch_id: authUserInfo.details.branch_id\r\n                ? authUserInfo.details.branch_id\r\n                : null,\r\n              user_type: authUserInfo.details.user_type,\r\n\r\n              uploading: false,\r\n            });\r\n          setWorkPeriodList(res.data[0]);\r\n          setWorkPeriodListForSearch(res.data[1]);\r\n          setSearchedWorkPeriod({\r\n            ...searchedWorkPeriod,\r\n            list: res.data[1],\r\n          });\r\n          setLoading(false);\r\n          toast.success(`${_t(t(\"Work period has been ended\"))}`, {\r\n            position: \"bottom-center\",\r\n            autoClose: 10000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            className: \"text-center toast-notification\",\r\n          });\r\n        } else {\r\n          if (res.data === \"addClosing\") {\r\n            toast.error(`${_t(t(\"Add closing stock of ingredients\"))}`, {\r\n              position: \"bottom-center\",\r\n              autoClose: 10000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              className: \"text-center toast-notification\",\r\n            });\r\n          } else {\r\n            toast.error(\r\n              `${_t(\r\n                t(\"All submitted orders need to be settled to end workperiod\")\r\n              )}`,\r\n              {\r\n                position: \"bottom-center\",\r\n                autoClose: 10000,\r\n                hideProgressBar: false,\r\n                closeOnClick: true,\r\n                pauseOnHover: true,\r\n                className: \"text-center toast-notification\",\r\n              }\r\n            );\r\n          }\r\n          setLoading(false);\r\n          setNewWorkPeriod({\r\n            ...newWorkPeriod,\r\n            uploading: false,\r\n          });\r\n        }\r\n      })\r\n      .catch(() => {\r\n        setLoading(false);\r\n        setNewWorkPeriod({\r\n          ...newWorkPeriod,\r\n          uploading: false,\r\n        });\r\n        toast.error(`${_t(t(\"Please try again\"))}`, {\r\n          position: \"bottom-center\",\r\n          autoClose: 10000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          className: \"text-center toast-notification\",\r\n        });\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{_t(t(\"Work Periods\"))}</title>\r\n      </Helmet>\r\n      <main id=\"main\" data-simplebar>\r\n        <div className=\"container\">\r\n          <div className=\"row t-mt-10 gx-2\">\r\n            <div className=\"col-12 t-mb-30 mb-lg-0\">\r\n              {newWorkPeriod.uploading === true || loading === true ? (\r\n                pageLoading()\r\n              ) : (\r\n                <div className=\"t-bg-white \">\r\n                  {/* next page data spin loading */}\r\n                  <div className={`${dataPaginating && \"loading\"}`}></div>\r\n                  {/* spin loading ends */}\r\n                  <div className=\"row gx-2 align-items-center t-pt-15 t-pb-15 t-pl-15 t-pr-15 t-shadow\">\r\n                    <div className=\"col-12 t-mb-15\">\r\n                      <ul className=\"t-list fk-breadcrumb\">\r\n                        <li className=\"fk-breadcrumb__list\">\r\n                          <span className=\"t-link fk-breadcrumb__link text-capitalize\">\r\n                            {!searchedWorkPeriod.searched\r\n                              ? _t(t(\"Work periods\"))\r\n                              : _t(t(\"Search Result\"))}\r\n                          </span>\r\n                        </li>\r\n                      </ul>\r\n                    </div>\r\n                    <div className=\"col-md-6 col-lg-5\">\r\n                      <div className=\"input-group\">\r\n                        <button className=\"btn btn-primary\" type=\"button\">\r\n                          <i className=\"fa fa-search\" aria-hidden=\"true\"></i>\r\n                        </button>\r\n                        <div className=\"form-file\">\r\n                          <input\r\n                            type=\"text\"\r\n                            className=\"form-control border-0 form-control--light-1 rounded-0\"\r\n                            placeholder={\r\n                              _t(t(\"Search by branch, date, user\")) + \"..\"\r\n                            }\r\n                            onChange={handleSearch}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                    <div className=\"col-md-6 col-lg-7 t-mb-15 mb-md-0\">\r\n                      <div className=\"row gx-2 align-items-center\">\r\n                        {authUserInfo.details !== null &&\r\n                          authUserInfo.details.user_type !== \"staff\" ? (\r\n                          <>\r\n                            <div className=\"col-md-7 t-mb-15 mb-md-0 mt-3 mt-md-0\">\r\n                              <Select\r\n                                options={branchForSearch && branchForSearch}\r\n                                components={makeAnimated()}\r\n                                getOptionLabel={(option) => option.name}\r\n                                getOptionValue={(option) => option.name}\r\n                                classNamePrefix=\"select\"\r\n                                className=\"xsm-text\"\r\n                                onChange={handleSetBranchId}\r\n                                maxMenuHeight=\"200px\"\r\n                                placeholder={\r\n                                  _t(t(\"Please select a branch\")) + \"..\"\r\n                                }\r\n                              />\r\n                            </div>\r\n                            <div className=\"col-md-5\">\r\n                              <ul className=\"t-list fk-sort align-items-center justify-content-center\">\r\n                                <li className=\"fk-sort__list mb-0 flex-grow-1\">\r\n                                  <button\r\n                                    onClick={handleSaveNewWorkPeriod}\r\n                                    className=\"w-100 btn btn-secondary sm-text text-uppercase\"\r\n                                  >\r\n                                    {_t(t(\"start work period\"))}\r\n                                  </button>\r\n                                </li>\r\n                              </ul>\r\n                            </div>\r\n                          </>\r\n                        ) : (\r\n                          <div className=\"col-12 col-md-5 ml-auto mt-2 mt-md-0\">\r\n                            <ul className=\"t-list fk-sort align-items-center justify-content-center\">\r\n                              <li className=\"fk-sort__list mb-0 flex-grow-1\">\r\n                                <button\r\n                                  onClick={handleSaveNewWorkPeriod}\r\n                                  className=\"w-100 btn btn-secondary sm-text text-uppercase\"\r\n                                >\r\n                                  {_t(t(\"start work period\"))}\r\n                                </button>\r\n                              </li>\r\n                            </ul>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"fk-scroll--order-history\" data-simplebar>\r\n                    <div className=\"t-pl-15 t-pr-15\">\r\n                      <div className=\"table-responsive\">\r\n                        <table className=\"table table-bordered table-hover min-table-height mt-4\">\r\n                          <thead className=\"align-middle\">\r\n                            <tr>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"S/L\"))}\r\n                              </th>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Branch\"))}\r\n                              </th>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Started by\"))}\r\n                              </th>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Date\"))}\r\n                              </th>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Started at\"))}\r\n                              </th>\r\n                              {showManageStock ? <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Stock\"))}\r\n                              </th> : null}\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Ended at\"))}\r\n                              </th>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Ended by\"))}\r\n                              </th>\r\n\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Total time\"))}\r\n                              </th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody className=\"align-middle\">\r\n                            {!searchedWorkPeriod.searched\r\n                              ? [\r\n                                workPeriodList && [\r\n                                  workPeriodList.data.length === 0 ? (\r\n                                    <tr className=\"align-middle\">\r\n                                      <td\r\n                                        scope=\"row\"\r\n                                        colSpan=\"8\"\r\n                                        className=\"xsm-text align-middle text-center\"\r\n                                      >\r\n                                        {_t(t(\"No data available\"))}\r\n                                      </td>\r\n                                    </tr>\r\n                                  ) : (\r\n                                    workPeriodList.data.map((item, index) => {\r\n                                      return (\r\n                                        <tr\r\n                                          className=\"align-middle\"\r\n                                          key={index}\r\n                                        >\r\n                                          <th\r\n                                            scope=\"row\"\r\n                                            className=\"xsm-text text-capitalize align-middle text-center\"\r\n                                          >\r\n                                            {index +\r\n                                              1 +\r\n                                              (workPeriodList.current_page -\r\n                                                1) *\r\n                                              workPeriodList.per_page}\r\n                                          </th>\r\n\r\n                                          <td className=\"xsm-text align-middle text-center text-secondary\">\r\n                                            {item.branch_name}\r\n                                          </td>\r\n\r\n                                          <td className=\"xsm-text align-middle text-center\">\r\n                                            {item.started_by}\r\n                                          </td>\r\n\r\n                                          <td className=\"xsm-text align-middle text-center\">\r\n                                            {item.date}\r\n                                          </td>\r\n\r\n                                          <td className=\"xsm-text align-middle text-center text-green\">\r\n                                            <Moment format=\"LT\">\r\n                                              {new Date(item.created_at)}\r\n                                            </Moment>\r\n                                          </td>\r\n\r\n                                          {/* show if manage stock is enable */}\r\n                                          {showManageStock ? <td className=\"xsm-text align-middle text-center\">\r\n                                            <NavLink\r\n                                              className={`btn xxsm-text ${item.ended_at === null\r\n                                                ? \"btn-secondary\"\r\n                                                : \"btn-success\"\r\n                                                } btn-sm p-1`}\r\n                                              to={\r\n                                                `/dashboard/closing-stock/` +\r\n                                                item.started_at\r\n                                              }\r\n                                            >\r\n                                              {_t(t(\"Closing Stock\"))}\r\n                                            </NavLink>\r\n                                          </td> : null}\r\n\r\n\r\n                                          <td className=\"xsm-text align-middle text-center text-primary\">\r\n                                            {item.ended_at ? (\r\n                                              <Moment format=\"LT\">\r\n                                                {new Date(item.updated_at)}\r\n                                              </Moment>\r\n                                            ) : (\r\n                                              \"-\"\r\n                                            )}\r\n                                          </td>\r\n\r\n                                          <td className=\"xsm-text align-middle text-center\">\r\n                                            {item.ended_at ? (\r\n                                              item.ended_by\r\n                                            ) : (\r\n                                              <button\r\n                                                className=\"btn btn-primary btn-sm py-0 px-4\"\r\n                                                onClick={() => {\r\n                                                  handleDeleteConfirmation(\r\n                                                    item.id\r\n                                                  );\r\n                                                }}\r\n                                              >\r\n                                                {_t(t(\"End\"))}\r\n                                              </button>\r\n                                            )}\r\n                                          </td>\r\n                                          <td className=\"xsm-text align-middle text-center\">\r\n                                            {item.ended_at\r\n                                              ? millisToMinutesAndHours(\r\n                                                parseInt(\r\n                                                  item.ended_at -\r\n                                                  item.started_at\r\n                                                )\r\n                                              )\r\n                                              : \"-\"}\r\n                                          </td>\r\n                                        </tr>\r\n                                      );\r\n                                    })\r\n                                  ),\r\n                                ],\r\n                              ]\r\n                              : [\r\n                                /* searched data, logic === haveData*/\r\n                                searchedWorkPeriod && [\r\n                                  searchedWorkPeriod.list.length === 0 ? (\r\n                                    <tr className=\"align-middle\">\r\n                                      <td\r\n                                        scope=\"row\"\r\n                                        colSpan=\"9\"\r\n                                        className=\"xsm-text align-middle text-center\"\r\n                                      >\r\n                                        {_t(t(\"No data available\"))}\r\n                                      </td>\r\n                                    </tr>\r\n                                  ) : (\r\n                                    searchedWorkPeriod.list.map(\r\n                                      (item, index) => {\r\n                                        return (\r\n                                          <tr\r\n                                            className=\"align-middle\"\r\n                                            key={index}\r\n                                          >\r\n                                            <th\r\n                                              scope=\"row\"\r\n                                              className=\"xsm-text text-capitalize align-middle text-center\"\r\n                                            >\r\n                                              {index +\r\n                                                1 +\r\n                                                (workPeriodList.current_page -\r\n                                                  1) *\r\n                                                workPeriodList.per_page}\r\n                                            </th>\r\n\r\n                                            <td className=\"xsm-text align-middle text-center text-secondary\">\r\n                                              {item.branch_name}\r\n                                            </td>\r\n\r\n                                            <td className=\"xsm-text align-middle text-center\">\r\n                                              {item.started_by}\r\n                                            </td>\r\n\r\n                                            <td className=\"xsm-text align-middle text-center\">\r\n                                              {item.date}\r\n                                            </td>\r\n\r\n                                            <td className=\"xsm-text align-middle text-center\">\r\n                                              <Moment format=\"LT\">\r\n                                                {new Date(item.created_at)}\r\n                                              </Moment>\r\n                                            </td>\r\n                                            {/* \r\n                                            <td className=\"xsm-text align-middle text-center\">\r\n                                              <NavLink\r\n                                                className={`btn xxsm-text ${item.ended_at === null\r\n                                                    ? \"btn-secondary\"\r\n                                                    : \"btn-success\"\r\n                                                  } btn-sm p-1`}\r\n                                                to={\r\n                                                  `/dashboard/closing-stock/` +\r\n                                                  item.started_at\r\n                                                }\r\n                                              >\r\n                                                {_t(t(\"Closing Stock\"))}\r\n                                              </NavLink>\r\n                                            </td> */}\r\n\r\n                                            <td className=\"xsm-text align-middle text-center\">\r\n                                              {item.ended_at ? (\r\n                                                <Moment format=\"LT\">\r\n                                                  {new Date(item.updated_at)}\r\n                                                </Moment>\r\n                                              ) : (\r\n                                                \"-\"\r\n                                              )}\r\n                                            </td>\r\n\r\n                                            <td className=\"xsm-text align-middle text-center\">\r\n                                              {item.ended_at ? (\r\n                                                item.ended_by\r\n                                              ) : (\r\n                                                <button\r\n                                                  className=\"btn btn-primary btn-sm py-0 px-4\"\r\n                                                  onClick={() => {\r\n                                                    handleDeleteConfirmation(\r\n                                                      item.id\r\n                                                    );\r\n                                                  }}\r\n                                                >\r\n                                                  {_t(t(\"End\"))}\r\n                                                </button>\r\n                                              )}\r\n                                            </td>\r\n\r\n                                            <td className=\"xsm-text align-middle text-center\">\r\n                                              {item.ended_at\r\n                                                ? millisToMinutesAndHours(\r\n                                                  parseInt(\r\n                                                    item.ended_at -\r\n                                                    item.started_at\r\n                                                  )\r\n                                                )\r\n                                                : \"-\"}\r\n                                            </td>\r\n                                          </tr>\r\n                                        );\r\n                                      }\r\n                                    )\r\n                                  ),\r\n                                ],\r\n                              ]}\r\n                          </tbody>\r\n                        </table>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              {/* pagination loading effect */}\r\n              {newWorkPeriod.uploading === true || loading === true\r\n                ? paginationLoading()\r\n                : [\r\n                  // logic === !searched\r\n                  !searchedWorkPeriod.searched ? (\r\n                    <div key=\"fragment4\">\r\n                      <div className=\"t-bg-white mt-1 t-pt-5 t-pb-5\">\r\n                        <div className=\"row align-items-center t-pl-15 t-pr-15\">\r\n                          <div className=\"col-md-7 t-mb-15 mb-md-0\">\r\n                            {/* pagination function */}\r\n                            {pagination(\r\n                              workPeriodList,\r\n                              setPaginatedWorkPeriod\r\n                            )}\r\n                          </div>\r\n                          <div className=\"col-md-5\">\r\n                            <ul className=\"t-list d-flex justify-content-md-end align-items-center\">\r\n                              <li className=\"t-list__item\">\r\n                                <span className=\"d-inline-block sm-text\">\r\n                                  {showingData(workPeriodList)}\r\n                                </span>\r\n                              </li>\r\n                            </ul>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    // if searched\r\n                    <div className=\"t-bg-white mt-1 t-pt-5 t-pb-5\">\r\n                      <div className=\"row align-items-center t-pl-15 t-pr-15\">\r\n                        <div className=\"col-md-7 t-mb-15 mb-md-0\">\r\n                          <ul className=\"t-list d-flex\">\r\n                            <li className=\"t-list__item no-pagination-style\">\r\n                              <button\r\n                                className=\"btn btn-primary btn-sm\"\r\n                                onClick={() =>\r\n                                  setSearchedWorkPeriod({\r\n                                    ...searchedWorkPeriod,\r\n                                    searched: false,\r\n                                  })\r\n                                }\r\n                              >\r\n                                {_t(t(\"Clear Search\"))}\r\n                              </button>\r\n                            </li>\r\n                          </ul>\r\n                        </div>\r\n                        <div className=\"col-md-5\">\r\n                          <ul className=\"t-list d-flex justify-content-md-end align-items-center\">\r\n                            <li className=\"t-list__item\">\r\n                              <span className=\"d-inline-block sm-text\">\r\n                                {searchedShowingData(\r\n                                  searchedWorkPeriod,\r\n                                  workPeriodForSearch\r\n                                )}\r\n                              </span>\r\n                            </li>\r\n                          </ul>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ),\r\n                ]}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default WorkPeriod;\r\n"]},"metadata":{},"sourceType":"module"}