{"ast":null,"code":"import _defineProperty from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useContext}from\"react\";import{NavLink,useHistory}from\"react-router-dom\";//jQuery initialization\nimport $ from\"jquery\";//functions\nimport{_t,getCookie,modalLoading,getSystemSettings}from\"../../functions/Functions\";import{useTranslation}from\"react-i18next\";//axios and base url\nimport axios from\"axios\";import{BASE_URL}from\"../../BaseUrl\";//3rd party packages\nimport{Helmet}from\"react-helmet\";import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import Cookies from\"universal-cookie\";//context consumer\nimport{SettingsContext}from\"../../contexts/Settings\";import{UserContext}from\"../../contexts/User\";import{RestaurantContext}from\"../../contexts/Restaurant\";var cookies=new Cookies();var ForgetPw=function ForgetPw(){var _useTranslation=useTranslation(),t=_useTranslation.t;var history=useHistory();//getting context values here\nvar _useContext=useContext(SettingsContext),loading=_useContext.loading,setLoading=_useContext.setLoading,generalSettings=_useContext.generalSettings;var _useContext2=useContext(UserContext),authUserInfo=_useContext2.authUserInfo;//state hooks here\nvar _useState=useState({email:null}),_useState2=_slicedToArray(_useState,2),credentials=_useState2[0],setCredentials=_useState2[1];useEffect(function(){handleJquery();checkAuth();},[]);//jQuery\nvar handleJquery=function handleJquery(){//obj Image Animation\nvar hoverLayer=$(\"body\");var objImgOne=$(\".fk-global-img__obj\");//Animation Init\nhoverLayer.mousemove(function(e){var valueX=e.pageX*-1/60;var valueY=e.pageY*-1/80;if(objImgOne.length){objImgOne.css({transform:\"translate3d(\"+valueX+\"px,\"+valueY+\"px, 0)\"});}});};//redirect if logged in\nvar checkAuth=function checkAuth(){getCookie()!==undefined&&history.replace(\"/dashboard\");};//set credentials here on input change\nvar handleCredentials=function handleCredentials(e){setCredentials(_objectSpread(_objectSpread({},credentials),{},_defineProperty({},e.target.name,e.target.value)));};//submit credentials to server to send token to email\nvar handleSubmit=function handleSubmit(e){e.preventDefault();setLoading(true);var url=BASE_URL+\"/auth/resetPassword\";return axios.post(url,credentials).then(function(res){if(res.data===\"banned\"){toast.error(\"\".concat(_t(t(\"Sorry, you are banned!\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}if(res.data===\"noUser\"){toast.error(\"\".concat(_t(t(\"Sorry, no user with this email!\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}if(res.data===\"ok\"){toast.success(\"\".concat(_t(t(\"A link has been sent to your email, Please check your email to reset your password\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}if(res.data===\"smtp\"){toast.error(\"\".concat(_t(t(\"Email configuration needs to be setup by admin to reset password\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});}setLoading(false);}).catch(function(error){setLoading(false);toast.error(\"\".concat(_t(t(\"Please try again!\"))),{position:\"bottom-center\",autoClose:10000,hideProgressBar:false,closeOnClick:true,pauseOnHover:true,className:\"text-center toast-notification\"});});};var style={logo:{backgroundColor:\"none\",// generalSettings &&\n// getSystemSettings(generalSettings, \"type_background\"),\nbackgroundImage:generalSettings&&\"url(\".concat(getSystemSettings(generalSettings,\"type_logo\"),\")\")}};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Helmet,null,/*#__PURE__*/React.createElement(\"title\",null,_t(t(\"Reset Password\")))),/*#__PURE__*/React.createElement(\"main\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"fk-global-access\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-none d-lg-block\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fk-global-img text-center\"},/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/img/verifiy-img.png\",alt:\"khadyo\",className:\"img-fluid mx-auto fk-global-img__is\"}),/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/img/obj-1.png\",alt:\"khadyo\",className:\"img-fluid fk-global-img__obj fk-global-img__obj-1\"}),/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/img/obj-8.png\",alt:\"khadyo\",className:\"img-fluid fk-global-img__obj fk-global-img__obj-2\"}),/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/img/obj-7.png\",alt:\"khadyo\",className:\"img-fluid fk-global-img__obj fk-global-img__obj-6\"}),/*#__PURE__*/React.createElement(\"img\",{src:\"/assets/img/obj-9.png\",alt:\"khadyo\",className:\"img-fluid fk-global-img__obj fk-global-img__obj-8\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"container my-md-auto\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fk-brand fk-brand--sr-lg\"},window.location.pathname===\"/\"?/*#__PURE__*/React.createElement(NavLink,{to:{pathname:\"/refresh\",state:\"/\"},exact:true,className:\"t-link w-100\"},/*#__PURE__*/React.createElement(\"span\",{className:\"fk-brand__img fk-brand__img--fk\",style:style.logo})):/*#__PURE__*/React.createElement(NavLink,{to:\"/\",className:\"t-link w-100\"},/*#__PURE__*/React.createElement(\"span\",{className:\"fk-brand__img fk-brand__img--fk\",style:style.logo})))),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-8 col-lg-6 col-xl-4 t-mt-50\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fk-global-form\"},loading?/*#__PURE__*/React.createElement(\"div\",{key:\"login-form\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"mt-0 text-capitalize font-weight-bold\"},_t(t(\"Generating link\"))),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},modalLoading(3),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"t-mr-8\"},/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"btn btn-primary sm-text text-uppercase\"},_t(t(\"Please wait\"))))))))):/*#__PURE__*/React.createElement(\"div\",{key:\"loading\"},/*#__PURE__*/React.createElement(\"h3\",{className:\"mt-0 text-capitalize font-weight-bold\"},_t(t(\"reset password\"))),/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 t-mb-15\"},/*#__PURE__*/React.createElement(\"input\",{onChange:handleCredentials,type:\"email\",name:\"email\",placeholder:\"Enter your email\",value:credentials.email,required:true,className:\"form-control border-0 rounded-1\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12\"},/*#__PURE__*/React.createElement(\"div\",{className:\"d-flex align-items-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"t-mr-8\"},/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-success sm-text text-uppercase\"},_t(t(\"Reset Password\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"t-mr-8 ml-auto\"},/*#__PURE__*/React.createElement(NavLink,{to:\"/login\",className:\"btn btn-primary sm-text text-uppercase\"},_t(t(\"Sign in\"))))))))))))))));};export default ForgetPw;","map":{"version":3,"sources":["/Users/raza/Downloads/khadyo_source_code/client/src/resources/common/ForgetPw.js"],"names":["React","useEffect","useState","useContext","NavLink","useHistory","$","_t","getCookie","modalLoading","getSystemSettings","useTranslation","axios","BASE_URL","Helmet","toast","Cookies","SettingsContext","UserContext","RestaurantContext","cookies","ForgetPw","t","history","loading","setLoading","generalSettings","authUserInfo","email","credentials","setCredentials","handleJquery","checkAuth","hoverLayer","objImgOne","mousemove","e","valueX","pageX","valueY","pageY","length","css","transform","undefined","replace","handleCredentials","target","name","value","handleSubmit","preventDefault","url","post","then","res","data","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","className","success","catch","style","logo","backgroundColor","backgroundImage","window","location","pathname","state"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\n\r\n//jQuery initialization\r\nimport $ from \"jquery\";\r\n\r\n//functions\r\nimport {\r\n  _t,\r\n  getCookie,\r\n  modalLoading,\r\n  getSystemSettings,\r\n} from \"../../functions/Functions\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\n//axios and base url\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../../BaseUrl\";\r\n\r\n//3rd party packages\r\nimport { Helmet } from \"react-helmet\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Cookies from \"universal-cookie\";\r\n\r\n//context consumer\r\nimport { SettingsContext } from \"../../contexts/Settings\";\r\nimport { UserContext } from \"../../contexts/User\";\r\nimport { RestaurantContext } from \"../../contexts/Restaurant\";\r\n\r\nconst cookies = new Cookies();\r\n\r\nconst ForgetPw = () => {\r\n  const { t } = useTranslation();\r\n  const history = useHistory();\r\n\r\n  //getting context values here\r\n  let { loading, setLoading, generalSettings } = useContext(SettingsContext);\r\n  let { authUserInfo } = useContext(UserContext);\r\n\r\n  //state hooks here\r\n  const [credentials, setCredentials] = useState({\r\n    email: null,\r\n  });\r\n\r\n  useEffect(() => {\r\n    handleJquery();\r\n    checkAuth();\r\n  }, []);\r\n\r\n  //jQuery\r\n  const handleJquery = () => {\r\n    //obj Image Animation\r\n    var hoverLayer = $(\"body\");\r\n    var objImgOne = $(\".fk-global-img__obj\");\r\n\r\n    //Animation Init\r\n    hoverLayer.mousemove(function (e) {\r\n      var valueX = (e.pageX * -1) / 60;\r\n      var valueY = (e.pageY * -1) / 80;\r\n      if (objImgOne.length) {\r\n        objImgOne.css({\r\n          transform: \"translate3d(\" + valueX + \"px,\" + valueY + \"px, 0)\",\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  //redirect if logged in\r\n  const checkAuth = () => {\r\n    getCookie() !== undefined && history.replace(\"/dashboard\");\r\n  };\r\n\r\n  //set credentials here on input change\r\n  const handleCredentials = (e) => {\r\n    setCredentials({\r\n      ...credentials,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  //submit credentials to server to send token to email\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    const url = BASE_URL + \"/auth/resetPassword\";\r\n    return axios\r\n      .post(url, credentials)\r\n      .then((res) => {\r\n        if (res.data === \"banned\") {\r\n          toast.error(`${_t(t(\"Sorry, you are banned!\"))}`, {\r\n            position: \"bottom-center\",\r\n            autoClose: 10000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            className: \"text-center toast-notification\",\r\n          });\r\n        }\r\n        if (res.data === \"noUser\") {\r\n          toast.error(`${_t(t(\"Sorry, no user with this email!\"))}`, {\r\n            position: \"bottom-center\",\r\n            autoClose: 10000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: true,\r\n            className: \"text-center toast-notification\",\r\n          });\r\n        }\r\n        if (res.data === \"ok\") {\r\n          toast.success(\r\n            `${_t(\r\n              t(\r\n                \"A link has been sent to your email, Please check your email to reset your password\"\r\n              )\r\n            )}`,\r\n            {\r\n              position: \"bottom-center\",\r\n              autoClose: 10000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              className: \"text-center toast-notification\",\r\n            }\r\n          );\r\n        }\r\n        if (res.data === \"smtp\") {\r\n          toast.error(\r\n            `${_t(\r\n              t(\r\n                \"Email configuration needs to be setup by admin to reset password\"\r\n              )\r\n            )}`,\r\n            {\r\n              position: \"bottom-center\",\r\n              autoClose: 10000,\r\n              hideProgressBar: false,\r\n              closeOnClick: true,\r\n              pauseOnHover: true,\r\n              className: \"text-center toast-notification\",\r\n            }\r\n          );\r\n        }\r\n        setLoading(false);\r\n      })\r\n      .catch((error) => {\r\n        setLoading(false);\r\n        toast.error(`${_t(t(\"Please try again!\"))}`, {\r\n          position: \"bottom-center\",\r\n          autoClose: 10000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          className: \"text-center toast-notification\",\r\n        });\r\n      });\r\n  };\r\n\r\n  const style = {\r\n    logo: {\r\n      backgroundColor: \"none\",\r\n      // generalSettings &&\r\n      // getSystemSettings(generalSettings, \"type_background\"),\r\n      backgroundImage:\r\n        generalSettings &&\r\n        `url(${getSystemSettings(generalSettings, \"type_logo\")})`,\r\n    },\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{_t(t(\"Reset Password\"))}</title>\r\n      </Helmet>\r\n      <main>\r\n        <div className=\"fk-global-access\">\r\n          <div className=\"d-none d-lg-block\">\r\n            <div className=\"fk-global-img text-center\">\r\n              <img\r\n                src=\"/assets/img/verifiy-img.png\"\r\n                alt=\"khadyo\"\r\n                className=\"img-fluid mx-auto fk-global-img__is\"\r\n              />\r\n              <img\r\n                src=\"/assets/img/obj-1.png\"\r\n                alt=\"khadyo\"\r\n                className=\"img-fluid fk-global-img__obj fk-global-img__obj-1\"\r\n              />\r\n              <img\r\n                src=\"/assets/img/obj-8.png\"\r\n                alt=\"khadyo\"\r\n                className=\"img-fluid fk-global-img__obj fk-global-img__obj-2\"\r\n              />\r\n              <img\r\n                src=\"/assets/img/obj-7.png\"\r\n                alt=\"khadyo\"\r\n                className=\"img-fluid fk-global-img__obj fk-global-img__obj-6\"\r\n              />\r\n              <img\r\n                src=\"/assets/img/obj-9.png\"\r\n                alt=\"khadyo\"\r\n                className=\"img-fluid fk-global-img__obj fk-global-img__obj-8\"\r\n              />\r\n            </div>\r\n          </div>\r\n          <div className=\"container my-md-auto\">\r\n            <div className=\"row\">\r\n              <div className=\"fk-brand fk-brand--sr-lg\">\r\n                {window.location.pathname === \"/\" ? (\r\n                  <NavLink\r\n                    to={{ pathname: \"/refresh\", state: \"/\" }}\r\n                    exact\r\n                    className=\"t-link w-100\"\r\n                  >\r\n                    <span\r\n                      className=\"fk-brand__img fk-brand__img--fk\"\r\n                      style={style.logo}\r\n                    ></span>\r\n                  </NavLink>\r\n                ) : (\r\n                  <NavLink to=\"/\" className=\"t-link w-100\">\r\n                    <span\r\n                      className=\"fk-brand__img fk-brand__img--fk\"\r\n                      style={style.logo}\r\n                    ></span>\r\n                  </NavLink>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className=\"row\">\r\n              <div className=\"col-md-8 col-lg-6 col-xl-4 t-mt-50\">\r\n                <div className=\"fk-global-form\">\r\n                  {loading ? (\r\n                    <div key=\"login-form\">\r\n                      <h3 className=\"mt-0 text-capitalize font-weight-bold\">\r\n                        {_t(t(\"Generating link\"))}\r\n                      </h3>\r\n                      <form onSubmit={handleSubmit}>\r\n                        <div className=\"row\">\r\n                          {modalLoading(3)}\r\n                          <div className=\"col-12\">\r\n                            <div className=\"d-flex align-items-center\">\r\n                              <div className=\"t-mr-8\">\r\n                                <button\r\n                                  type=\"button\"\r\n                                  className=\"btn btn-primary sm-text text-uppercase\"\r\n                                >\r\n                                  {_t(t(\"Please wait\"))}\r\n                                </button>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </form>\r\n                    </div>\r\n                  ) : (\r\n                    <div key=\"loading\">\r\n                      <h3 className=\"mt-0 text-capitalize font-weight-bold\">\r\n                        {_t(t(\"reset password\"))}\r\n                      </h3>\r\n                      <form onSubmit={handleSubmit}>\r\n                        <div className=\"row\">\r\n                          <div className=\"col-12 t-mb-15\">\r\n                            <input\r\n                              onChange={handleCredentials}\r\n                              type=\"email\"\r\n                              name=\"email\"\r\n                              placeholder=\"Enter your email\"\r\n                              value={credentials.email}\r\n                              required\r\n                              className=\"form-control border-0 rounded-1\"\r\n                            />\r\n                          </div>\r\n\r\n                          <div className=\"col-12\">\r\n                            <div className=\"d-flex align-items-center\">\r\n                              <div className=\"t-mr-8\">\r\n                                <button\r\n                                  type=\"submit\"\r\n                                  className=\"btn btn-success sm-text text-uppercase\"\r\n                                >\r\n                                  {_t(t(\"Reset Password\"))}\r\n                                </button>\r\n                              </div>\r\n                              <div className=\"t-mr-8 ml-auto\">\r\n                                <NavLink\r\n                                  to=\"/login\"\r\n                                  className=\"btn btn-primary sm-text text-uppercase\"\r\n                                >\r\n                                  {_t(t(\"Sign in\"))}\r\n                                </NavLink>\r\n                              </div>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </form>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ForgetPw;\r\n"]},"metadata":{},"sourceType":"module"}