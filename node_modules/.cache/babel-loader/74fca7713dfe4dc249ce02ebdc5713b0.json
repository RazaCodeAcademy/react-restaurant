{"ast":null,"code":"import _objectSpread from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";//axios and base url\nimport axios from\"axios\";import{BASE_URL}from\"../BaseUrl\";//functions\nimport{getCookie,getSystemSettings}from\"../functions/Functions\";//3rd party packages\n//creating context api\nvar SettingsContext=React.createContext();var SettingsProvider=function SettingsProvider(_ref){var children=_ref.children;// State hooks  here\n//loading\nvar _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),dataPaginating=_useState4[0],setDataPaginating=_useState4[1];//permission group\nvar _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),permissionGroup=_useState6[0],setPermissionGroup=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),permissionGroupForSearch=_useState8[0],setPermissionGroupForSearch=_useState8[1];//permissions\nvar _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),permissions=_useState10[0],setPermissions=_useState10[1];//languages\nvar _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),languageList=_useState12[0],setLanguageList=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),navLanguageList=_useState14[0],setNavLanguageList=_useState14[1];var _useState15=useState(null),_useState16=_slicedToArray(_useState15,2),languageListForSearch=_useState16[0],setLanguageListForSearch=_useState16[1];//currencies\nvar _useState17=useState(null),_useState18=_slicedToArray(_useState17,2),currencyList=_useState18[0],setCurrencyList=_useState18[1];var _useState19=useState(null),_useState20=_slicedToArray(_useState19,2),navCurrencyList=_useState20[0],setNavCurrencyList=_useState20[1];var _useState21=useState(null),_useState22=_slicedToArray(_useState21,2),currencyListForSearch=_useState22[0],setCurrencyListForSearch=_useState22[1];//settings\nvar _useState23=useState(null),_useState24=_slicedToArray(_useState23,2),generalSettings=_useState24[0],setGeneralSettings=_useState24[1];//smtp\nvar _useState25=useState({MAIL_MAILER:null,MAIL_HOST:null,MAIL_PORT:null,MAIL_USERNAME:null,MAIL_PASSWORD:null,MAIL_ENCRYPTION:null,MAIL_FROM_ADDRESS:null,MAIL_FROM_NAME:null}),_useState26=_slicedToArray(_useState25,2),smtp=_useState26[0],setSmtp=_useState26[1];// show manage stock value\nvar _useState27=useState(true),_useState28=_slicedToArray(_useState27,2),showManageStock=_useState28[0],setshowManageStock=_useState28[1];// paypal \nvar _useState29=useState([]),_useState30=_slicedToArray(_useState29,2),paymentDetails=_useState30[0],setpaymentDetails=_useState30[1];var _useState31=useState(null),_useState32=_slicedToArray(_useState31,2),paypal_client_id=_useState32[0],setpaypal_client_id=_useState32[1];//useEffect- to get data on render\nuseEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return checkInstall();case 2:result=_context.sent;if(result===\"YES\"){//call- unauthenticated\ngetLanguages();getCurrency();getSettings();//call if authenticated\nif(getCookie()!==undefined){getSmtp();getPermissionGroups();}}case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchData(){return _ref2.apply(this,arguments);};}();// show manage stock function\nvar updateManageStockValue=function updateManageStockValue(){var url=BASE_URL+\"/settings/show-manage-stock-menu-info\";axios.get(url,{headers:{Authorization:\"Bearer \".concat(getCookie())}}).then(function(res){if(res.data.length==0||res.data[0].value==1){setshowManageStock(true);}else{setshowManageStock(false);}});};var getpaypalpaid=function getpaypalpaid(){var url=BASE_URL+\"/get-payment-client-id\";axios.get(url,{headers:{Authorization:\"Bearer \".concat(getCookie())}}).then(function(res){if(res.data===\" \"){setpaypal_client_id(null);}else{setpaypal_client_id(res.data.value);}setpaymentDetails(res.data);});};fetchData();var checkMngStk=setInterval(updateManageStockValue,5000);var checkpaypal=setInterval(getpaypalpaid,10000);updateManageStockValue();getpaypalpaid();return function(){clearInterval(checkMngStk,checkpaypal);};},[]);// install check\nvar checkInstall=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var url,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:url=BASE_URL+\"/check-install\";_context2.next=3;return axios.get(url);case 3:result=_context2.sent;return _context2.abrupt(\"return\",result.data);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function checkInstall(){return _ref3.apply(this,arguments);};}();//get all languages\nvar getLanguages=function getLanguages(){setLoading(true);var langUrl=BASE_URL+\"/settings/get-lang\";return axios.get(langUrl).then(function(res){setLanguageList(res.data[0]);setNavLanguageList(res.data[1]);setLanguageListForSearch(res.data[1]);setLoading(false);});};// get paginated languages\nvar setPaginatedLanguages=function setPaginatedLanguages(pageNo){setDataPaginating(true);var langUrl=BASE_URL+\"/settings/get-lang?page=\"+pageNo;return axios.get(langUrl).then(function(res){setLanguageList(res.data[0]);setDataPaginating(false);}).catch(function(error){});};//get smtp settings\nvar getSmtp=function getSmtp(){setLoading(true);var smtpUrl=BASE_URL+\"/settings/get-smtp\";return axios.get(smtpUrl,{headers:{Authorization:\"Bearer \".concat(getCookie())}}).then(function(res){setSmtp(_objectSpread(_objectSpread({},smtp),{},{MAIL_MAILER:res.data[0].MAIL_MAILER,MAIL_HOST:res.data[0].MAIL_HOST,MAIL_PORT:res.data[0].MAIL_PORT,MAIL_USERNAME:res.data[0].MAIL_USERNAME,MAIL_PASSWORD:res.data[0].MAIL_PASSWORD,MAIL_ENCRYPTION:res.data[0].MAIL_ENCRYPTION,MAIL_FROM_ADDRESS:res.data[0].MAIL_FROM_ADDRESS,MAIL_FROM_NAME:res.data[0].MAIL_FROM_NAME}));setLoading(false);});};//get permission groups\nvar getPermissionGroups=function getPermissionGroups(){setLoading(true);var permissionGroupUrl=BASE_URL+\"/settings/permission-group-list\";return axios.get(permissionGroupUrl,{headers:{Authorization:\"Bearer \".concat(getCookie())}}).then(function(res){setPermissionGroup(res.data[0]);setPermissionGroupForSearch(res.data[1]);setPermissions(res.data[2]);setLoading(false);});};// get paginated groups\nvar setPaginatedGropus=function setPaginatedGropus(pageNo){setDataPaginating(true);var url=BASE_URL+\"/settings/permission-group-list?page=\"+pageNo;return axios.get(url,{headers:{Authorization:\"Bearer \".concat(getCookie())}}).then(function(res){setPermissionGroup(res.data[0]);setPermissionGroupForSearch(res.data[1]);setPermissions(res.data[2]);setDataPaginating(false);}).catch(function(){});};//get all currency\nvar getCurrency=function getCurrency(){setLoading(true);var currencyUrl=BASE_URL+\"/settings/get-currency\";return axios.get(currencyUrl).then(function(res){setCurrencyList(res.data[0]);setNavCurrencyList(res.data[1]);setCurrencyListForSearch(res.data[1]);setLoading(false);});};// get paginated currency\nvar setPaginatedCurrencies=function setPaginatedCurrencies(pageNo){setDataPaginating(true);var currencyUrl=BASE_URL+\"/settings/get-currency?page=\"+pageNo;return axios.get(currencyUrl).then(function(res){setCurrencyList(res.data[0]);setDataPaginating(false);}).catch(function(error){});};//get all languages\nvar getSettings=function getSettings(){setLoading(true);var url=BASE_URL+\"/settings/general-settings\";return axios.get(url).then(function(res){setGeneralSettings(res.data);var favicon=document.getElementById(\"favicon\");favicon.href=BASE_URL+getSystemSettings(res.data,\"favicon\");setLoading(false);});};return/*#__PURE__*/React.createElement(SettingsContext.Provider,{value:{//common\nloading:loading,setLoading:setLoading,//general settings\ngeneralSettings:generalSettings,setGeneralSettings:setGeneralSettings,getLanguages:getLanguages,getCurrency:getCurrency,getSettings:getSettings,//currencies\ncurrencyList:currencyList,setCurrencyList:setCurrencyList,setPaginatedCurrencies:setPaginatedCurrencies,navCurrencyList:navCurrencyList,setNavCurrencyList:setNavCurrencyList,currencyListForSearch:currencyListForSearch,setCurrencyListForSearch:setCurrencyListForSearch,//languages\nlanguageList:languageList,setLanguageList:setLanguageList,setPaginatedLanguages:setPaginatedLanguages,navLanguageList:navLanguageList,setNavLanguageList:setNavLanguageList,languageListForSearch:languageListForSearch,setLanguageListForSearch:setLanguageListForSearch,//smtp\nsmtp:smtp,getSmtp:getSmtp,setSmtp:setSmtp,//permission group\ngetPermissionGroups:getPermissionGroups,permissionGroup:permissionGroup,setPermissionGroup:setPermissionGroup,setPaginatedGropus:setPaginatedGropus,permissionGroupForSearch:permissionGroupForSearch,setPermissionGroupForSearch:setPermissionGroupForSearch,//permissions\npermissions:permissions,setPermissions:setPermissions,//pagination\ndataPaginating:dataPaginating,setDataPaginating:setDataPaginating,//show  manage stock\nshowManageStock:showManageStock,setshowManageStock:setshowManageStock,// paypal_paypal_client_id\npaypal_client_id:paypal_client_id,setpaypal_client_id:setpaypal_client_id,paymentDetails:paymentDetails// setpaymentDetails\n}},children);};export{SettingsContext,SettingsProvider};","map":{"version":3,"sources":["/Users/raza/Downloads/khadyo_source_code/client/src/contexts/Settings.js"],"names":["React","useState","useEffect","axios","BASE_URL","getCookie","getSystemSettings","SettingsContext","createContext","SettingsProvider","children","loading","setLoading","dataPaginating","setDataPaginating","permissionGroup","setPermissionGroup","permissionGroupForSearch","setPermissionGroupForSearch","permissions","setPermissions","languageList","setLanguageList","navLanguageList","setNavLanguageList","languageListForSearch","setLanguageListForSearch","currencyList","setCurrencyList","navCurrencyList","setNavCurrencyList","currencyListForSearch","setCurrencyListForSearch","generalSettings","setGeneralSettings","MAIL_MAILER","MAIL_HOST","MAIL_PORT","MAIL_USERNAME","MAIL_PASSWORD","MAIL_ENCRYPTION","MAIL_FROM_ADDRESS","MAIL_FROM_NAME","smtp","setSmtp","showManageStock","setshowManageStock","paymentDetails","setpaymentDetails","paypal_client_id","setpaypal_client_id","fetchData","checkInstall","result","getLanguages","getCurrency","getSettings","undefined","getSmtp","getPermissionGroups","updateManageStockValue","url","get","headers","Authorization","then","res","data","length","value","getpaypalpaid","checkMngStk","setInterval","checkpaypal","clearInterval","langUrl","setPaginatedLanguages","pageNo","catch","error","smtpUrl","permissionGroupUrl","setPaginatedGropus","currencyUrl","setPaginatedCurrencies","favicon","document","getElementById","href"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\n\r\n//axios and base url\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../BaseUrl\";\r\n\r\n//functions\r\nimport { getCookie, getSystemSettings } from \"../functions/Functions\";\r\n\r\n//3rd party packages\r\n\r\n//creating context api\r\nconst SettingsContext = React.createContext();\r\n\r\nconst SettingsProvider = ({ children }) => {\r\n  // State hooks  here\r\n  //loading\r\n  const [loading, setLoading] = useState(false);\r\n  const [dataPaginating, setDataPaginating] = useState(false);\r\n\r\n  //permission group\r\n  const [permissionGroup, setPermissionGroup] = useState(null);\r\n  const [permissionGroupForSearch, setPermissionGroupForSearch] =\r\n    useState(null);\r\n\r\n  //permissions\r\n  const [permissions, setPermissions] = useState(null);\r\n\r\n  //languages\r\n  const [languageList, setLanguageList] = useState(null);\r\n  const [navLanguageList, setNavLanguageList] = useState(null);\r\n  const [languageListForSearch, setLanguageListForSearch] = useState(null);\r\n\r\n  //currencies\r\n  const [currencyList, setCurrencyList] = useState(null);\r\n  const [navCurrencyList, setNavCurrencyList] = useState(null);\r\n  const [currencyListForSearch, setCurrencyListForSearch] = useState(null);\r\n\r\n  //settings\r\n  const [generalSettings, setGeneralSettings] = useState(null);\r\n\r\n  //smtp\r\n  const [smtp, setSmtp] = useState({\r\n    MAIL_MAILER: null,\r\n    MAIL_HOST: null,\r\n    MAIL_PORT: null,\r\n    MAIL_USERNAME: null,\r\n    MAIL_PASSWORD: null,\r\n    MAIL_ENCRYPTION: null,\r\n    MAIL_FROM_ADDRESS: null,\r\n    MAIL_FROM_NAME: null,\r\n  });\r\n\r\n  // show manage stock value\r\n  const [showManageStock, setshowManageStock] = useState(true);\r\n\r\n  // paypal \r\n  const [paymentDetails, setpaymentDetails] = useState([]);\r\n  const [paypal_client_id, setpaypal_client_id] = useState(null);\r\n  //useEffect- to get data on render\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      let result = await checkInstall();\r\n      if (result === \"YES\") {\r\n        //call- unauthenticated\r\n        getLanguages();\r\n        getCurrency();\r\n        getSettings();\r\n\r\n        //call if authenticated\r\n        if (getCookie() !== undefined) {\r\n          getSmtp();\r\n          getPermissionGroups();\r\n        }\r\n      }\r\n    };\r\n\r\n    // show manage stock function\r\n    const updateManageStockValue = () => {\r\n      const url = BASE_URL + `/settings/show-manage-stock-menu-info`;\r\n      axios.get(url, {\r\n        headers: { Authorization: `Bearer ${getCookie()}` },\r\n      }).then((res) => {\r\n\r\n        if (res.data.length == 0 || res.data[0].value == 1) {\r\n          setshowManageStock(true);\r\n        } else {\r\n          setshowManageStock(false);\r\n        }\r\n      });\r\n    };\r\n\r\n    const getpaypalpaid = () => {\r\n      const url = BASE_URL + `/get-payment-client-id`;\r\n      axios.get(url, {\r\n        headers: { Authorization: `Bearer ${getCookie()}` },\r\n      })\r\n        .then((res) => {\r\n          if (res.data === \" \") {\r\n            setpaypal_client_id(null)\r\n          } else {\r\n            setpaypal_client_id(res.data.value)\r\n          }\r\n          setpaymentDetails(res.data);\r\n        })\r\n    }\r\n\r\n    fetchData();\r\n    const checkMngStk = setInterval(updateManageStockValue, 5000);\r\n    const checkpaypal = setInterval(getpaypalpaid, 10000);\r\n    updateManageStockValue();\r\n    getpaypalpaid();\r\n    return () => {\r\n      clearInterval(checkMngStk, checkpaypal);\r\n    }\r\n  }, []);\r\n\r\n  // install check\r\n  const checkInstall = async () => {\r\n    const url = BASE_URL + \"/check-install\";\r\n    let result = await axios.get(url);\r\n    return result.data;\r\n  };\r\n\r\n  //get all languages\r\n  const getLanguages = () => {\r\n    setLoading(true);\r\n    const langUrl = BASE_URL + \"/settings/get-lang\";\r\n    return axios.get(langUrl).then((res) => {\r\n      setLanguageList(res.data[0]);\r\n      setNavLanguageList(res.data[1]);\r\n      setLanguageListForSearch(res.data[1]);\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  // get paginated languages\r\n  const setPaginatedLanguages = (pageNo) => {\r\n    setDataPaginating(true);\r\n    const langUrl = BASE_URL + \"/settings/get-lang?page=\" + pageNo;\r\n    return axios\r\n      .get(langUrl)\r\n      .then((res) => {\r\n        setLanguageList(res.data[0]);\r\n        setDataPaginating(false);\r\n      })\r\n      .catch((error) => { });\r\n  };\r\n\r\n  //get smtp settings\r\n  const getSmtp = () => {\r\n    setLoading(true);\r\n    const smtpUrl = BASE_URL + \"/settings/get-smtp\";\r\n    return axios\r\n      .get(smtpUrl, {\r\n        headers: { Authorization: `Bearer ${getCookie()}` },\r\n      })\r\n      .then((res) => {\r\n        setSmtp({\r\n          ...smtp,\r\n          MAIL_MAILER: res.data[0].MAIL_MAILER,\r\n          MAIL_HOST: res.data[0].MAIL_HOST,\r\n          MAIL_PORT: res.data[0].MAIL_PORT,\r\n          MAIL_USERNAME: res.data[0].MAIL_USERNAME,\r\n          MAIL_PASSWORD: res.data[0].MAIL_PASSWORD,\r\n          MAIL_ENCRYPTION: res.data[0].MAIL_ENCRYPTION,\r\n          MAIL_FROM_ADDRESS: res.data[0].MAIL_FROM_ADDRESS,\r\n          MAIL_FROM_NAME: res.data[0].MAIL_FROM_NAME,\r\n        });\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  //get permission groups\r\n  const getPermissionGroups = () => {\r\n    setLoading(true);\r\n    const permissionGroupUrl = BASE_URL + \"/settings/permission-group-list\";\r\n    return axios\r\n      .get(permissionGroupUrl, {\r\n        headers: { Authorization: `Bearer ${getCookie()}` },\r\n      })\r\n      .then((res) => {\r\n        setPermissionGroup(res.data[0]);\r\n        setPermissionGroupForSearch(res.data[1]);\r\n        setPermissions(res.data[2]);\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  // get paginated groups\r\n  const setPaginatedGropus = (pageNo) => {\r\n    setDataPaginating(true);\r\n    const url = BASE_URL + \"/settings/permission-group-list?page=\" + pageNo;\r\n    return axios\r\n      .get(url, {\r\n        headers: { Authorization: `Bearer ${getCookie()}` },\r\n      })\r\n      .then((res) => {\r\n        setPermissionGroup(res.data[0]);\r\n        setPermissionGroupForSearch(res.data[1]);\r\n        setPermissions(res.data[2]);\r\n        setDataPaginating(false);\r\n      })\r\n      .catch(() => { });\r\n  };\r\n\r\n  //get all currency\r\n  const getCurrency = () => {\r\n    setLoading(true);\r\n    const currencyUrl = BASE_URL + \"/settings/get-currency\";\r\n    return axios.get(currencyUrl).then((res) => {\r\n      setCurrencyList(res.data[0]);\r\n      setNavCurrencyList(res.data[1]);\r\n      setCurrencyListForSearch(res.data[1]);\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  // get paginated currency\r\n  const setPaginatedCurrencies = (pageNo) => {\r\n    setDataPaginating(true);\r\n    const currencyUrl = BASE_URL + \"/settings/get-currency?page=\" + pageNo;\r\n    return axios\r\n      .get(currencyUrl)\r\n      .then((res) => {\r\n        setCurrencyList(res.data[0]);\r\n        setDataPaginating(false);\r\n      })\r\n      .catch((error) => { });\r\n  };\r\n\r\n  //get all languages\r\n  const getSettings = () => {\r\n    setLoading(true);\r\n    const url = BASE_URL + \"/settings/general-settings\";\r\n    return axios.get(url).then((res) => {\r\n      setGeneralSettings(res.data);\r\n      const favicon = document.getElementById(\"favicon\");\r\n      favicon.href = BASE_URL + getSystemSettings(res.data, \"favicon\");\r\n      setLoading(false);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <SettingsContext.Provider\r\n      value={{\r\n        //common\r\n        loading,\r\n        setLoading,\r\n\r\n        //general settings\r\n        generalSettings,\r\n        setGeneralSettings,\r\n        getLanguages,\r\n        getCurrency,\r\n        getSettings,\r\n\r\n        //currencies\r\n        currencyList,\r\n        setCurrencyList,\r\n        setPaginatedCurrencies,\r\n        navCurrencyList,\r\n        setNavCurrencyList,\r\n        currencyListForSearch,\r\n        setCurrencyListForSearch,\r\n\r\n        //languages\r\n        languageList,\r\n        setLanguageList,\r\n        setPaginatedLanguages,\r\n        navLanguageList,\r\n        setNavLanguageList,\r\n        languageListForSearch,\r\n        setLanguageListForSearch,\r\n\r\n        //smtp\r\n        smtp,\r\n        getSmtp,\r\n        setSmtp,\r\n\r\n        //permission group\r\n        getPermissionGroups,\r\n        permissionGroup,\r\n        setPermissionGroup,\r\n        setPaginatedGropus,\r\n        permissionGroupForSearch,\r\n        setPermissionGroupForSearch,\r\n\r\n        //permissions\r\n        permissions,\r\n        setPermissions,\r\n\r\n        //pagination\r\n        dataPaginating,\r\n        setDataPaginating,\r\n\r\n        //show  manage stock\r\n        showManageStock,\r\n        setshowManageStock,\r\n\r\n        // paypal_paypal_client_id\r\n        paypal_client_id,\r\n        setpaypal_client_id,\r\n\r\n        paymentDetails,\r\n        // setpaymentDetails\r\n      }}\r\n    >\r\n      {children}\r\n    </SettingsContext.Provider>\r\n  );\r\n};\r\n\r\nexport { SettingsContext, SettingsProvider };\r\n"]},"metadata":{},"sourceType":"module"}