{"ast":null,"code":"import _objectSpread from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/raza/Downloads/khadyo_source_code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useContext,useState}from\"react\";import{useHistory}from\"react-router-dom\";//axios and base url\nimport axios from\"axios\";import{BASE_URL}from\"../../../../BaseUrl\";//functions\nimport{_t,getCookie,formatPrice,tableLoading}from\"../../../../functions/Functions\";import{useTranslation}from\"react-i18next\";//3rd party packages\nimport{Helmet}from\"react-helmet\";import{toast}from\"react-toastify\";import\"react-toastify/dist/ReactToastify.css\";import Select from\"react-select\";import makeAnimated from\"react-select/animated\";import Chart from\"react-apexcharts\";//pages & includes\nimport ReportSidebar from\"./ReportSidebar\";//context consumer\nimport{SettingsContext}from\"../../../../contexts/Settings\";var Reports=function Reports(){var _useTranslation=useTranslation(),t=_useTranslation.t;var history=useHistory();//getting context values here\nvar _useContext=useContext(SettingsContext),loading=_useContext.loading,setLoading=_useContext.setLoading,dataPaginating=_useContext.dataPaginating;// States hook here\n//donout chart\nvar _useState=useState({series:[],options:{chart:{width:380,type:\"donut\",dropShadow:{enabled:true,color:\"#111\",top:-1,left:3,blur:3,opacity:0.2}},stroke:{width:0},plotOptions:{pie:{donut:{labels:{show:true,total:{showAlways:true,show:true}}}}},labels:[],dataLabels:{dropShadow:{blur:3,opacity:0.8}},fill:{type:\"pattern\",opacity:1,pattern:{enabled:true,style:[\"verticalLines\",\"squares\",\"horizontalLines\",\"circles\",\"slantedLines\"]}},states:{hover:{filter:\"none\"}},theme:{palette:\"palette2\"},title:{text:_t(t(\"Today's total revenue of all branches\"))},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:\"bottom\"}}}]}}),_useState2=_slicedToArray(_useState,2),donoutWithPattern=_useState2[0],setDonoutWithPattern=_useState2[1];//pie chart\nvar _useState3=useState({series:[],options:{chart:{width:380,type:\"pie\"},labels:[],responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:\"bottom\"}}}],title:{text:_t(t(\"Today's revenue by food group\"))}}}),_useState4=_slicedToArray(_useState3,2),options=_useState4[0],setOptions=_useState4[1];//monthly branch\nvar _useState5=useState({options:{xaxis:{categories:[],labels:{show:true}}},series:[{name:_t(t(\"Amount\")),data:[]}]}),_useState6=_slicedToArray(_useState5,2),chart=_useState6[0],setChart=_useState6[1];//monthly branch\nvar _useState7=useState({options:{xaxis:{categories:[],labels:{show:false}}},series:[{name:_t(t(\"Amount\")),data:[]}]}),_useState8=_slicedToArray(_useState7,2),chartitem=_useState8[0],setChartItem=_useState8[1];//useEffect == componentDidMount()\nuseEffect(function(){setLoading(true);getReport();setTimeout(function(){setLoading(false);},500);},[]);//get reports\nvar getReport=function getReport(){var url=BASE_URL+\"/settings/report-dashboard\";return axios.get(url,{headers:{Authorization:\"Bearer \".concat(getCookie())}}).then(function(res){dailyBranch(res.data[0],res.data[1]);monthlyBranch(res.data[2],res.data[3]);dailyGroup(res.data[4],res.data[5]);monthlyItems(res.data[6],res.data[7]);}).catch(function(error){});};//set daily branch\nvar dailyBranch=function dailyBranch(name,amount){var formattedAmount=amount.map(function(item){return parseFloat(formatPrice(item));});setDonoutWithPattern({series:formattedAmount,options:{chart:{width:380,type:\"donut\",dropShadow:{enabled:true,color:\"#111\",top:-1,left:3,blur:3,opacity:0.2}},stroke:{width:0},plotOptions:{pie:{donut:{labels:{show:true,total:{showAlways:true,show:true}}}}},labels:name,dataLabels:{dropShadow:{blur:3,opacity:0.8}},fill:{type:\"pattern\",opacity:1,pattern:{enabled:true,style:[\"verticalLines\",\"squares\",\"horizontalLines\",\"circles\",\"slantedLines\"]}},states:{hover:{filter:\"none\"}},theme:{palette:\"palette2\"},title:{text:_t(t(\"Today's total revenue of all branches\"))},responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:\"bottom\"}}}]}});};//set daily foodgroup\nvar dailyGroup=function dailyGroup(name,amount){var formattedAmount=amount.map(function(item){return parseFloat(formatPrice(item));});setOptions({series:formattedAmount,options:{chart:{width:380,type:\"pie\"},labels:name,responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:\"bottom\"}}}],title:{text:_t(t(\"Today's revenue by food group\"))}}});};//set monthly branch\nvar monthlyBranch=function monthlyBranch(name,amount){var formattedAmount=amount.map(function(item){return parseFloat(formatPrice(item));});setChart(_objectSpread(_objectSpread({},chart),{},{options:_objectSpread(_objectSpread({},chart.options),{},{xaxis:_objectSpread(_objectSpread({},chart.options.xaxis),{},{categories:name})}),series:[{name:chart.series[0].name,data:formattedAmount}]}));};//set monthly items\nvar monthlyItems=function monthlyItems(name,amount){var formattedAmount=amount.map(function(item){return parseFloat(formatPrice(item));});setChartItem(_objectSpread(_objectSpread({},chartitem),{},{options:_objectSpread(_objectSpread({},chartitem.options),{},{xaxis:_objectSpread(_objectSpread({},chartitem.options.xaxis),{},{categories:name})}),series:[{name:chartitem.series[0].name,data:formattedAmount}]}));};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Helmet,null,/*#__PURE__*/React.createElement(\"title\",null,_t(t(\"Reports\")))),/*#__PURE__*/React.createElement(\"main\",{id:\"main\",\"data-simplebar\":true},/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row t-mt-10 gx-2\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-3 col-xxl-2 t-mb-30 mb-lg-0\"},/*#__PURE__*/React.createElement(ReportSidebar,null)),/*#__PURE__*/React.createElement(\"div\",{className:\"col-lg-9 col-xxl-10 t-mb-30 mb-lg-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"t-bg-white\"},/*#__PURE__*/React.createElement(\"div\",{className:\"fk-scroll--pos-menu table-bottom-info-hide\",\"data-simplebar\":true},/*#__PURE__*/React.createElement(\"div\",{className:\"t-pl-15 t-pr-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"\".concat(dataPaginating&&\"loading\")}),loading===true?tableLoading():/*#__PURE__*/React.createElement(\"div\",{key:\"smtp-form\"},/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 align-items-center t-pt-15 t-pb-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 t-mb-15 mb-md-0\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"t-list fk-breadcrumb\"},/*#__PURE__*/React.createElement(\"li\",{className:\"fk-breadcrumb__list\"},/*#__PURE__*/React.createElement(\"span\",{className:\"t-link fk-breadcrumb__link text-capitalize\"},_t(t(\"Reports\"))))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 justify-content-center t-pt-15 t-pb-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-5 t-mb-15 mb-md-0 pie\"},/*#__PURE__*/React.createElement(Chart,{options:donoutWithPattern.options,series:donoutWithPattern.series,type:\"donut\",width:\"380\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 col-md-5 t-mb-15 mb-md-0 pie\"},/*#__PURE__*/React.createElement(Chart,{options:options.options,series:options.series,type:\"pie\",width:\"380\"}))),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 justify-content-start ml-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 t-mb-15 mb-md-0\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"py-1 font-weight-bold text-dark sm-text rounded-sm\"},_t(t(\"Last month's revenue of each branch\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 justify-content-center t-pt-15 t-pb-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 t-mb-15 mb-md-0\"},/*#__PURE__*/React.createElement(Chart,{options:chart.options,series:chart.series,type:\"bar\",width:\"100%\",height:\"300\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 t-mb-15 mb-md-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"py-1 sm-text text-center rounded-sm\"},_t(t(\"AMOUNT / BRANCH\"))))),/*#__PURE__*/React.createElement(\"hr\",null),/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 justify-content-start ml-3\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 t-mb-15 mb-md-0\"},/*#__PURE__*/React.createElement(\"h4\",{className:\"py-1 font-weight-bold text-dark sm-text rounded-sm\"},_t(t(\"Last month's item wise revenue\"))))),/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 justify-content-center t-pt-15 t-pb-15\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-12 t-mb-15 mb-md-0\"},/*#__PURE__*/React.createElement(Chart,{options:chartitem.options,series:chartitem.series,type:\"line\",width:\"100%\",height:\"300\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"row gx-2 justify-content-center\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-4 t-mb-15 mb-md-0\"},/*#__PURE__*/React.createElement(\"div\",{className:\"pb-3 sm-text text-center rounded-sm\"},_t(t(\"AMOUNT / BRANCH\"))))))))))))));};export default Reports;","map":{"version":3,"sources":["/Users/raza/Downloads/khadyo_source_code/client/src/resources/restaurant/auth/reports/Dashboard.js"],"names":["React","useEffect","useContext","useState","useHistory","axios","BASE_URL","_t","getCookie","formatPrice","tableLoading","useTranslation","Helmet","toast","Select","makeAnimated","Chart","ReportSidebar","SettingsContext","Reports","t","history","loading","setLoading","dataPaginating","series","options","chart","width","type","dropShadow","enabled","color","top","left","blur","opacity","stroke","plotOptions","pie","donut","labels","show","total","showAlways","dataLabels","fill","pattern","style","states","hover","filter","theme","palette","title","text","responsive","breakpoint","legend","position","donoutWithPattern","setDonoutWithPattern","setOptions","xaxis","categories","name","data","setChart","chartitem","setChartItem","getReport","setTimeout","url","get","headers","Authorization","then","res","dailyBranch","monthlyBranch","dailyGroup","monthlyItems","catch","error","amount","formattedAmount","map","item","parseFloat"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext, useState } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\n//axios and base url\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../../../../BaseUrl\";\r\n\r\n//functions\r\nimport {\r\n  _t,\r\n  getCookie,\r\n  formatPrice,\r\n  tableLoading,\r\n} from \"../../../../functions/Functions\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\n//3rd party packages\r\nimport { Helmet } from \"react-helmet\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport Select from \"react-select\";\r\nimport makeAnimated from \"react-select/animated\";\r\nimport Chart from \"react-apexcharts\";\r\n\r\n//pages & includes\r\nimport ReportSidebar from \"./ReportSidebar\";\r\n\r\n//context consumer\r\nimport { SettingsContext } from \"../../../../contexts/Settings\";\r\n\r\nconst Reports = () => {\r\n  const { t } = useTranslation();\r\n  const history = useHistory();\r\n  //getting context values here\r\n  let { loading, setLoading, dataPaginating } = useContext(SettingsContext);\r\n\r\n  // States hook here\r\n  //donout chart\r\n  const [donoutWithPattern, setDonoutWithPattern] = useState({\r\n    series: [],\r\n    options: {\r\n      chart: {\r\n        width: 380,\r\n        type: \"donut\",\r\n        dropShadow: {\r\n          enabled: true,\r\n          color: \"#111\",\r\n          top: -1,\r\n          left: 3,\r\n          blur: 3,\r\n          opacity: 0.2,\r\n        },\r\n      },\r\n      stroke: {\r\n        width: 0,\r\n      },\r\n      plotOptions: {\r\n        pie: {\r\n          donut: {\r\n            labels: {\r\n              show: true,\r\n              total: {\r\n                showAlways: true,\r\n                show: true,\r\n              },\r\n            },\r\n          },\r\n        },\r\n      },\r\n      labels: [],\r\n      dataLabels: {\r\n        dropShadow: {\r\n          blur: 3,\r\n          opacity: 0.8,\r\n        },\r\n      },\r\n      fill: {\r\n        type: \"pattern\",\r\n        opacity: 1,\r\n        pattern: {\r\n          enabled: true,\r\n          style: [\r\n            \"verticalLines\",\r\n            \"squares\",\r\n            \"horizontalLines\",\r\n            \"circles\",\r\n            \"slantedLines\",\r\n          ],\r\n        },\r\n      },\r\n      states: {\r\n        hover: {\r\n          filter: \"none\",\r\n        },\r\n      },\r\n      theme: {\r\n        palette: \"palette2\",\r\n      },\r\n\r\n      title: {\r\n        text: _t(t(\"Today's total revenue of all branches\")),\r\n      },\r\n      responsive: [\r\n        {\r\n          breakpoint: 480,\r\n          options: {\r\n            chart: {\r\n              width: 200,\r\n            },\r\n            legend: {\r\n              position: \"bottom\",\r\n            },\r\n          },\r\n        },\r\n      ],\r\n    },\r\n  });\r\n\r\n  //pie chart\r\n  const [options, setOptions] = useState({\r\n    series: [],\r\n    options: {\r\n      chart: {\r\n        width: 380,\r\n        type: \"pie\",\r\n      },\r\n      labels: [],\r\n      responsive: [\r\n        {\r\n          breakpoint: 480,\r\n          options: {\r\n            chart: {\r\n              width: 200,\r\n            },\r\n            legend: {\r\n              position: \"bottom\",\r\n            },\r\n          },\r\n        },\r\n      ],\r\n\r\n      title: {\r\n        text: _t(t(\"Today's revenue by food group\")),\r\n      },\r\n    },\r\n  });\r\n\r\n  //monthly branch\r\n  const [chart, setChart] = useState({\r\n    options: {\r\n      xaxis: {\r\n        categories: [],\r\n        labels: { show: true },\r\n      },\r\n    },\r\n    series: [\r\n      {\r\n        name: _t(t(\"Amount\")),\r\n        data: [],\r\n      },\r\n    ],\r\n  });\r\n\r\n  //monthly branch\r\n  const [chartitem, setChartItem] = useState({\r\n    options: {\r\n      xaxis: {\r\n        categories: [],\r\n        labels: { show: false },\r\n      },\r\n    },\r\n    series: [\r\n      {\r\n        name: _t(t(\"Amount\")),\r\n        data: [],\r\n      },\r\n    ],\r\n  });\r\n\r\n  //useEffect == componentDidMount()\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    getReport();\r\n    setTimeout(() => {\r\n      setLoading(false);\r\n    }, 500);\r\n  }, []);\r\n\r\n  //get reports\r\n  const getReport = () => {\r\n    const url = BASE_URL + \"/settings/report-dashboard\";\r\n    return axios\r\n      .get(url, {\r\n        headers: { Authorization: `Bearer ${getCookie()}` },\r\n      })\r\n      .then((res) => {\r\n        dailyBranch(res.data[0], res.data[1]);\r\n        monthlyBranch(res.data[2], res.data[3]);\r\n        dailyGroup(res.data[4], res.data[5]);\r\n        monthlyItems(res.data[6], res.data[7]);\r\n      })\r\n      .catch((error) => {});\r\n  };\r\n\r\n  //set daily branch\r\n  const dailyBranch = (name, amount) => {\r\n    let formattedAmount = amount.map((item) => parseFloat(formatPrice(item)));\r\n    setDonoutWithPattern({\r\n      series: formattedAmount,\r\n      options: {\r\n        chart: {\r\n          width: 380,\r\n          type: \"donut\",\r\n          dropShadow: {\r\n            enabled: true,\r\n            color: \"#111\",\r\n            top: -1,\r\n            left: 3,\r\n            blur: 3,\r\n            opacity: 0.2,\r\n          },\r\n        },\r\n        stroke: {\r\n          width: 0,\r\n        },\r\n        plotOptions: {\r\n          pie: {\r\n            donut: {\r\n              labels: {\r\n                show: true,\r\n                total: {\r\n                  showAlways: true,\r\n                  show: true,\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n        labels: name,\r\n        dataLabels: {\r\n          dropShadow: {\r\n            blur: 3,\r\n            opacity: 0.8,\r\n          },\r\n        },\r\n        fill: {\r\n          type: \"pattern\",\r\n          opacity: 1,\r\n          pattern: {\r\n            enabled: true,\r\n            style: [\r\n              \"verticalLines\",\r\n              \"squares\",\r\n              \"horizontalLines\",\r\n              \"circles\",\r\n              \"slantedLines\",\r\n            ],\r\n          },\r\n        },\r\n        states: {\r\n          hover: {\r\n            filter: \"none\",\r\n          },\r\n        },\r\n        theme: {\r\n          palette: \"palette2\",\r\n        },\r\n\r\n        title: {\r\n          text: _t(t(\"Today's total revenue of all branches\")),\r\n        },\r\n        responsive: [\r\n          {\r\n            breakpoint: 480,\r\n            options: {\r\n              chart: {\r\n                width: 200,\r\n              },\r\n              legend: {\r\n                position: \"bottom\",\r\n              },\r\n            },\r\n          },\r\n        ],\r\n      },\r\n    });\r\n  };\r\n\r\n  //set daily foodgroup\r\n  const dailyGroup = (name, amount) => {\r\n    let formattedAmount = amount.map((item) => parseFloat(formatPrice(item)));\r\n\r\n    setOptions({\r\n      series: formattedAmount,\r\n      options: {\r\n        chart: {\r\n          width: 380,\r\n          type: \"pie\",\r\n        },\r\n        labels: name,\r\n        responsive: [\r\n          {\r\n            breakpoint: 480,\r\n            options: {\r\n              chart: {\r\n                width: 200,\r\n              },\r\n              legend: {\r\n                position: \"bottom\",\r\n              },\r\n            },\r\n          },\r\n        ],\r\n\r\n        title: {\r\n          text: _t(t(\"Today's revenue by food group\")),\r\n        },\r\n      },\r\n    });\r\n  };\r\n\r\n  //set monthly branch\r\n  const monthlyBranch = (name, amount) => {\r\n    let formattedAmount = amount.map((item) => parseFloat(formatPrice(item)));\r\n    setChart({\r\n      ...chart,\r\n      options: {\r\n        ...chart.options,\r\n        xaxis: { ...chart.options.xaxis, categories: name },\r\n      },\r\n      series: [{ name: chart.series[0].name, data: formattedAmount }],\r\n    });\r\n  };\r\n\r\n  //set monthly items\r\n  const monthlyItems = (name, amount) => {\r\n    let formattedAmount = amount.map((item) => parseFloat(formatPrice(item)));\r\n    setChartItem({\r\n      ...chartitem,\r\n      options: {\r\n        ...chartitem.options,\r\n        xaxis: { ...chartitem.options.xaxis, categories: name },\r\n      },\r\n      series: [{ name: chartitem.series[0].name, data: formattedAmount }],\r\n    });\r\n  };\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{_t(t(\"Reports\"))}</title>\r\n      </Helmet>\r\n\r\n      {/* main body */}\r\n      <main id=\"main\" data-simplebar>\r\n        <div className=\"container\">\r\n          <div className=\"row t-mt-10 gx-2\">\r\n            {/* left Sidebar */}\r\n            <div className=\"col-lg-3 col-xxl-2 t-mb-30 mb-lg-0\">\r\n              <ReportSidebar />\r\n            </div>\r\n            {/* left Sidebar ends */}\r\n\r\n            {/* Rightbar contents */}\r\n            <div className=\"col-lg-9 col-xxl-10 t-mb-30 mb-lg-0\">\r\n              <div className=\"t-bg-white\">\r\n                <div\r\n                  className=\"fk-scroll--pos-menu table-bottom-info-hide\"\r\n                  data-simplebar\r\n                >\r\n                  <div className=\"t-pl-15 t-pr-15\">\r\n                    {/* next page data spin loading */}\r\n                    <div className={`${dataPaginating && \"loading\"}`}></div>\r\n                    {/* spin loading ends */}\r\n\r\n                    {/* Loading effect */}\r\n                    {loading === true ? (\r\n                      tableLoading()\r\n                    ) : (\r\n                      <div key=\"smtp-form\">\r\n                        <div className=\"row gx-2 align-items-center t-pt-15 t-pb-15\">\r\n                          <div className=\"col-12 t-mb-15 mb-md-0\">\r\n                            <ul className=\"t-list fk-breadcrumb\">\r\n                              <li className=\"fk-breadcrumb__list\">\r\n                                <span className=\"t-link fk-breadcrumb__link text-capitalize\">\r\n                                  {_t(t(\"Reports\"))}\r\n                                </span>\r\n                              </li>\r\n                            </ul>\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"row gx-2 justify-content-center t-pt-15 t-pb-15\">\r\n                          <div className=\"col-12 col-md-5 t-mb-15 mb-md-0 pie\">\r\n                            <Chart\r\n                              options={donoutWithPattern.options}\r\n                              series={donoutWithPattern.series}\r\n                              type=\"donut\"\r\n                              width=\"380\"\r\n                            />\r\n                          </div>\r\n                          <div className=\"col-12 col-md-5 t-mb-15 mb-md-0 pie\">\r\n                            <Chart\r\n                              options={options.options}\r\n                              series={options.series}\r\n                              type=\"pie\"\r\n                              width=\"380\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <hr />\r\n                        <div className=\"row gx-2 justify-content-start ml-3\">\r\n                          <div className=\"col-4 t-mb-15 mb-md-0\">\r\n                            <h4 className=\"py-1 font-weight-bold text-dark sm-text rounded-sm\">\r\n                              {_t(t(\"Last month's revenue of each branch\"))}\r\n                            </h4>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"row gx-2 justify-content-center t-pt-15 t-pb-15\">\r\n                          <div className=\"col-12 t-mb-15 mb-md-0\">\r\n                            <Chart\r\n                              options={chart.options}\r\n                              series={chart.series}\r\n                              type=\"bar\"\r\n                              width=\"100%\"\r\n                              height=\"300\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"row gx-2 justify-content-center\">\r\n                          <div className=\"col-4 t-mb-15 mb-md-0\">\r\n                            <div className=\"py-1 sm-text text-center rounded-sm\">\r\n                              {_t(t(\"AMOUNT / BRANCH\"))}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                        <hr />\r\n\r\n                        <div className=\"row gx-2 justify-content-start ml-3\">\r\n                          <div className=\"col-4 t-mb-15 mb-md-0\">\r\n                            <h4 className=\"py-1 font-weight-bold text-dark sm-text rounded-sm\">\r\n                              {_t(t(\"Last month's item wise revenue\"))}\r\n                            </h4>\r\n                          </div>\r\n                        </div>\r\n\r\n                        <div className=\"row gx-2 justify-content-center t-pt-15 t-pb-15\">\r\n                          <div className=\"col-12 t-mb-15 mb-md-0\">\r\n                            <Chart\r\n                              options={chartitem.options}\r\n                              series={chartitem.series}\r\n                              type=\"line\"\r\n                              width=\"100%\"\r\n                              height=\"300\"\r\n                            />\r\n                          </div>\r\n                        </div>\r\n                        <div className=\"row gx-2 justify-content-center\">\r\n                          <div className=\"col-4 t-mb-15 mb-md-0\">\r\n                            <div className=\"pb-3 sm-text text-center rounded-sm\">\r\n                              {_t(t(\"AMOUNT / BRANCH\"))}\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            {/* Rightbar contents end*/}\r\n          </div>\r\n        </div>\r\n      </main>\r\n      {/* main body ends */}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Reports;\r\n"]},"metadata":{},"sourceType":"module"}