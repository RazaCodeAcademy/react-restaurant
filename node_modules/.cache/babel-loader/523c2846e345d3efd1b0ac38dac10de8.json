{"ast":null,"code":"var _jsxFileName = \"/Users/raza/Downloads/khadyo_source_code/client/src/resources/restaurant/auth/workPeriod/OpeningClosingStock.js\";\nimport React, { useEffect, useContext, useState } from \"react\"; //axios and base url\n\nimport axios from \"axios\";\nimport { BASE_URL } from \"../../../../BaseUrl\"; //functions\n\nimport { _t, getCookie, pageLoading, paginationLoading, pagination } from \"../../../../functions/Functions\";\nimport { useTranslation } from \"react-i18next\"; //3rd party packages\n\nimport { Helmet } from \"react-helmet\";\nimport \"react-confirm-alert/src/react-confirm-alert.css\";\nimport { toast } from \"react-toastify\";\nimport \"react-toastify/dist/ReactToastify.css\"; //importing context consumer here\n\nimport { RestaurantContext } from \"../../../../contexts/Restaurant\";\nimport { FoodContext } from \"../../../../contexts/Food\";\nimport { NavLink, useParams } from \"react-router-dom\";\n\nconst OpeningClosingStock = () => {\n  const {\n    //work period\n    workPeriodList,\n    setPaginatedWorkPeriod,\n    // workPeriodForSearch,\n    dataPaginating\n  } = useContext(RestaurantContext);\n  const {\n    getIngredientStock,\n    loading,\n    setLoading,\n    items,\n    setItems,\n    theGroups\n  } = useContext(FoodContext);\n  const {\n    t\n  } = useTranslation();\n  const {\n    started_at\n  } = useParams(); //new unit\n\n  let [newWorkPeriod, setNewWorkPeriod] = useState({\n    user_type: null,\n    branch_id: null,\n    uploading: false\n  }); //search result\n\n  let [searchedWorkPeriod, setSearchedWorkPeriod] = useState({\n    list: null,\n    searched: false\n  }); //useEffect == componentDidMount\n\n  useEffect(() => {\n    getIngredientStock(started_at);\n  }, []); //update stock\n\n  const handleUpdate = () => {\n    setLoading(true);\n    const url = BASE_URL + `/settings/update-closing-items`;\n    let formData = {\n      items: items\n    };\n    return axios.post(url, formData, {\n      headers: {\n        Authorization: `Bearer ${getCookie()}`\n      }\n    }).then(res => {\n      getIngredientStock(started_at);\n      setLoading(false);\n      toast.success(`${_t(t(\"Closing stock has been updated\"))}`, {\n        position: \"bottom-center\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        className: \"text-center toast-notification\"\n      });\n    }).catch(() => {\n      setLoading(false);\n      toast.error(`${_t(t(\"Please try again\"))}`, {\n        position: \"bottom-center\",\n        autoClose: 10000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        className: \"text-center toast-notification\"\n      });\n    });\n  }; // const handleReadOnly = (item) => {\n  //   let total =\n  //     parseInt(item.opening_stock) + parseInt(item.addition_to_opening);\n  //   if (total === 0) {\n  //     return true;\n  //   } else {\n  //     return false;\n  //   }\n  // };\n  //maximum\n\n\n  const hadnleMax = item => {\n    let temp = parseFloat(item.opening_stock) + parseFloat(item.addition_to_opening !== null ? item.addition_to_opening : 0) - parseFloat(item.subtraction_from_opening !== null ? item.subtraction_from_opening : 0);\n    return JSON.stringify(temp);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Helmet, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }\n  }, _t(t(\"Opening Closing Stock\")))), /*#__PURE__*/React.createElement(\"main\", {\n    id: \"main\",\n    \"data-simplebar\": true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row t-mt-10 gx-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 t-mb-30 mb-lg-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }\n  }, newWorkPeriod.uploading === true || loading === true ? pageLoading() : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"t-bg-white \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `${dataPaginating && \"loading\"}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gx-2 align-items-center t-pt-15 t-pb-15 t-pl-15 t-pr-15 t-shadow\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 t-mb-15\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"t-list fk-breadcrumb\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"fk-breadcrumb__list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"t-link fk-breadcrumb__link text-capitalize\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 27\n    }\n  }, _t(t(\"Add Closing Stock of Ingredients\")))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6 col-lg-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-6 col-lg-7 t-mb-15 mb-md-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row gx-2 align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-12 col-md-5 ml-auto mt-2 mt-md-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"t-list fk-sort align-items-center justify-content-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"fk-sort__list mb-0 flex-grow-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    to: \"/dashboard/work-periods\",\n    className: \"w-100 btn alert-danger sm-text text-uppercase\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 31\n    }\n  }, _t(t(\"Go Back\"))))))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"fk-scroll--order-history\",\n    \"data-simplebar\": true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"t-pl-15 t-pr-15\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"table-responsive\",\n    onSubmit: handleUpdate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table table-bordered table-hover min-table-height mt-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    className: \"align-middle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"sm-text align-middle text-center border-1 border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 31\n    }\n  }, _t(t(\"S/L\"))), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"sm-text align-middle text-center border-1 border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 31\n    }\n  }, _t(t(\"Name\"))), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"sm-text align-middle text-center border-1 border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 31\n    }\n  }, _t(t(\"Opening Stock\"))), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"sm-text align-middle text-center border-1 border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 31\n    }\n  }, _t(t(\"Addition\"))), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"sm-text align-middle text-center border-1 border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 31\n    }\n  }, _t(t(\"Subtraction\"))), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    className: \"sm-text align-middle text-center border-1 border\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 31\n    }\n  }, _t(t(\"Closing Stock\"))))), /*#__PURE__*/React.createElement(\"tbody\", {\n    className: \"align-middle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 27\n    }\n  }, !searchedWorkPeriod.searched ? [items && theGroups && [items.length === 0 ? /*#__PURE__*/React.createElement(\"tr\", {\n    className: \"align-middle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    scope: \"row\",\n    colSpan: \"8\",\n    className: \"xsm-text align-middle text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 39\n    }\n  }, _t(t(\"No data available\")))) : theGroups.map((grpItem, grpItemIndex) => {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"tr\", {\n      className: \"align-middle alert-success\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      scope: \"row\",\n      colSpan: \"8\",\n      className: \"xsm-text align-middle text-left ml-5 text-uppercase\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 47\n      }\n    }, grpItem.name)), items.map((item, index) => {\n      if (parseInt(item.ingredient_group_id) === grpItem.id) {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          className: \"align-middle\",\n          key: index,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 51\n          }\n        }, /*#__PURE__*/React.createElement(\"th\", {\n          scope: \"row\",\n          className: \"xsm-text text-capitalize align-middle text-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 53\n          }\n        }, index + 1), /*#__PURE__*/React.createElement(\"td\", {\n          className: \"xsm-text align-middle text-center text-secondary\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 53\n          }\n        }, item.ingredient_name + \" / \" + item.ingredient_unit), /*#__PURE__*/React.createElement(\"td\", {\n          className: \"xsm-text align-middle text-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 53\n          }\n        }, item.opening_stock), /*#__PURE__*/React.createElement(\"td\", {\n          className: \"xsm-text align-middle text-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 53\n          }\n        }, item.addition_to_opening === null ? 0 : item.addition_to_opening), /*#__PURE__*/React.createElement(\"td\", {\n          className: \"xsm-text align-middle text-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 53\n          }\n        }, item.subtraction_from_opening === null ? 0 : item.subtraction_from_opening), /*#__PURE__*/React.createElement(\"td\", {\n          className: \"xsm-text align-middle text-center\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 53\n          }\n        }, /*#__PURE__*/React.createElement(\"input\", {\n          type: \"number\",\n          className: \"form-control\",\n          name: item.id,\n          placeholder: _t(t(\"Keep fields blank to calculate auto\")),\n          max: hadnleMax(item),\n          value: item.closing_stock || null,\n          onChange: e => {\n            let tempArray = [];\n            items.map(pushThis => {\n              if (pushThis.id !== item.id) {\n                tempArray.push(pushThis);\n              } else {\n                if (e.target.value !== \"\" && e.target.value !== null) {\n                  pushThis.closing_stock = parseFloat(e.target.value);\n                } else {\n                  pushThis.closing_stock = null;\n                }\n\n                tempArray.push(pushThis);\n              }\n            });\n            setItems(tempArray);\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 55\n          }\n        })));\n      } else {\n        return false;\n      }\n    }));\n  })]] : \"\")), items && items.length > 0 && /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary float-right px-5 mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 27\n    }\n  }, _t(t(\"update\"))))))), newWorkPeriod.uploading === true || loading === true ? paginationLoading() : [// logic === !searched\n  !searchedWorkPeriod.searched ? /*#__PURE__*/React.createElement(\"div\", {\n    key: \"fragment4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"t-bg-white mt-1 t-pt-5 t-pb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center t-pl-15 t-pr-15\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-7 t-mb-15 mb-md-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 27\n    }\n  }, pagination(workPeriodList, setPaginatedWorkPeriod)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 394,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"t-list d-flex justify-content-md-end align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"t-list__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 31\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"d-inline-block sm-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 33\n    }\n  }))))))) :\n  /*#__PURE__*/\n  // if searched\n  React.createElement(\"div\", {\n    className: \"t-bg-white mt-1 t-pt-5 t-pb-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row align-items-center t-pl-15 t-pr-15\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 409,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-7 t-mb-15 mb-md-0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"t-list d-flex\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"t-list__item no-pagination-style\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn btn-primary btn-sm\",\n    onClick: () => setSearchedWorkPeriod({ ...searchedWorkPeriod,\n      searched: false\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 413,\n      columnNumber: 31\n    }\n  }, _t(t(\"Clear Search\")))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-md-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 427,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"t-list d-flex justify-content-md-end align-items-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 27\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    className: \"t-list__item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"d-inline-block sm-text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 31\n    }\n  }))))))])))));\n};\n\nexport default OpeningClosingStock;","map":{"version":3,"sources":["/Users/raza/Downloads/khadyo_source_code/client/src/resources/restaurant/auth/workPeriod/OpeningClosingStock.js"],"names":["React","useEffect","useContext","useState","axios","BASE_URL","_t","getCookie","pageLoading","paginationLoading","pagination","useTranslation","Helmet","toast","RestaurantContext","FoodContext","NavLink","useParams","OpeningClosingStock","workPeriodList","setPaginatedWorkPeriod","dataPaginating","getIngredientStock","loading","setLoading","items","setItems","theGroups","t","started_at","newWorkPeriod","setNewWorkPeriod","user_type","branch_id","uploading","searchedWorkPeriod","setSearchedWorkPeriod","list","searched","handleUpdate","url","formData","post","headers","Authorization","then","res","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","className","catch","error","hadnleMax","item","temp","parseFloat","opening_stock","addition_to_opening","subtraction_from_opening","JSON","stringify","length","map","grpItem","grpItemIndex","name","index","parseInt","ingredient_group_id","id","ingredient_name","ingredient_unit","closing_stock","e","tempArray","pushThis","push","target","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useContext, useState } from \"react\";\r\n\r\n//axios and base url\r\nimport axios from \"axios\";\r\nimport { BASE_URL } from \"../../../../BaseUrl\";\r\n\r\n//functions\r\nimport {\r\n  _t,\r\n  getCookie,\r\n  pageLoading,\r\n  paginationLoading,\r\n  pagination,\r\n} from \"../../../../functions/Functions\";\r\nimport { useTranslation } from \"react-i18next\";\r\n\r\n//3rd party packages\r\nimport { Helmet } from \"react-helmet\";\r\nimport \"react-confirm-alert/src/react-confirm-alert.css\";\r\nimport { toast } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\n\r\n//importing context consumer here\r\nimport { RestaurantContext } from \"../../../../contexts/Restaurant\";\r\nimport { FoodContext } from \"../../../../contexts/Food\";\r\nimport { NavLink, useParams } from \"react-router-dom\";\r\nconst OpeningClosingStock = () => {\r\n  const {\r\n    //work period\r\n    workPeriodList,\r\n    setPaginatedWorkPeriod,\r\n    // workPeriodForSearch,\r\n    dataPaginating,\r\n  } = useContext(RestaurantContext);\r\n\r\n  const {\r\n    getIngredientStock,\r\n    loading,\r\n    setLoading,\r\n    items,\r\n    setItems,\r\n    theGroups,\r\n  } = useContext(FoodContext);\r\n\r\n  const { t } = useTranslation();\r\n  const { started_at } = useParams();\r\n\r\n  //new unit\r\n  let [newWorkPeriod, setNewWorkPeriod] = useState({\r\n    user_type: null,\r\n    branch_id: null,\r\n    uploading: false,\r\n  });\r\n\r\n  //search result\r\n  let [searchedWorkPeriod, setSearchedWorkPeriod] = useState({\r\n    list: null,\r\n    searched: false,\r\n  });\r\n\r\n  //useEffect == componentDidMount\r\n  useEffect(() => {\r\n    getIngredientStock(started_at);\r\n  }, []);\r\n\r\n  //update stock\r\n  const handleUpdate = () => {\r\n    setLoading(true);\r\n    const url = BASE_URL + `/settings/update-closing-items`;\r\n    let formData = {\r\n      items: items,\r\n    };\r\n    return axios\r\n      .post(url, formData, {\r\n        headers: { Authorization: `Bearer ${getCookie()}` },\r\n      })\r\n      .then((res) => {\r\n        getIngredientStock(started_at);\r\n        setLoading(false);\r\n        toast.success(`${_t(t(\"Closing stock has been updated\"))}`, {\r\n          position: \"bottom-center\",\r\n          autoClose: 10000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          className: \"text-center toast-notification\",\r\n        });\r\n      })\r\n      .catch(() => {\r\n        setLoading(false);\r\n        toast.error(`${_t(t(\"Please try again\"))}`, {\r\n          position: \"bottom-center\",\r\n          autoClose: 10000,\r\n          hideProgressBar: false,\r\n          closeOnClick: true,\r\n          pauseOnHover: true,\r\n          className: \"text-center toast-notification\",\r\n        });\r\n      });\r\n  };\r\n\r\n  // const handleReadOnly = (item) => {\r\n  //   let total =\r\n  //     parseInt(item.opening_stock) + parseInt(item.addition_to_opening);\r\n  //   if (total === 0) {\r\n  //     return true;\r\n  //   } else {\r\n  //     return false;\r\n  //   }\r\n  // };\r\n\r\n  //maximum\r\n  const hadnleMax = (item) => {\r\n    let temp =\r\n      parseFloat(item.opening_stock) +\r\n      parseFloat(\r\n        item.addition_to_opening !== null ? item.addition_to_opening : 0\r\n      ) -\r\n      parseFloat(\r\n        item.subtraction_from_opening !== null\r\n          ? item.subtraction_from_opening\r\n          : 0\r\n      );\r\n    return JSON.stringify(temp);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Helmet>\r\n        <title>{_t(t(\"Opening Closing Stock\"))}</title>\r\n      </Helmet>\r\n      <main id=\"main\" data-simplebar>\r\n        <div className=\"container\">\r\n          <div className=\"row t-mt-10 gx-2\">\r\n            <div className=\"col-12 t-mb-30 mb-lg-0\">\r\n              {newWorkPeriod.uploading === true || loading === true ? (\r\n                pageLoading()\r\n              ) : (\r\n                <div className=\"t-bg-white \">\r\n                  {/* next page data spin loading */}\r\n                  <div className={`${dataPaginating && \"loading\"}`}></div>\r\n                  {/* spin loading ends */}\r\n                  <div className=\"row gx-2 align-items-center t-pt-15 t-pb-15 t-pl-15 t-pr-15 t-shadow\">\r\n                    <div className=\"col-12 t-mb-15\">\r\n                      <ul className=\"t-list fk-breadcrumb\">\r\n                        <li className=\"fk-breadcrumb__list\">\r\n                          <span className=\"t-link fk-breadcrumb__link text-capitalize\">\r\n                            {_t(t(\"Add Closing Stock of Ingredients\"))}\r\n                          </span>\r\n                        </li>\r\n                      </ul>\r\n                    </div>\r\n                    <div className=\"col-md-6 col-lg-5\"></div>\r\n                    <div className=\"col-md-6 col-lg-7 t-mb-15 mb-md-0\">\r\n                      <div className=\"row gx-2 align-items-center\">\r\n                        <div className=\"col-12 col-md-5 ml-auto mt-2 mt-md-0\">\r\n                          <ul className=\"t-list fk-sort align-items-center justify-content-center\">\r\n                            <li className=\"fk-sort__list mb-0 flex-grow-1\">\r\n                              <NavLink\r\n                                to=\"/dashboard/work-periods\"\r\n                                className=\"w-100 btn alert-danger sm-text text-uppercase\"\r\n                              >\r\n                                {_t(t(\"Go Back\"))}\r\n                              </NavLink>\r\n                            </li>\r\n                          </ul>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"fk-scroll--order-history\" data-simplebar>\r\n                    <div className=\"t-pl-15 t-pr-15\">\r\n                      <form\r\n                        className=\"table-responsive\"\r\n                        onSubmit={handleUpdate}\r\n                      >\r\n                        <table className=\"table table-bordered table-hover min-table-height mt-4\">\r\n                          <thead className=\"align-middle\">\r\n                            <tr>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"S/L\"))}\r\n                              </th>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Name\"))}\r\n                              </th>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Opening Stock\"))}\r\n                              </th>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Addition\"))}\r\n                              </th>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Subtraction\"))}\r\n                              </th>\r\n                              <th\r\n                                scope=\"col\"\r\n                                className=\"sm-text align-middle text-center border-1 border\"\r\n                              >\r\n                                {_t(t(\"Closing Stock\"))}\r\n                              </th>\r\n                            </tr>\r\n                          </thead>\r\n                          <tbody className=\"align-middle\">\r\n                            {!searchedWorkPeriod.searched\r\n                              ? [\r\n                                items &&\r\n                                theGroups && [\r\n                                  items.length === 0 ? (\r\n                                    <tr className=\"align-middle\">\r\n                                      <td\r\n                                        scope=\"row\"\r\n                                        colSpan=\"8\"\r\n                                        className=\"xsm-text align-middle text-center\"\r\n                                      >\r\n                                        {_t(t(\"No data available\"))}\r\n                                      </td>\r\n                                    </tr>\r\n                                  ) : (\r\n                                    theGroups.map(\r\n                                      (grpItem, grpItemIndex) => {\r\n                                        return (\r\n                                          <>\r\n                                            <tr className=\"align-middle alert-success\">\r\n                                              <td\r\n                                                scope=\"row\"\r\n                                                colSpan=\"8\"\r\n                                                className=\"xsm-text align-middle text-left ml-5 text-uppercase\"\r\n                                              >\r\n                                                {grpItem.name}\r\n                                              </td>\r\n                                            </tr>\r\n                                            {items.map((item, index) => {\r\n                                              if (\r\n                                                parseInt(\r\n                                                  item.ingredient_group_id\r\n                                                ) === grpItem.id\r\n                                              ) {\r\n                                                return (\r\n                                                  <tr\r\n                                                    className=\"align-middle\"\r\n                                                    key={index}\r\n                                                  >\r\n                                                    <th\r\n                                                      scope=\"row\"\r\n                                                      className=\"xsm-text text-capitalize align-middle text-center\"\r\n                                                    >\r\n                                                      {index + 1}\r\n                                                    </th>\r\n\r\n                                                    <td className=\"xsm-text align-middle text-center text-secondary\">\r\n                                                      {item.ingredient_name +\r\n                                                        \" / \" +\r\n                                                        item.ingredient_unit}\r\n                                                    </td>\r\n\r\n                                                    <td className=\"xsm-text align-middle text-center\">\r\n                                                      {item.opening_stock}\r\n                                                    </td>\r\n\r\n                                                    <td className=\"xsm-text align-middle text-center\">\r\n                                                      {item.addition_to_opening ===\r\n                                                        null\r\n                                                        ? 0\r\n                                                        : item.addition_to_opening}\r\n                                                    </td>\r\n\r\n                                                    <td className=\"xsm-text align-middle text-center\">\r\n                                                      {item.subtraction_from_opening ===\r\n                                                        null\r\n                                                        ? 0\r\n                                                        : item.subtraction_from_opening}\r\n                                                    </td>\r\n                                                    <td className=\"xsm-text align-middle text-center\">\r\n                                                      <input\r\n                                                        type=\"number\"\r\n                                                        className=\"form-control\"\r\n                                                        name={item.id}\r\n                                                        placeholder={_t(\r\n                                                          t(\r\n                                                            \"Keep fields blank to calculate auto\"\r\n                                                          )\r\n                                                        )}\r\n                                                        max={hadnleMax(\r\n                                                          item\r\n                                                        )}\r\n                                                        value={\r\n                                                          item.closing_stock ||\r\n                                                          null\r\n                                                        }\r\n                                                        onChange={(e) => {\r\n                                                          let tempArray =\r\n                                                            [];\r\n                                                          items.map(\r\n                                                            (pushThis) => {\r\n                                                              if (\r\n                                                                pushThis.id !==\r\n                                                                item.id\r\n                                                              ) {\r\n                                                                tempArray.push(\r\n                                                                  pushThis\r\n                                                                );\r\n                                                              } else {\r\n                                                                if (\r\n                                                                  e.target\r\n                                                                    .value !==\r\n                                                                  \"\" &&\r\n                                                                  e.target\r\n                                                                    .value !==\r\n                                                                  null\r\n                                                                ) {\r\n                                                                  pushThis.closing_stock =\r\n                                                                    parseFloat(\r\n                                                                      e\r\n                                                                        .target\r\n                                                                        .value\r\n                                                                    );\r\n                                                                } else {\r\n                                                                  pushThis.closing_stock =\r\n                                                                    null;\r\n                                                                }\r\n                                                                tempArray.push(\r\n                                                                  pushThis\r\n                                                                );\r\n                                                              }\r\n                                                            }\r\n                                                          );\r\n                                                          setItems(\r\n                                                            tempArray\r\n                                                          );\r\n                                                        }}\r\n                                                      />\r\n                                                    </td>\r\n                                                  </tr>\r\n                                                );\r\n                                              } else {\r\n                                                return false;\r\n                                              }\r\n                                            })}\r\n                                          </>\r\n                                        );\r\n                                      }\r\n                                    )\r\n                                  ),\r\n                                ],\r\n                              ]\r\n                              : \"\"}\r\n                          </tbody>\r\n                        </table>\r\n                        {items && items.length > 0 && (\r\n                          <button\r\n                            type=\"submit\"\r\n                            className=\"btn btn-primary float-right px-5 mb-3\"\r\n                          >\r\n                            {_t(t(\"update\"))}\r\n                          </button>\r\n                        )}\r\n                      </form>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n              {/* pagination loading effect */}\r\n              {newWorkPeriod.uploading === true || loading === true\r\n                ? paginationLoading()\r\n                : [\r\n                  // logic === !searched\r\n                  !searchedWorkPeriod.searched ? (\r\n                    <div key=\"fragment4\">\r\n                      <div className=\"t-bg-white mt-1 t-pt-5 t-pb-5\">\r\n                        <div className=\"row align-items-center t-pl-15 t-pr-15\">\r\n                          <div className=\"col-md-7 t-mb-15 mb-md-0\">\r\n                            {/* pagination function */}\r\n                            {pagination(\r\n                              workPeriodList,\r\n                              setPaginatedWorkPeriod\r\n                            )}\r\n                          </div>\r\n                          <div className=\"col-md-5\">\r\n                            <ul className=\"t-list d-flex justify-content-md-end align-items-center\">\r\n                              <li className=\"t-list__item\">\r\n                                <span className=\"d-inline-block sm-text\">\r\n                                  {/* {showingData(workPeriodList)} */}\r\n                                </span>\r\n                              </li>\r\n                            </ul>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ) : (\r\n                    // if searched\r\n                    <div className=\"t-bg-white mt-1 t-pt-5 t-pb-5\">\r\n                      <div className=\"row align-items-center t-pl-15 t-pr-15\">\r\n                        <div className=\"col-md-7 t-mb-15 mb-md-0\">\r\n                          <ul className=\"t-list d-flex\">\r\n                            <li className=\"t-list__item no-pagination-style\">\r\n                              <button\r\n                                className=\"btn btn-primary btn-sm\"\r\n                                onClick={() =>\r\n                                  setSearchedWorkPeriod({\r\n                                    ...searchedWorkPeriod,\r\n                                    searched: false,\r\n                                  })\r\n                                }\r\n                              >\r\n                                {_t(t(\"Clear Search\"))}\r\n                              </button>\r\n                            </li>\r\n                          </ul>\r\n                        </div>\r\n                        <div className=\"col-md-5\">\r\n                          <ul className=\"t-list d-flex justify-content-md-end align-items-center\">\r\n                            <li className=\"t-list__item\">\r\n                              <span className=\"d-inline-block sm-text\">\r\n                                {/* {searchedShowingData(\r\n                                    searchedWorkPeriod,\r\n                                    workPeriodForSearch\r\n                                  )} */}\r\n                              </span>\r\n                            </li>\r\n                          </ul>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ),\r\n                ]}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default OpeningClosingStock;\r\n"]},"metadata":{},"sourceType":"module"}